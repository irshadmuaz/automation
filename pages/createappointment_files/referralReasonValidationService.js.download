(function(){let refReasonValidationApp=angular.module('ecw.service.refReasonValidation',['ecw.datatruncUtilityModule']);refReasonValidationApp.service('refReasonValidationService',['dataTruncUtilityService','refReasonValidationConstant',refReasonValidationService]);function refReasonValidationService(dataTruncUtilityService,refReasonValidationConstant){this.refReasonValidationConstant=refReasonValidationConstant;let validateReferralReasons=function(reasons,refReasonDivId,screenName,parentId,theme){let reason="";let isReasonHasPipe=false;if(angular.isUndefined(reasons)||reasons.length===0){reason=''}else{for(let i=0;i<reasons.length;i++){let obj=reasons[i];if(obj.sReason!==undefined&&obj.sReason.trim()!==""){let sReason=obj.sReason.trim();if(sReason.includes("|")){ecwAlert("Pipe(|) symbol is not supported in referral reason.");isReasonHasPipe=true;break}reason=reason.concat(obj.sReason.trim()).concat("|")}}reason=reason.substring(0,reason.length-1)}if(isReasonHasPipe){return false}$("#"+refReasonDivId).val(reason);let isDataTruncationValidationPass=dataTruncUtilityService.getTextFieldWidthsFromTable(screenName,parentId,theme);if(!isDataTruncationValidationPass){return false}return true};return{validateReferralReasons:validateReferralReasons,refReasonValidationConstant:refReasonValidationConstant}}refReasonValidationApp.constant('refReasonValidationConstant',{BLUE_THEME:'bluetheme',QS_REF_REASON_DIV_ID:'quickSearchReasonForReferral',QS_SCREEN_NAME:'web_quickSearch_referral',QS_REF_REASON_PARENT_DIV_ID:'reasonForReferralDiv',TREATMENT_REF_REASON_DIV_ID:'treatmentEditPanel_referral_all_reasons',TREATMENT_SCREEN_NAME:'web_treatmentedit',TREATMENT_REF_REASON_PARENT_DIV_ID:'treatmentEditPanel_mdl_main_div',ASC_REF_REASON_DIV_ID:'asc_referralorder_reasons',ASC_SCREEN_NAME:'web_ascOrderDetails',ASC_REF_REASON_PARENT_DIV_ID:'asc_referralorder_reasons_div'})})();
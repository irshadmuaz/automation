/*! For license information please see app.js.LICENSE.txt */
(()=>{var e,t,n={59:function(e,t,n){var i;e=n.nmd(e),function(){var r,a="Expected a function",s="__lodash_hash_undefined__",o="__lodash_placeholder__",l=32,c=128,u=1/0,h=9007199254740991,d=NaN,p=4294967295,f=[["ary",c],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",l],["partialRight",64],["rearg",256]],g="[object Arguments]",m="[object Array]",y="[object Boolean]",v="[object Date]",w="[object Error]",b="[object Function]",S="[object GeneratorFunction]",_="[object Map]",P="[object Number]",E="[object Object]",k="[object Promise]",I="[object RegExp]",C="[object Set]",L="[object String]",D="[object Symbol]",x="[object WeakMap]",T="[object ArrayBuffer]",A="[object DataView]",F="[object Float32Array]",$="[object Float64Array]",O="[object Int8Array]",N="[object Int16Array]",B="[object Int32Array]",V="[object Uint8Array]",M="[object Uint8ClampedArray]",j="[object Uint16Array]",R="[object Uint32Array]",U=/\b__p \+= '';/g,W=/\b(__p \+=) '' \+/g,z=/(__e\(.*?\)|\b__t\)) \+\n'';/g,G=/&(?:amp|lt|gt|quot|#39);/g,H=/[&<>"']/g,q=RegExp(G.source),J=RegExp(H.source),K=/<%-([\s\S]+?)%>/g,Y=/<%([\s\S]+?)%>/g,X=/<%=([\s\S]+?)%>/g,Z=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Q=/^\w*$/,ee=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,te=/[\\^$.*+?()[\]{}|]/g,ne=RegExp(te.source),ie=/^\s+|\s+$/g,re=/^\s+/,ae=/\s+$/,se=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,oe=/\{\n\/\* \[wrapped with (.+)\] \*/,le=/,? & /,ce=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,ue=/\\(\\)?/g,he=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,de=/\w*$/,pe=/^[-+]0x[0-9a-f]+$/i,fe=/^0b[01]+$/i,ge=/^\[object .+?Constructor\]$/,me=/^0o[0-7]+$/i,ye=/^(?:0|[1-9]\d*)$/,ve=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,we=/($^)/,be=/['\n\r\u2028\u2029\\]/g,Se="\\ud800-\\udfff",_e="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Pe="\\u2700-\\u27bf",Ee="a-z\\xdf-\\xf6\\xf8-\\xff",ke="A-Z\\xc0-\\xd6\\xd8-\\xde",Ie="\\ufe0e\\ufe0f",Ce="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Le="["+Se+"]",De="["+Ce+"]",xe="["+_e+"]",Te="\\d+",Ae="["+Pe+"]",Fe="["+Ee+"]",$e="[^"+Se+Ce+Te+Pe+Ee+ke+"]",Oe="\\ud83c[\\udffb-\\udfff]",Ne="[^"+Se+"]",Be="(?:\\ud83c[\\udde6-\\uddff]){2}",Ve="[\\ud800-\\udbff][\\udc00-\\udfff]",Me="["+ke+"]",je="\\u200d",Re="(?:"+Fe+"|"+$e+")",Ue="(?:"+Me+"|"+$e+")",We="(?:['’](?:d|ll|m|re|s|t|ve))?",ze="(?:['’](?:D|LL|M|RE|S|T|VE))?",Ge="(?:"+xe+"|"+Oe+")?",He="["+Ie+"]?",qe=He+Ge+"(?:"+je+"(?:"+[Ne,Be,Ve].join("|")+")"+He+Ge+")*",Je="(?:"+[Ae,Be,Ve].join("|")+")"+qe,Ke="(?:"+[Ne+xe+"?",xe,Be,Ve,Le].join("|")+")",Ye=RegExp("['’]","g"),Xe=RegExp(xe,"g"),Ze=RegExp(Oe+"(?="+Oe+")|"+Ke+qe,"g"),Qe=RegExp([Me+"?"+Fe+"+"+We+"(?="+[De,Me,"$"].join("|")+")",Ue+"+"+ze+"(?="+[De,Me+Re,"$"].join("|")+")",Me+"?"+Re+"+"+We,Me+"+"+ze,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Te,Je].join("|"),"g"),et=RegExp("["+je+Se+_e+Ie+"]"),tt=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,nt=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],it=-1,rt={};rt[F]=rt[$]=rt[O]=rt[N]=rt[B]=rt[V]=rt[M]=rt[j]=rt[R]=!0,rt[g]=rt[m]=rt[T]=rt[y]=rt[A]=rt[v]=rt[w]=rt[b]=rt[_]=rt[P]=rt[E]=rt[I]=rt[C]=rt[L]=rt[x]=!1;var at={};at[g]=at[m]=at[T]=at[A]=at[y]=at[v]=at[F]=at[$]=at[O]=at[N]=at[B]=at[_]=at[P]=at[E]=at[I]=at[C]=at[L]=at[D]=at[V]=at[M]=at[j]=at[R]=!0,at[w]=at[b]=at[x]=!1;var st={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ot=parseFloat,lt=parseInt,ct="object"==typeof window.global&&window.global&&window.global.Object===Object&&window.global,ut="object"==typeof self&&self&&self.Object===Object&&self,ht=ct||ut||Function("return this")(),dt=t&&!t.nodeType&&t,pt=dt&&e&&!e.nodeType&&e,ft=pt&&pt.exports===dt,gt=ft&&ct.process,mt=function(){try{return pt&&pt.require&&pt.require("util").types||gt&&gt.binding&&gt.binding("util")}catch(e){}}(),yt=mt&&mt.isArrayBuffer,vt=mt&&mt.isDate,wt=mt&&mt.isMap,bt=mt&&mt.isRegExp,St=mt&&mt.isSet,_t=mt&&mt.isTypedArray;function Pt(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function Et(e,t,n,i){for(var r=-1,a=null==e?0:e.length;++r<a;){var s=e[r];t(i,s,n(s),e)}return i}function kt(e,t){for(var n=-1,i=null==e?0:e.length;++n<i&&!1!==t(e[n],n,e););return e}function It(e,t){for(var n=null==e?0:e.length;n--&&!1!==t(e[n],n,e););return e}function Ct(e,t){for(var n=-1,i=null==e?0:e.length;++n<i;)if(!t(e[n],n,e))return!1;return!0}function Lt(e,t){for(var n=-1,i=null==e?0:e.length,r=0,a=[];++n<i;){var s=e[n];t(s,n,e)&&(a[r++]=s)}return a}function Dt(e,t){return!(null==e||!e.length)&&Mt(e,t,0)>-1}function xt(e,t,n){for(var i=-1,r=null==e?0:e.length;++i<r;)if(n(t,e[i]))return!0;return!1}function Tt(e,t){for(var n=-1,i=null==e?0:e.length,r=Array(i);++n<i;)r[n]=t(e[n],n,e);return r}function At(e,t){for(var n=-1,i=t.length,r=e.length;++n<i;)e[r+n]=t[n];return e}function Ft(e,t,n,i){var r=-1,a=null==e?0:e.length;for(i&&a&&(n=e[++r]);++r<a;)n=t(n,e[r],r,e);return n}function $t(e,t,n,i){var r=null==e?0:e.length;for(i&&r&&(n=e[--r]);r--;)n=t(n,e[r],r,e);return n}function Ot(e,t){for(var n=-1,i=null==e?0:e.length;++n<i;)if(t(e[n],n,e))return!0;return!1}var Nt=Wt("length");function Bt(e,t,n){var i;return n(e,(function(e,n,r){if(t(e,n,r))return i=n,!1})),i}function Vt(e,t,n,i){for(var r=e.length,a=n+(i?1:-1);i?a--:++a<r;)if(t(e[a],a,e))return a;return-1}function Mt(e,t,n){return t==t?function(e,t,n){for(var i=n-1,r=e.length;++i<r;)if(e[i]===t)return i;return-1}(e,t,n):Vt(e,Rt,n)}function jt(e,t,n,i){for(var r=n-1,a=e.length;++r<a;)if(i(e[r],t))return r;return-1}function Rt(e){return e!=e}function Ut(e,t){var n=null==e?0:e.length;return n?Ht(e,t)/n:d}function Wt(e){return function(t){return null==t?r:t[e]}}function zt(e){return function(t){return null==e?r:e[t]}}function Gt(e,t,n,i,r){return r(e,(function(e,r,a){n=i?(i=!1,e):t(n,e,r,a)})),n}function Ht(e,t){for(var n,i=-1,a=e.length;++i<a;){var s=t(e[i]);s!==r&&(n=n===r?s:n+s)}return n}function qt(e,t){for(var n=-1,i=Array(e);++n<e;)i[n]=t(n);return i}function Jt(e){return function(t){return e(t)}}function Kt(e,t){return Tt(t,(function(t){return e[t]}))}function Yt(e,t){return e.has(t)}function Xt(e,t){for(var n=-1,i=e.length;++n<i&&Mt(t,e[n],0)>-1;);return n}function Zt(e,t){for(var n=e.length;n--&&Mt(t,e[n],0)>-1;);return n}var Qt=zt({À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"}),en=zt({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function tn(e){return"\\"+st[e]}function nn(e){return et.test(e)}function rn(e){var t=-1,n=Array(e.size);return e.forEach((function(e,i){n[++t]=[i,e]})),n}function an(e,t){return function(n){return e(t(n))}}function sn(e,t){for(var n=-1,i=e.length,r=0,a=[];++n<i;){var s=e[n];s!==t&&s!==o||(e[n]=o,a[r++]=n)}return a}function on(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}function ln(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=[e,e]})),n}function cn(e){return nn(e)?function(e){for(var t=Ze.lastIndex=0;Ze.test(e);)++t;return t}(e):Nt(e)}function un(e){return nn(e)?function(e){return e.match(Ze)||[]}(e):function(e){return e.split("")}(e)}var hn=zt({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),dn=function e(t){var n,i=(t=null==t?ht:dn.defaults(ht.Object(),t,dn.pick(ht,nt))).Array,Se=t.Date,_e=t.Error,Pe=t.Function,Ee=t.Math,ke=t.Object,Ie=t.RegExp,Ce=t.String,Le=t.TypeError,De=i.prototype,xe=Pe.prototype,Te=ke.prototype,Ae=t["__core-js_shared__"],Fe=xe.toString,$e=Te.hasOwnProperty,Oe=0,Ne=(n=/[^.]+$/.exec(Ae&&Ae.keys&&Ae.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"",Be=Te.toString,Ve=Fe.call(ke),Me=ht._,je=Ie("^"+Fe.call($e).replace(te,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Re=ft?t.Buffer:r,Ue=t.Symbol,We=t.Uint8Array,ze=Re?Re.allocUnsafe:r,Ge=an(ke.getPrototypeOf,ke),He=ke.create,qe=Te.propertyIsEnumerable,Je=De.splice,Ke=Ue?Ue.isConcatSpreadable:r,Ze=Ue?Ue.iterator:r,et=Ue?Ue.toStringTag:r,st=function(){try{var e=oa(ke,"defineProperty");return e({},"",{}),e}catch(e){}}(),ct=t.clearTimeout!==ht.clearTimeout&&t.clearTimeout,ut=Se&&Se.now!==ht.Date.now&&Se.now,dt=t.setTimeout!==ht.setTimeout&&t.setTimeout,pt=Ee.ceil,gt=Ee.floor,mt=ke.getOwnPropertySymbols,Nt=Re?Re.isBuffer:r,zt=t.isFinite,pn=De.join,fn=an(ke.keys,ke),gn=Ee.max,mn=Ee.min,yn=Se.now,vn=t.parseInt,wn=Ee.random,bn=De.reverse,Sn=oa(t,"DataView"),_n=oa(t,"Map"),Pn=oa(t,"Promise"),En=oa(t,"Set"),kn=oa(t,"WeakMap"),In=oa(ke,"create"),Cn=kn&&new kn,Ln={},Dn=Oa(Sn),xn=Oa(_n),Tn=Oa(Pn),An=Oa(En),Fn=Oa(kn),$n=Ue?Ue.prototype:r,On=$n?$n.valueOf:r,Nn=$n?$n.toString:r;function Bn(e){if(Zs(e)&&!Rs(e)&&!(e instanceof Rn)){if(e instanceof jn)return e;if($e.call(e,"__wrapped__"))return Na(e)}return new jn(e)}var Vn=function(){function e(){}return function(t){if(!Xs(t))return{};if(He)return He(t);e.prototype=t;var n=new e;return e.prototype=r,n}}();function Mn(){}function jn(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=r}function Rn(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=p,this.__views__=[]}function Un(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function Wn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function zn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function Gn(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new zn;++t<n;)this.add(e[t])}function Hn(e){var t=this.__data__=new Wn(e);this.size=t.size}function qn(e,t){var n=Rs(e),i=!n&&js(e),r=!n&&!i&&Gs(e),a=!n&&!i&&!r&&so(e),s=n||i||r||a,o=s?qt(e.length,Ce):[],l=o.length;for(var c in e)!t&&!$e.call(e,c)||s&&("length"==c||r&&("offset"==c||"parent"==c)||a&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||fa(c,l))||o.push(c);return o}function Jn(e){var t=e.length;return t?e[zi(0,t-1)]:r}function Kn(e,t){return xa(kr(e),ri(t,0,e.length))}function Yn(e){return xa(kr(e))}function Xn(e,t,n){(n!==r&&!Bs(e[t],n)||n===r&&!(t in e))&&ni(e,t,n)}function Zn(e,t,n){var i=e[t];$e.call(e,t)&&Bs(i,n)&&(n!==r||t in e)||ni(e,t,n)}function Qn(e,t){for(var n=e.length;n--;)if(Bs(e[n][0],t))return n;return-1}function ei(e,t,n,i){return ci(e,(function(e,r,a){t(i,e,n(e),a)})),i}function ti(e,t){return e&&Ir(t,Do(t),e)}function ni(e,t,n){"__proto__"==t&&st?st(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function ii(e,t){for(var n=-1,a=t.length,s=i(a),o=null==e;++n<a;)s[n]=o?r:Eo(e,t[n]);return s}function ri(e,t,n){return e==e&&(n!==r&&(e=e<=n?e:n),t!==r&&(e=e>=t?e:t)),e}function ai(e,t,n,i,a,s){var o,l=1&t,c=2&t,u=4&t;if(n&&(o=a?n(e,i,a,s):n(e)),o!==r)return o;if(!Xs(e))return e;var h=Rs(e);if(h){if(o=function(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&$e.call(e,"index")&&(n.index=e.index,n.input=e.input),n}(e),!l)return kr(e,o)}else{var d=ua(e),p=d==b||d==S;if(Gs(e))return wr(e,l);if(d==E||d==g||p&&!a){if(o=c||p?{}:da(e),!l)return c?function(e,t){return Ir(e,ca(e),t)}(e,function(e,t){return e&&Ir(t,xo(t),e)}(o,e)):function(e,t){return Ir(e,la(e),t)}(e,ti(o,e))}else{if(!at[d])return a?e:{};o=function(e,t,n){var i,r=e.constructor;switch(t){case T:return br(e);case y:case v:return new r(+e);case A:return function(e,t){var n=t?br(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}(e,n);case F:case $:case O:case N:case B:case V:case M:case j:case R:return Sr(e,n);case _:return new r;case P:case L:return new r(e);case I:return function(e){var t=new e.constructor(e.source,de.exec(e));return t.lastIndex=e.lastIndex,t}(e);case C:return new r;case D:return i=e,On?ke(On.call(i)):{}}}(e,d,l)}}s||(s=new Hn);var f=s.get(e);if(f)return f;s.set(e,o),io(e)?e.forEach((function(i){o.add(ai(i,t,n,i,e,s))})):Qs(e)&&e.forEach((function(i,r){o.set(r,ai(i,t,n,r,e,s))}));var m=h?r:(u?c?ea:Qr:c?xo:Do)(e);return kt(m||e,(function(i,r){m&&(i=e[r=i]),Zn(o,r,ai(i,t,n,r,e,s))})),o}function si(e,t,n){var i=n.length;if(null==e)return!i;for(e=ke(e);i--;){var a=n[i],s=t[a],o=e[a];if(o===r&&!(a in e)||!s(o))return!1}return!0}function oi(e,t,n){if("function"!=typeof e)throw new Le(a);return Ia((function(){e.apply(r,n)}),t)}function li(e,t,n,i){var r=-1,a=Dt,s=!0,o=e.length,l=[],c=t.length;if(!o)return l;n&&(t=Tt(t,Jt(n))),i?(a=xt,s=!1):t.length>=200&&(a=Yt,s=!1,t=new Gn(t));e:for(;++r<o;){var u=e[r],h=null==n?u:n(u);if(u=i||0!==u?u:0,s&&h==h){for(var d=c;d--;)if(t[d]===h)continue e;l.push(u)}else a(t,h,i)||l.push(u)}return l}Bn.templateSettings={escape:K,evaluate:Y,interpolate:X,variable:"",imports:{_:Bn}},Bn.prototype=Mn.prototype,Bn.prototype.constructor=Bn,jn.prototype=Vn(Mn.prototype),jn.prototype.constructor=jn,Rn.prototype=Vn(Mn.prototype),Rn.prototype.constructor=Rn,Un.prototype.clear=function(){this.__data__=In?In(null):{},this.size=0},Un.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Un.prototype.get=function(e){var t=this.__data__;if(In){var n=t[e];return n===s?r:n}return $e.call(t,e)?t[e]:r},Un.prototype.has=function(e){var t=this.__data__;return In?t[e]!==r:$e.call(t,e)},Un.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=In&&t===r?s:t,this},Wn.prototype.clear=function(){this.__data__=[],this.size=0},Wn.prototype.delete=function(e){var t=this.__data__,n=Qn(t,e);return!(n<0||(n==t.length-1?t.pop():Je.call(t,n,1),--this.size,0))},Wn.prototype.get=function(e){var t=this.__data__,n=Qn(t,e);return n<0?r:t[n][1]},Wn.prototype.has=function(e){return Qn(this.__data__,e)>-1},Wn.prototype.set=function(e,t){var n=this.__data__,i=Qn(n,e);return i<0?(++this.size,n.push([e,t])):n[i][1]=t,this},zn.prototype.clear=function(){this.size=0,this.__data__={hash:new Un,map:new(_n||Wn),string:new Un}},zn.prototype.delete=function(e){var t=aa(this,e).delete(e);return this.size-=t?1:0,t},zn.prototype.get=function(e){return aa(this,e).get(e)},zn.prototype.has=function(e){return aa(this,e).has(e)},zn.prototype.set=function(e,t){var n=aa(this,e),i=n.size;return n.set(e,t),this.size+=n.size==i?0:1,this},Gn.prototype.add=Gn.prototype.push=function(e){return this.__data__.set(e,s),this},Gn.prototype.has=function(e){return this.__data__.has(e)},Hn.prototype.clear=function(){this.__data__=new Wn,this.size=0},Hn.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},Hn.prototype.get=function(e){return this.__data__.get(e)},Hn.prototype.has=function(e){return this.__data__.has(e)},Hn.prototype.set=function(e,t){var n=this.__data__;if(n instanceof Wn){var i=n.__data__;if(!_n||i.length<199)return i.push([e,t]),this.size=++n.size,this;n=this.__data__=new zn(i)}return n.set(e,t),this.size=n.size,this};var ci=Dr(yi),ui=Dr(vi,!0);function hi(e,t){var n=!0;return ci(e,(function(e,i,r){return n=!!t(e,i,r)})),n}function di(e,t,n){for(var i=-1,a=e.length;++i<a;){var s=e[i],o=t(s);if(null!=o&&(l===r?o==o&&!ao(o):n(o,l)))var l=o,c=s}return c}function pi(e,t){var n=[];return ci(e,(function(e,i,r){t(e,i,r)&&n.push(e)})),n}function fi(e,t,n,i,r){var a=-1,s=e.length;for(n||(n=pa),r||(r=[]);++a<s;){var o=e[a];t>0&&n(o)?t>1?fi(o,t-1,n,i,r):At(r,o):i||(r[r.length]=o)}return r}var gi=xr(),mi=xr(!0);function yi(e,t){return e&&gi(e,t,Do)}function vi(e,t){return e&&mi(e,t,Do)}function wi(e,t){return Lt(t,(function(t){return Js(e[t])}))}function bi(e,t){for(var n=0,i=(t=gr(t,e)).length;null!=e&&n<i;)e=e[$a(t[n++])];return n&&n==i?e:r}function Si(e,t,n){var i=t(e);return Rs(e)?i:At(i,n(e))}function _i(e){return null==e?e===r?"[object Undefined]":"[object Null]":et&&et in ke(e)?function(e){var t=$e.call(e,et),n=e[et];try{e[et]=r;var i=!0}catch(e){}var a=Be.call(e);return i&&(t?e[et]=n:delete e[et]),a}(e):function(e){return Be.call(e)}(e)}function Pi(e,t){return e>t}function Ei(e,t){return null!=e&&$e.call(e,t)}function ki(e,t){return null!=e&&t in ke(e)}function Ii(e,t,n){for(var a=n?xt:Dt,s=e[0].length,o=e.length,l=o,c=i(o),u=1/0,h=[];l--;){var d=e[l];l&&t&&(d=Tt(d,Jt(t))),u=mn(d.length,u),c[l]=!n&&(t||s>=120&&d.length>=120)?new Gn(l&&d):r}d=e[0];var p=-1,f=c[0];e:for(;++p<s&&h.length<u;){var g=d[p],m=t?t(g):g;if(g=n||0!==g?g:0,!(f?Yt(f,m):a(h,m,n))){for(l=o;--l;){var y=c[l];if(!(y?Yt(y,m):a(e[l],m,n)))continue e}f&&f.push(m),h.push(g)}}return h}function Ci(e,t,n){var i=null==(e=Pa(e,t=gr(t,e)))?e:e[$a(qa(t))];return null==i?r:Pt(i,e,n)}function Li(e){return Zs(e)&&_i(e)==g}function Di(e,t,n,i,a){return e===t||(null==e||null==t||!Zs(e)&&!Zs(t)?e!=e&&t!=t:function(e,t,n,i,a,s){var o=Rs(e),l=Rs(t),c=o?m:ua(e),u=l?m:ua(t),h=(c=c==g?E:c)==E,d=(u=u==g?E:u)==E,p=c==u;if(p&&Gs(e)){if(!Gs(t))return!1;o=!0,h=!1}if(p&&!h)return s||(s=new Hn),o||so(e)?Xr(e,t,n,i,a,s):function(e,t,n,i,r,a,s){switch(n){case A:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case T:return!(e.byteLength!=t.byteLength||!a(new We(e),new We(t)));case y:case v:case P:return Bs(+e,+t);case w:return e.name==t.name&&e.message==t.message;case I:case L:return e==t+"";case _:var o=rn;case C:var l=1&i;if(o||(o=on),e.size!=t.size&&!l)return!1;var c=s.get(e);if(c)return c==t;i|=2,s.set(e,t);var u=Xr(o(e),o(t),i,r,a,s);return s.delete(e),u;case D:if(On)return On.call(e)==On.call(t)}return!1}(e,t,c,n,i,a,s);if(!(1&n)){var f=h&&$e.call(e,"__wrapped__"),b=d&&$e.call(t,"__wrapped__");if(f||b){var S=f?e.value():e,k=b?t.value():t;return s||(s=new Hn),a(S,k,n,i,s)}}return!!p&&(s||(s=new Hn),function(e,t,n,i,a,s){var o=1&n,l=Qr(e),c=l.length;if(c!=Qr(t).length&&!o)return!1;for(var u=c;u--;){var h=l[u];if(!(o?h in t:$e.call(t,h)))return!1}var d=s.get(e);if(d&&s.get(t))return d==t;var p=!0;s.set(e,t),s.set(t,e);for(var f=o;++u<c;){var g=e[h=l[u]],m=t[h];if(i)var y=o?i(m,g,h,t,e,s):i(g,m,h,e,t,s);if(!(y===r?g===m||a(g,m,n,i,s):y)){p=!1;break}f||(f="constructor"==h)}if(p&&!f){var v=e.constructor,w=t.constructor;v==w||!("constructor"in e)||!("constructor"in t)||"function"==typeof v&&v instanceof v&&"function"==typeof w&&w instanceof w||(p=!1)}return s.delete(e),s.delete(t),p}(e,t,n,i,a,s))}(e,t,n,i,Di,a))}function xi(e,t,n,i){var a=n.length,s=a,o=!i;if(null==e)return!s;for(e=ke(e);a--;){var l=n[a];if(o&&l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}for(;++a<s;){var c=(l=n[a])[0],u=e[c],h=l[1];if(o&&l[2]){if(u===r&&!(c in e))return!1}else{var d=new Hn;if(i)var p=i(u,h,c,e,t,d);if(!(p===r?Di(h,u,3,i,d):p))return!1}}return!0}function Ti(e){return!(!Xs(e)||(t=e,Ne&&Ne in t))&&(Js(e)?je:ge).test(Oa(e));var t}function Ai(e){return"function"==typeof e?e:null==e?tl:"object"==typeof e?Rs(e)?Bi(e[0],e[1]):Ni(e):ul(e)}function Fi(e){if(!wa(e))return fn(e);var t=[];for(var n in ke(e))$e.call(e,n)&&"constructor"!=n&&t.push(n);return t}function $i(e,t){return e<t}function Oi(e,t){var n=-1,r=Ws(e)?i(e.length):[];return ci(e,(function(e,i,a){r[++n]=t(e,i,a)})),r}function Ni(e){var t=sa(e);return 1==t.length&&t[0][2]?Sa(t[0][0],t[0][1]):function(n){return n===e||xi(n,e,t)}}function Bi(e,t){return ma(e)&&ba(t)?Sa($a(e),t):function(n){var i=Eo(n,e);return i===r&&i===t?ko(n,e):Di(t,i,3)}}function Vi(e,t,n,i,a){e!==t&&gi(t,(function(s,o){if(a||(a=new Hn),Xs(s))!function(e,t,n,i,a,s,o){var l=Ea(e,n),c=Ea(t,n),u=o.get(c);if(u)Xn(e,n,u);else{var h=s?s(l,c,n+"",e,t,o):r,d=h===r;if(d){var p=Rs(c),f=!p&&Gs(c),g=!p&&!f&&so(c);h=c,p||f||g?Rs(l)?h=l:zs(l)?h=kr(l):f?(d=!1,h=wr(c,!0)):g?(d=!1,h=Sr(c,!0)):h=[]:to(c)||js(c)?(h=l,js(l)?h=go(l):Xs(l)&&!Js(l)||(h=da(c))):d=!1}d&&(o.set(c,h),a(h,c,i,s,o),o.delete(c)),Xn(e,n,h)}}(e,t,o,n,Vi,i,a);else{var l=i?i(Ea(e,o),s,o+"",e,t,a):r;l===r&&(l=s),Xn(e,o,l)}}),xo)}function Mi(e,t){var n=e.length;if(n)return fa(t+=t<0?n:0,n)?e[t]:r}function ji(e,t,n){var i=-1;t=Tt(t.length?t:[tl],Jt(ra()));var r=Oi(e,(function(e,n,r){var a=Tt(t,(function(t){return t(e)}));return{criteria:a,index:++i,value:e}}));return function(e,t){var i=e.length;for(e.sort((function(e,t){return function(e,t,n){for(var i=-1,r=e.criteria,a=t.criteria,s=r.length,o=n.length;++i<s;){var l=_r(r[i],a[i]);if(l)return i>=o?l:l*("desc"==n[i]?-1:1)}return e.index-t.index}(e,t,n)}));i--;)e[i]=e[i].value;return e}(r)}function Ri(e,t,n){for(var i=-1,r=t.length,a={};++i<r;){var s=t[i],o=bi(e,s);n(o,s)&&Ki(a,gr(s,e),o)}return a}function Ui(e,t,n,i){var r=i?jt:Mt,a=-1,s=t.length,o=e;for(e===t&&(t=kr(t)),n&&(o=Tt(e,Jt(n)));++a<s;)for(var l=0,c=t[a],u=n?n(c):c;(l=r(o,u,l,i))>-1;)o!==e&&Je.call(o,l,1),Je.call(e,l,1);return e}function Wi(e,t){for(var n=e?t.length:0,i=n-1;n--;){var r=t[n];if(n==i||r!==a){var a=r;fa(r)?Je.call(e,r,1):or(e,r)}}return e}function zi(e,t){return e+gt(wn()*(t-e+1))}function Gi(e,t){var n="";if(!e||t<1||t>h)return n;do{t%2&&(n+=e),(t=gt(t/2))&&(e+=e)}while(t);return n}function Hi(e,t){return Ca(_a(e,t,tl),e+"")}function qi(e){return Jn(Vo(e))}function Ji(e,t){var n=Vo(e);return xa(n,ri(t,0,n.length))}function Ki(e,t,n,i){if(!Xs(e))return e;for(var a=-1,s=(t=gr(t,e)).length,o=s-1,l=e;null!=l&&++a<s;){var c=$a(t[a]),u=n;if(a!=o){var h=l[c];(u=i?i(h,c,l):r)===r&&(u=Xs(h)?h:fa(t[a+1])?[]:{})}Zn(l,c,u),l=l[c]}return e}var Yi=Cn?function(e,t){return Cn.set(e,t),e}:tl,Xi=st?function(e,t){return st(e,"toString",{configurable:!0,enumerable:!1,value:Zo(t),writable:!0})}:tl;function Zi(e){return xa(Vo(e))}function Qi(e,t,n){var r=-1,a=e.length;t<0&&(t=-t>a?0:a+t),(n=n>a?a:n)<0&&(n+=a),a=t>n?0:n-t>>>0,t>>>=0;for(var s=i(a);++r<a;)s[r]=e[r+t];return s}function er(e,t){var n;return ci(e,(function(e,i,r){return!(n=t(e,i,r))})),!!n}function tr(e,t,n){var i=0,r=null==e?i:e.length;if("number"==typeof t&&t==t&&r<=2147483647){for(;i<r;){var a=i+r>>>1,s=e[a];null!==s&&!ao(s)&&(n?s<=t:s<t)?i=a+1:r=a}return r}return nr(e,t,tl,n)}function nr(e,t,n,i){t=n(t);for(var a=0,s=null==e?0:e.length,o=t!=t,l=null===t,c=ao(t),u=t===r;a<s;){var h=gt((a+s)/2),d=n(e[h]),p=d!==r,f=null===d,g=d==d,m=ao(d);if(o)var y=i||g;else y=u?g&&(i||p):l?g&&p&&(i||!f):c?g&&p&&!f&&(i||!m):!f&&!m&&(i?d<=t:d<t);y?a=h+1:s=h}return mn(s,4294967294)}function ir(e,t){for(var n=-1,i=e.length,r=0,a=[];++n<i;){var s=e[n],o=t?t(s):s;if(!n||!Bs(o,l)){var l=o;a[r++]=0===s?0:s}}return a}function rr(e){return"number"==typeof e?e:ao(e)?d:+e}function ar(e){if("string"==typeof e)return e;if(Rs(e))return Tt(e,ar)+"";if(ao(e))return Nn?Nn.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function sr(e,t,n){var i=-1,r=Dt,a=e.length,s=!0,o=[],l=o;if(n)s=!1,r=xt;else if(a>=200){var c=t?null:Gr(e);if(c)return on(c);s=!1,r=Yt,l=new Gn}else l=t?[]:o;e:for(;++i<a;){var u=e[i],h=t?t(u):u;if(u=n||0!==u?u:0,s&&h==h){for(var d=l.length;d--;)if(l[d]===h)continue e;t&&l.push(h),o.push(u)}else r(l,h,n)||(l!==o&&l.push(h),o.push(u))}return o}function or(e,t){return null==(e=Pa(e,t=gr(t,e)))||delete e[$a(qa(t))]}function lr(e,t,n,i){return Ki(e,t,n(bi(e,t)),i)}function cr(e,t,n,i){for(var r=e.length,a=i?r:-1;(i?a--:++a<r)&&t(e[a],a,e););return n?Qi(e,i?0:a,i?a+1:r):Qi(e,i?a+1:0,i?r:a)}function ur(e,t){var n=e;return n instanceof Rn&&(n=n.value()),Ft(t,(function(e,t){return t.func.apply(t.thisArg,At([e],t.args))}),n)}function hr(e,t,n){var r=e.length;if(r<2)return r?sr(e[0]):[];for(var a=-1,s=i(r);++a<r;)for(var o=e[a],l=-1;++l<r;)l!=a&&(s[a]=li(s[a]||o,e[l],t,n));return sr(fi(s,1),t,n)}function dr(e,t,n){for(var i=-1,a=e.length,s=t.length,o={};++i<a;){var l=i<s?t[i]:r;n(o,e[i],l)}return o}function pr(e){return zs(e)?e:[]}function fr(e){return"function"==typeof e?e:tl}function gr(e,t){return Rs(e)?e:ma(e,t)?[e]:Fa(mo(e))}var mr=Hi;function yr(e,t,n){var i=e.length;return n=n===r?i:n,!t&&n>=i?e:Qi(e,t,n)}var vr=ct||function(e){return ht.clearTimeout(e)};function wr(e,t){if(t)return e.slice();var n=e.length,i=ze?ze(n):new e.constructor(n);return e.copy(i),i}function br(e){var t=new e.constructor(e.byteLength);return new We(t).set(new We(e)),t}function Sr(e,t){var n=t?br(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function _r(e,t){if(e!==t){var n=e!==r,i=null===e,a=e==e,s=ao(e),o=t!==r,l=null===t,c=t==t,u=ao(t);if(!l&&!u&&!s&&e>t||s&&o&&c&&!l&&!u||i&&o&&c||!n&&c||!a)return 1;if(!i&&!s&&!u&&e<t||u&&n&&a&&!i&&!s||l&&n&&a||!o&&a||!c)return-1}return 0}function Pr(e,t,n,r){for(var a=-1,s=e.length,o=n.length,l=-1,c=t.length,u=gn(s-o,0),h=i(c+u),d=!r;++l<c;)h[l]=t[l];for(;++a<o;)(d||a<s)&&(h[n[a]]=e[a]);for(;u--;)h[l++]=e[a++];return h}function Er(e,t,n,r){for(var a=-1,s=e.length,o=-1,l=n.length,c=-1,u=t.length,h=gn(s-l,0),d=i(h+u),p=!r;++a<h;)d[a]=e[a];for(var f=a;++c<u;)d[f+c]=t[c];for(;++o<l;)(p||a<s)&&(d[f+n[o]]=e[a++]);return d}function kr(e,t){var n=-1,r=e.length;for(t||(t=i(r));++n<r;)t[n]=e[n];return t}function Ir(e,t,n,i){var a=!n;n||(n={});for(var s=-1,o=t.length;++s<o;){var l=t[s],c=i?i(n[l],e[l],l,n,e):r;c===r&&(c=e[l]),a?ni(n,l,c):Zn(n,l,c)}return n}function Cr(e,t){return function(n,i){var r=Rs(n)?Et:ei,a=t?t():{};return r(n,e,ra(i,2),a)}}function Lr(e){return Hi((function(t,n){var i=-1,a=n.length,s=a>1?n[a-1]:r,o=a>2?n[2]:r;for(s=e.length>3&&"function"==typeof s?(a--,s):r,o&&ga(n[0],n[1],o)&&(s=a<3?r:s,a=1),t=ke(t);++i<a;){var l=n[i];l&&e(t,l,i,s)}return t}))}function Dr(e,t){return function(n,i){if(null==n)return n;if(!Ws(n))return e(n,i);for(var r=n.length,a=t?r:-1,s=ke(n);(t?a--:++a<r)&&!1!==i(s[a],a,s););return n}}function xr(e){return function(t,n,i){for(var r=-1,a=ke(t),s=i(t),o=s.length;o--;){var l=s[e?o:++r];if(!1===n(a[l],l,a))break}return t}}function Tr(e){return function(t){var n=nn(t=mo(t))?un(t):r,i=n?n[0]:t.charAt(0),a=n?yr(n,1).join(""):t.slice(1);return i[e]()+a}}function Ar(e){return function(t){return Ft(Ko(Ro(t).replace(Ye,"")),e,"")}}function Fr(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=Vn(e.prototype),i=e.apply(n,t);return Xs(i)?i:n}}function $r(e){return function(t,n,i){var a=ke(t);if(!Ws(t)){var s=ra(n,3);t=Do(t),n=function(e){return s(a[e],e,a)}}var o=e(t,n,i);return o>-1?a[s?t[o]:o]:r}}function Or(e){return Zr((function(t){var n=t.length,i=n,s=jn.prototype.thru;for(e&&t.reverse();i--;){var o=t[i];if("function"!=typeof o)throw new Le(a);if(s&&!l&&"wrapper"==na(o))var l=new jn([],!0)}for(i=l?i:n;++i<n;){var c=na(o=t[i]),u="wrapper"==c?ta(o):r;l=u&&ya(u[0])&&424==u[1]&&!u[4].length&&1==u[9]?l[na(u[0])].apply(l,u[3]):1==o.length&&ya(o)?l[c]():l.thru(o)}return function(){var e=arguments,i=e[0];if(l&&1==e.length&&Rs(i))return l.plant(i).value();for(var r=0,a=n?t[r].apply(this,e):i;++r<n;)a=t[r].call(this,a);return a}}))}function Nr(e,t,n,a,s,o,l,u,h,d){var p=t&c,f=1&t,g=2&t,m=24&t,y=512&t,v=g?r:Fr(e);return function c(){for(var w=arguments.length,b=i(w),S=w;S--;)b[S]=arguments[S];if(m)var _=ia(c),P=function(e,t){for(var n=e.length,i=0;n--;)e[n]===t&&++i;return i}(b,_);if(a&&(b=Pr(b,a,s,m)),o&&(b=Er(b,o,l,m)),w-=P,m&&w<d){var E=sn(b,_);return Wr(e,t,Nr,c.placeholder,n,b,E,u,h,d-w)}var k=f?n:this,I=g?k[e]:e;return w=b.length,u?b=function(e,t){for(var n=e.length,i=mn(t.length,n),a=kr(e);i--;){var s=t[i];e[i]=fa(s,n)?a[s]:r}return e}(b,u):y&&w>1&&b.reverse(),p&&h<w&&(b.length=h),this&&this!==ht&&this instanceof c&&(I=v||Fr(I)),I.apply(k,b)}}function Br(e,t){return function(n,i){return function(e,t,n,i){return yi(e,(function(e,r,a){t(i,n(e),r,a)})),i}(n,e,t(i),{})}}function Vr(e,t){return function(n,i){var a;if(n===r&&i===r)return t;if(n!==r&&(a=n),i!==r){if(a===r)return i;"string"==typeof n||"string"==typeof i?(n=ar(n),i=ar(i)):(n=rr(n),i=rr(i)),a=e(n,i)}return a}}function Mr(e){return Zr((function(t){return t=Tt(t,Jt(ra())),Hi((function(n){var i=this;return e(t,(function(e){return Pt(e,i,n)}))}))}))}function jr(e,t){var n=(t=t===r?" ":ar(t)).length;if(n<2)return n?Gi(t,e):t;var i=Gi(t,pt(e/cn(t)));return nn(t)?yr(un(i),0,e).join(""):i.slice(0,e)}function Rr(e){return function(t,n,a){return a&&"number"!=typeof a&&ga(t,n,a)&&(n=a=r),t=uo(t),n===r?(n=t,t=0):n=uo(n),function(e,t,n,r){for(var a=-1,s=gn(pt((t-e)/(n||1)),0),o=i(s);s--;)o[r?s:++a]=e,e+=n;return o}(t,n,a=a===r?t<n?1:-1:uo(a),e)}}function Ur(e){return function(t,n){return"string"==typeof t&&"string"==typeof n||(t=fo(t),n=fo(n)),e(t,n)}}function Wr(e,t,n,i,a,s,o,c,u,h){var d=8&t;t|=d?l:64,4&(t&=~(d?64:l))||(t&=-4);var p=[e,t,a,d?s:r,d?o:r,d?r:s,d?r:o,c,u,h],f=n.apply(r,p);return ya(e)&&ka(f,p),f.placeholder=i,La(f,e,t)}function zr(e){var t=Ee[e];return function(e,n){if(e=fo(e),(n=null==n?0:mn(ho(n),292))&&zt(e)){var i=(mo(e)+"e").split("e");return+((i=(mo(t(i[0]+"e"+(+i[1]+n)))+"e").split("e"))[0]+"e"+(+i[1]-n))}return t(e)}}var Gr=En&&1/on(new En([,-0]))[1]==u?function(e){return new En(e)}:sl;function Hr(e){return function(t){var n=ua(t);return n==_?rn(t):n==C?ln(t):function(e,t){return Tt(t,(function(t){return[t,e[t]]}))}(t,e(t))}}function qr(e,t,n,s,u,h,d,p){var f=2&t;if(!f&&"function"!=typeof e)throw new Le(a);var g=s?s.length:0;if(g||(t&=-97,s=u=r),d=d===r?d:gn(ho(d),0),p=p===r?p:ho(p),g-=u?u.length:0,64&t){var m=s,y=u;s=u=r}var v=f?r:ta(e),w=[e,t,n,s,u,m,y,h,d,p];if(v&&function(e,t){var n=e[1],i=t[1],r=n|i,a=r<131,s=i==c&&8==n||i==c&&256==n&&e[7].length<=t[8]||384==i&&t[7].length<=t[8]&&8==n;if(!a&&!s)return e;1&i&&(e[2]=t[2],r|=1&n?0:4);var l=t[3];if(l){var u=e[3];e[3]=u?Pr(u,l,t[4]):l,e[4]=u?sn(e[3],o):t[4]}(l=t[5])&&(u=e[5],e[5]=u?Er(u,l,t[6]):l,e[6]=u?sn(e[5],o):t[6]),(l=t[7])&&(e[7]=l),i&c&&(e[8]=null==e[8]?t[8]:mn(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=r}(w,v),e=w[0],t=w[1],n=w[2],s=w[3],u=w[4],!(p=w[9]=w[9]===r?f?0:e.length:gn(w[9]-g,0))&&24&t&&(t&=-25),t&&1!=t)b=8==t||16==t?function(e,t,n){var a=Fr(e);return function s(){for(var o=arguments.length,l=i(o),c=o,u=ia(s);c--;)l[c]=arguments[c];var h=o<3&&l[0]!==u&&l[o-1]!==u?[]:sn(l,u);return(o-=h.length)<n?Wr(e,t,Nr,s.placeholder,r,l,h,r,r,n-o):Pt(this&&this!==ht&&this instanceof s?a:e,this,l)}}(e,t,p):t!=l&&33!=t||u.length?Nr.apply(r,w):function(e,t,n,r){var a=1&t,s=Fr(e);return function t(){for(var o=-1,l=arguments.length,c=-1,u=r.length,h=i(u+l),d=this&&this!==ht&&this instanceof t?s:e;++c<u;)h[c]=r[c];for(;l--;)h[c++]=arguments[++o];return Pt(d,a?n:this,h)}}(e,t,n,s);else var b=function(e,t,n){var i=1&t,r=Fr(e);return function t(){return(this&&this!==ht&&this instanceof t?r:e).apply(i?n:this,arguments)}}(e,t,n);return La((v?Yi:ka)(b,w),e,t)}function Jr(e,t,n,i){return e===r||Bs(e,Te[n])&&!$e.call(i,n)?t:e}function Kr(e,t,n,i,a,s){return Xs(e)&&Xs(t)&&(s.set(t,e),Vi(e,t,r,Kr,s),s.delete(t)),e}function Yr(e){return to(e)?r:e}function Xr(e,t,n,i,a,s){var o=1&n,l=e.length,c=t.length;if(l!=c&&!(o&&c>l))return!1;var u=s.get(e);if(u&&s.get(t))return u==t;var h=-1,d=!0,p=2&n?new Gn:r;for(s.set(e,t),s.set(t,e);++h<l;){var f=e[h],g=t[h];if(i)var m=o?i(g,f,h,t,e,s):i(f,g,h,e,t,s);if(m!==r){if(m)continue;d=!1;break}if(p){if(!Ot(t,(function(e,t){if(!Yt(p,t)&&(f===e||a(f,e,n,i,s)))return p.push(t)}))){d=!1;break}}else if(f!==g&&!a(f,g,n,i,s)){d=!1;break}}return s.delete(e),s.delete(t),d}function Zr(e){return Ca(_a(e,r,Ua),e+"")}function Qr(e){return Si(e,Do,la)}function ea(e){return Si(e,xo,ca)}var ta=Cn?function(e){return Cn.get(e)}:sl;function na(e){for(var t=e.name+"",n=Ln[t],i=$e.call(Ln,t)?n.length:0;i--;){var r=n[i],a=r.func;if(null==a||a==e)return r.name}return t}function ia(e){return($e.call(Bn,"placeholder")?Bn:e).placeholder}function ra(){var e=Bn.iteratee||nl;return e=e===nl?Ai:e,arguments.length?e(arguments[0],arguments[1]):e}function aa(e,t){var n,i,r=e.__data__;return("string"==(i=typeof(n=t))||"number"==i||"symbol"==i||"boolean"==i?"__proto__"!==n:null===n)?r["string"==typeof t?"string":"hash"]:r.map}function sa(e){for(var t=Do(e),n=t.length;n--;){var i=t[n],r=e[i];t[n]=[i,r,ba(r)]}return t}function oa(e,t){var n=function(e,t){return null==e?r:e[t]}(e,t);return Ti(n)?n:r}var la=mt?function(e){return null==e?[]:(e=ke(e),Lt(mt(e),(function(t){return qe.call(e,t)})))}:pl,ca=mt?function(e){for(var t=[];e;)At(t,la(e)),e=Ge(e);return t}:pl,ua=_i;function ha(e,t,n){for(var i=-1,r=(t=gr(t,e)).length,a=!1;++i<r;){var s=$a(t[i]);if(!(a=null!=e&&n(e,s)))break;e=e[s]}return a||++i!=r?a:!!(r=null==e?0:e.length)&&Ys(r)&&fa(s,r)&&(Rs(e)||js(e))}function da(e){return"function"!=typeof e.constructor||wa(e)?{}:Vn(Ge(e))}function pa(e){return Rs(e)||js(e)||!!(Ke&&e&&e[Ke])}function fa(e,t){var n=typeof e;return!!(t=null==t?h:t)&&("number"==n||"symbol"!=n&&ye.test(e))&&e>-1&&e%1==0&&e<t}function ga(e,t,n){if(!Xs(n))return!1;var i=typeof t;return!!("number"==i?Ws(n)&&fa(t,n.length):"string"==i&&t in n)&&Bs(n[t],e)}function ma(e,t){if(Rs(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!ao(e))||Q.test(e)||!Z.test(e)||null!=t&&e in ke(t)}function ya(e){var t=na(e),n=Bn[t];if("function"!=typeof n||!(t in Rn.prototype))return!1;if(e===n)return!0;var i=ta(n);return!!i&&e===i[0]}(Sn&&ua(new Sn(new ArrayBuffer(1)))!=A||_n&&ua(new _n)!=_||Pn&&ua(Pn.resolve())!=k||En&&ua(new En)!=C||kn&&ua(new kn)!=x)&&(ua=function(e){var t=_i(e),n=t==E?e.constructor:r,i=n?Oa(n):"";if(i)switch(i){case Dn:return A;case xn:return _;case Tn:return k;case An:return C;case Fn:return x}return t});var va=Ae?Js:fl;function wa(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Te)}function ba(e){return e==e&&!Xs(e)}function Sa(e,t){return function(n){return null!=n&&n[e]===t&&(t!==r||e in ke(n))}}function _a(e,t,n){return t=gn(t===r?e.length-1:t,0),function(){for(var r=arguments,a=-1,s=gn(r.length-t,0),o=i(s);++a<s;)o[a]=r[t+a];a=-1;for(var l=i(t+1);++a<t;)l[a]=r[a];return l[t]=n(o),Pt(e,this,l)}}function Pa(e,t){return t.length<2?e:bi(e,Qi(t,0,-1))}function Ea(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}var ka=Da(Yi),Ia=dt||function(e,t){return ht.setTimeout(e,t)},Ca=Da(Xi);function La(e,t,n){var i=t+"";return Ca(e,function(e,t){var n=t.length;if(!n)return e;var i=n-1;return t[i]=(n>1?"& ":"")+t[i],t=t.join(n>2?", ":" "),e.replace(se,"{\n/* [wrapped with "+t+"] */\n")}(i,function(e,t){return kt(f,(function(n){var i="_."+n[0];t&n[1]&&!Dt(e,i)&&e.push(i)})),e.sort()}(function(e){var t=e.match(oe);return t?t[1].split(le):[]}(i),n)))}function Da(e){var t=0,n=0;return function(){var i=yn(),a=16-(i-n);if(n=i,a>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(r,arguments)}}function xa(e,t){var n=-1,i=e.length,a=i-1;for(t=t===r?i:t;++n<t;){var s=zi(n,a),o=e[s];e[s]=e[n],e[n]=o}return e.length=t,e}var Ta,Aa,Fa=(Ta=Ts((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(ee,(function(e,n,i,r){t.push(i?r.replace(ue,"$1"):n||e)})),t}),(function(e){return 500===Aa.size&&Aa.clear(),e})),Aa=Ta.cache,Ta);function $a(e){if("string"==typeof e||ao(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function Oa(e){if(null!=e){try{return Fe.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function Na(e){if(e instanceof Rn)return e.clone();var t=new jn(e.__wrapped__,e.__chain__);return t.__actions__=kr(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var Ba=Hi((function(e,t){return zs(e)?li(e,fi(t,1,zs,!0)):[]})),Va=Hi((function(e,t){var n=qa(t);return zs(n)&&(n=r),zs(e)?li(e,fi(t,1,zs,!0),ra(n,2)):[]})),Ma=Hi((function(e,t){var n=qa(t);return zs(n)&&(n=r),zs(e)?li(e,fi(t,1,zs,!0),r,n):[]}));function ja(e,t,n){var i=null==e?0:e.length;if(!i)return-1;var r=null==n?0:ho(n);return r<0&&(r=gn(i+r,0)),Vt(e,ra(t,3),r)}function Ra(e,t,n){var i=null==e?0:e.length;if(!i)return-1;var a=i-1;return n!==r&&(a=ho(n),a=n<0?gn(i+a,0):mn(a,i-1)),Vt(e,ra(t,3),a,!0)}function Ua(e){return null!=e&&e.length?fi(e,1):[]}function Wa(e){return e&&e.length?e[0]:r}var za=Hi((function(e){var t=Tt(e,pr);return t.length&&t[0]===e[0]?Ii(t):[]})),Ga=Hi((function(e){var t=qa(e),n=Tt(e,pr);return t===qa(n)?t=r:n.pop(),n.length&&n[0]===e[0]?Ii(n,ra(t,2)):[]})),Ha=Hi((function(e){var t=qa(e),n=Tt(e,pr);return(t="function"==typeof t?t:r)&&n.pop(),n.length&&n[0]===e[0]?Ii(n,r,t):[]}));function qa(e){var t=null==e?0:e.length;return t?e[t-1]:r}var Ja=Hi(Ka);function Ka(e,t){return e&&e.length&&t&&t.length?Ui(e,t):e}var Ya=Zr((function(e,t){var n=null==e?0:e.length,i=ii(e,t);return Wi(e,Tt(t,(function(e){return fa(e,n)?+e:e})).sort(_r)),i}));function Xa(e){return null==e?e:bn.call(e)}var Za=Hi((function(e){return sr(fi(e,1,zs,!0))})),Qa=Hi((function(e){var t=qa(e);return zs(t)&&(t=r),sr(fi(e,1,zs,!0),ra(t,2))})),es=Hi((function(e){var t=qa(e);return t="function"==typeof t?t:r,sr(fi(e,1,zs,!0),r,t)}));function ts(e){if(!e||!e.length)return[];var t=0;return e=Lt(e,(function(e){if(zs(e))return t=gn(e.length,t),!0})),qt(t,(function(t){return Tt(e,Wt(t))}))}function ns(e,t){if(!e||!e.length)return[];var n=ts(e);return null==t?n:Tt(n,(function(e){return Pt(t,r,e)}))}var is=Hi((function(e,t){return zs(e)?li(e,t):[]})),rs=Hi((function(e){return hr(Lt(e,zs))})),as=Hi((function(e){var t=qa(e);return zs(t)&&(t=r),hr(Lt(e,zs),ra(t,2))})),ss=Hi((function(e){var t=qa(e);return t="function"==typeof t?t:r,hr(Lt(e,zs),r,t)})),os=Hi(ts),ls=Hi((function(e){var t=e.length,n=t>1?e[t-1]:r;return n="function"==typeof n?(e.pop(),n):r,ns(e,n)}));function cs(e){var t=Bn(e);return t.__chain__=!0,t}function us(e,t){return t(e)}var hs=Zr((function(e){var t=e.length,n=t?e[0]:0,i=this.__wrapped__,a=function(t){return ii(t,e)};return!(t>1||this.__actions__.length)&&i instanceof Rn&&fa(n)?((i=i.slice(n,+n+(t?1:0))).__actions__.push({func:us,args:[a],thisArg:r}),new jn(i,this.__chain__).thru((function(e){return t&&!e.length&&e.push(r),e}))):this.thru(a)})),ds=Cr((function(e,t,n){$e.call(e,n)?++e[n]:ni(e,n,1)})),ps=$r(ja),fs=$r(Ra);function gs(e,t){return(Rs(e)?kt:ci)(e,ra(t,3))}function ms(e,t){return(Rs(e)?It:ui)(e,ra(t,3))}var ys=Cr((function(e,t,n){$e.call(e,n)?e[n].push(t):ni(e,n,[t])})),vs=Hi((function(e,t,n){var r=-1,a="function"==typeof t,s=Ws(e)?i(e.length):[];return ci(e,(function(e){s[++r]=a?Pt(t,e,n):Ci(e,t,n)})),s})),ws=Cr((function(e,t,n){ni(e,n,t)}));function bs(e,t){return(Rs(e)?Tt:Oi)(e,ra(t,3))}var Ss=Cr((function(e,t,n){e[n?0:1].push(t)}),(function(){return[[],[]]})),_s=Hi((function(e,t){if(null==e)return[];var n=t.length;return n>1&&ga(e,t[0],t[1])?t=[]:n>2&&ga(t[0],t[1],t[2])&&(t=[t[0]]),ji(e,fi(t,1),[])})),Ps=ut||function(){return ht.Date.now()};function Es(e,t,n){return t=n?r:t,t=e&&null==t?e.length:t,qr(e,c,r,r,r,r,t)}function ks(e,t){var n;if("function"!=typeof t)throw new Le(a);return e=ho(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=r),n}}var Is=Hi((function(e,t,n){var i=1;if(n.length){var r=sn(n,ia(Is));i|=l}return qr(e,i,t,n,r)})),Cs=Hi((function(e,t,n){var i=3;if(n.length){var r=sn(n,ia(Cs));i|=l}return qr(t,i,e,n,r)}));function Ls(e,t,n){var i,s,o,l,c,u,h=0,d=!1,p=!1,f=!0;if("function"!=typeof e)throw new Le(a);function g(t){var n=i,a=s;return i=s=r,h=t,l=e.apply(a,n)}function m(e){var n=e-u;return u===r||n>=t||n<0||p&&e-h>=o}function y(){var e=Ps();if(m(e))return v(e);c=Ia(y,function(e){var n=t-(e-u);return p?mn(n,o-(e-h)):n}(e))}function v(e){return c=r,f&&i?g(e):(i=s=r,l)}function w(){var e=Ps(),n=m(e);if(i=arguments,s=this,u=e,n){if(c===r)return function(e){return h=e,c=Ia(y,t),d?g(e):l}(u);if(p)return vr(c),c=Ia(y,t),g(u)}return c===r&&(c=Ia(y,t)),l}return t=fo(t)||0,Xs(n)&&(d=!!n.leading,o=(p="maxWait"in n)?gn(fo(n.maxWait)||0,t):o,f="trailing"in n?!!n.trailing:f),w.cancel=function(){c!==r&&vr(c),h=0,i=u=s=c=r},w.flush=function(){return c===r?l:v(Ps())},w}var Ds=Hi((function(e,t){return oi(e,1,t)})),xs=Hi((function(e,t,n){return oi(e,fo(t)||0,n)}));function Ts(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new Le(a);var n=function(){var i=arguments,r=t?t.apply(this,i):i[0],a=n.cache;if(a.has(r))return a.get(r);var s=e.apply(this,i);return n.cache=a.set(r,s)||a,s};return n.cache=new(Ts.Cache||zn),n}function As(e){if("function"!=typeof e)throw new Le(a);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}Ts.Cache=zn;var Fs=mr((function(e,t){var n=(t=1==t.length&&Rs(t[0])?Tt(t[0],Jt(ra())):Tt(fi(t,1),Jt(ra()))).length;return Hi((function(i){for(var r=-1,a=mn(i.length,n);++r<a;)i[r]=t[r].call(this,i[r]);return Pt(e,this,i)}))})),$s=Hi((function(e,t){var n=sn(t,ia($s));return qr(e,l,r,t,n)})),Os=Hi((function(e,t){var n=sn(t,ia(Os));return qr(e,64,r,t,n)})),Ns=Zr((function(e,t){return qr(e,256,r,r,r,t)}));function Bs(e,t){return e===t||e!=e&&t!=t}var Vs=Ur(Pi),Ms=Ur((function(e,t){return e>=t})),js=Li(function(){return arguments}())?Li:function(e){return Zs(e)&&$e.call(e,"callee")&&!qe.call(e,"callee")},Rs=i.isArray,Us=yt?Jt(yt):function(e){return Zs(e)&&_i(e)==T};function Ws(e){return null!=e&&Ys(e.length)&&!Js(e)}function zs(e){return Zs(e)&&Ws(e)}var Gs=Nt||fl,Hs=vt?Jt(vt):function(e){return Zs(e)&&_i(e)==v};function qs(e){if(!Zs(e))return!1;var t=_i(e);return t==w||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!to(e)}function Js(e){if(!Xs(e))return!1;var t=_i(e);return t==b||t==S||"[object AsyncFunction]"==t||"[object Proxy]"==t}function Ks(e){return"number"==typeof e&&e==ho(e)}function Ys(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=h}function Xs(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function Zs(e){return null!=e&&"object"==typeof e}var Qs=wt?Jt(wt):function(e){return Zs(e)&&ua(e)==_};function eo(e){return"number"==typeof e||Zs(e)&&_i(e)==P}function to(e){if(!Zs(e)||_i(e)!=E)return!1;var t=Ge(e);if(null===t)return!0;var n=$e.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&Fe.call(n)==Ve}var no=bt?Jt(bt):function(e){return Zs(e)&&_i(e)==I},io=St?Jt(St):function(e){return Zs(e)&&ua(e)==C};function ro(e){return"string"==typeof e||!Rs(e)&&Zs(e)&&_i(e)==L}function ao(e){return"symbol"==typeof e||Zs(e)&&_i(e)==D}var so=_t?Jt(_t):function(e){return Zs(e)&&Ys(e.length)&&!!rt[_i(e)]},oo=Ur($i),lo=Ur((function(e,t){return e<=t}));function co(e){if(!e)return[];if(Ws(e))return ro(e)?un(e):kr(e);if(Ze&&e[Ze])return function(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}(e[Ze]());var t=ua(e);return(t==_?rn:t==C?on:Vo)(e)}function uo(e){return e?(e=fo(e))===u||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}function ho(e){var t=uo(e),n=t%1;return t==t?n?t-n:t:0}function po(e){return e?ri(ho(e),0,p):0}function fo(e){if("number"==typeof e)return e;if(ao(e))return d;if(Xs(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=Xs(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(ie,"");var n=fe.test(e);return n||me.test(e)?lt(e.slice(2),n?2:8):pe.test(e)?d:+e}function go(e){return Ir(e,xo(e))}function mo(e){return null==e?"":ar(e)}var yo=Lr((function(e,t){if(wa(t)||Ws(t))Ir(t,Do(t),e);else for(var n in t)$e.call(t,n)&&Zn(e,n,t[n])})),vo=Lr((function(e,t){Ir(t,xo(t),e)})),wo=Lr((function(e,t,n,i){Ir(t,xo(t),e,i)})),bo=Lr((function(e,t,n,i){Ir(t,Do(t),e,i)})),So=Zr(ii),_o=Hi((function(e,t){e=ke(e);var n=-1,i=t.length,a=i>2?t[2]:r;for(a&&ga(t[0],t[1],a)&&(i=1);++n<i;)for(var s=t[n],o=xo(s),l=-1,c=o.length;++l<c;){var u=o[l],h=e[u];(h===r||Bs(h,Te[u])&&!$e.call(e,u))&&(e[u]=s[u])}return e})),Po=Hi((function(e){return e.push(r,Kr),Pt(Ao,r,e)}));function Eo(e,t,n){var i=null==e?r:bi(e,t);return i===r?n:i}function ko(e,t){return null!=e&&ha(e,t,ki)}var Io=Br((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=Be.call(t)),e[t]=n}),Zo(tl)),Co=Br((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=Be.call(t)),$e.call(e,t)?e[t].push(n):e[t]=[n]}),ra),Lo=Hi(Ci);function Do(e){return Ws(e)?qn(e):Fi(e)}function xo(e){return Ws(e)?qn(e,!0):function(e){if(!Xs(e))return function(e){var t=[];if(null!=e)for(var n in ke(e))t.push(n);return t}(e);var t=wa(e),n=[];for(var i in e)("constructor"!=i||!t&&$e.call(e,i))&&n.push(i);return n}(e)}var To=Lr((function(e,t,n){Vi(e,t,n)})),Ao=Lr((function(e,t,n,i){Vi(e,t,n,i)})),Fo=Zr((function(e,t){var n={};if(null==e)return n;var i=!1;t=Tt(t,(function(t){return t=gr(t,e),i||(i=t.length>1),t})),Ir(e,ea(e),n),i&&(n=ai(n,7,Yr));for(var r=t.length;r--;)or(n,t[r]);return n})),$o=Zr((function(e,t){return null==e?{}:function(e,t){return Ri(e,t,(function(t,n){return ko(e,n)}))}(e,t)}));function Oo(e,t){if(null==e)return{};var n=Tt(ea(e),(function(e){return[e]}));return t=ra(t),Ri(e,n,(function(e,n){return t(e,n[0])}))}var No=Hr(Do),Bo=Hr(xo);function Vo(e){return null==e?[]:Kt(e,Do(e))}var Mo=Ar((function(e,t,n){return t=t.toLowerCase(),e+(n?jo(t):t)}));function jo(e){return Jo(mo(e).toLowerCase())}function Ro(e){return(e=mo(e))&&e.replace(ve,Qt).replace(Xe,"")}var Uo=Ar((function(e,t,n){return e+(n?"-":"")+t.toLowerCase()})),Wo=Ar((function(e,t,n){return e+(n?" ":"")+t.toLowerCase()})),zo=Tr("toLowerCase"),Go=Ar((function(e,t,n){return e+(n?"_":"")+t.toLowerCase()})),Ho=Ar((function(e,t,n){return e+(n?" ":"")+Jo(t)})),qo=Ar((function(e,t,n){return e+(n?" ":"")+t.toUpperCase()})),Jo=Tr("toUpperCase");function Ko(e,t,n){return e=mo(e),(t=n?r:t)===r?function(e){return tt.test(e)}(e)?function(e){return e.match(Qe)||[]}(e):function(e){return e.match(ce)||[]}(e):e.match(t)||[]}var Yo=Hi((function(e,t){try{return Pt(e,r,t)}catch(e){return qs(e)?e:new _e(e)}})),Xo=Zr((function(e,t){return kt(t,(function(t){t=$a(t),ni(e,t,Is(e[t],e))})),e}));function Zo(e){return function(){return e}}var Qo=Or(),el=Or(!0);function tl(e){return e}function nl(e){return Ai("function"==typeof e?e:ai(e,1))}var il=Hi((function(e,t){return function(n){return Ci(n,e,t)}})),rl=Hi((function(e,t){return function(n){return Ci(e,n,t)}}));function al(e,t,n){var i=Do(t),r=wi(t,i);null!=n||Xs(t)&&(r.length||!i.length)||(n=t,t=e,e=this,r=wi(t,Do(t)));var a=!(Xs(n)&&"chain"in n&&!n.chain),s=Js(e);return kt(r,(function(n){var i=t[n];e[n]=i,s&&(e.prototype[n]=function(){var t=this.__chain__;if(a||t){var n=e(this.__wrapped__);return(n.__actions__=kr(this.__actions__)).push({func:i,args:arguments,thisArg:e}),n.__chain__=t,n}return i.apply(e,At([this.value()],arguments))})})),e}function sl(){}var ol=Mr(Tt),ll=Mr(Ct),cl=Mr(Ot);function ul(e){return ma(e)?Wt($a(e)):function(e){return function(t){return bi(t,e)}}(e)}var hl=Rr(),dl=Rr(!0);function pl(){return[]}function fl(){return!1}var gl,ml=Vr((function(e,t){return e+t}),0),yl=zr("ceil"),vl=Vr((function(e,t){return e/t}),1),wl=zr("floor"),bl=Vr((function(e,t){return e*t}),1),Sl=zr("round"),_l=Vr((function(e,t){return e-t}),0);return Bn.after=function(e,t){if("function"!=typeof t)throw new Le(a);return e=ho(e),function(){if(--e<1)return t.apply(this,arguments)}},Bn.ary=Es,Bn.assign=yo,Bn.assignIn=vo,Bn.assignInWith=wo,Bn.assignWith=bo,Bn.at=So,Bn.before=ks,Bn.bind=Is,Bn.bindAll=Xo,Bn.bindKey=Cs,Bn.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return Rs(e)?e:[e]},Bn.chain=cs,Bn.chunk=function(e,t,n){t=(n?ga(e,t,n):t===r)?1:gn(ho(t),0);var a=null==e?0:e.length;if(!a||t<1)return[];for(var s=0,o=0,l=i(pt(a/t));s<a;)l[o++]=Qi(e,s,s+=t);return l},Bn.compact=function(e){for(var t=-1,n=null==e?0:e.length,i=0,r=[];++t<n;){var a=e[t];a&&(r[i++]=a)}return r},Bn.concat=function(){var e=arguments.length;if(!e)return[];for(var t=i(e-1),n=arguments[0],r=e;r--;)t[r-1]=arguments[r];return At(Rs(n)?kr(n):[n],fi(t,1))},Bn.cond=function(e){var t=null==e?0:e.length,n=ra();return e=t?Tt(e,(function(e){if("function"!=typeof e[1])throw new Le(a);return[n(e[0]),e[1]]})):[],Hi((function(n){for(var i=-1;++i<t;){var r=e[i];if(Pt(r[0],this,n))return Pt(r[1],this,n)}}))},Bn.conforms=function(e){return function(e){var t=Do(e);return function(n){return si(n,e,t)}}(ai(e,1))},Bn.constant=Zo,Bn.countBy=ds,Bn.create=function(e,t){var n=Vn(e);return null==t?n:ti(n,t)},Bn.curry=function e(t,n,i){var a=qr(t,8,r,r,r,r,r,n=i?r:n);return a.placeholder=e.placeholder,a},Bn.curryRight=function e(t,n,i){var a=qr(t,16,r,r,r,r,r,n=i?r:n);return a.placeholder=e.placeholder,a},Bn.debounce=Ls,Bn.defaults=_o,Bn.defaultsDeep=Po,Bn.defer=Ds,Bn.delay=xs,Bn.difference=Ba,Bn.differenceBy=Va,Bn.differenceWith=Ma,Bn.drop=function(e,t,n){var i=null==e?0:e.length;return i?Qi(e,(t=n||t===r?1:ho(t))<0?0:t,i):[]},Bn.dropRight=function(e,t,n){var i=null==e?0:e.length;return i?Qi(e,0,(t=i-(t=n||t===r?1:ho(t)))<0?0:t):[]},Bn.dropRightWhile=function(e,t){return e&&e.length?cr(e,ra(t,3),!0,!0):[]},Bn.dropWhile=function(e,t){return e&&e.length?cr(e,ra(t,3),!0):[]},Bn.fill=function(e,t,n,i){var a=null==e?0:e.length;return a?(n&&"number"!=typeof n&&ga(e,t,n)&&(n=0,i=a),function(e,t,n,i){var a=e.length;for((n=ho(n))<0&&(n=-n>a?0:a+n),(i=i===r||i>a?a:ho(i))<0&&(i+=a),i=n>i?0:po(i);n<i;)e[n++]=t;return e}(e,t,n,i)):[]},Bn.filter=function(e,t){return(Rs(e)?Lt:pi)(e,ra(t,3))},Bn.flatMap=function(e,t){return fi(bs(e,t),1)},Bn.flatMapDeep=function(e,t){return fi(bs(e,t),u)},Bn.flatMapDepth=function(e,t,n){return n=n===r?1:ho(n),fi(bs(e,t),n)},Bn.flatten=Ua,Bn.flattenDeep=function(e){return null!=e&&e.length?fi(e,u):[]},Bn.flattenDepth=function(e,t){return null!=e&&e.length?fi(e,t=t===r?1:ho(t)):[]},Bn.flip=function(e){return qr(e,512)},Bn.flow=Qo,Bn.flowRight=el,Bn.fromPairs=function(e){for(var t=-1,n=null==e?0:e.length,i={};++t<n;){var r=e[t];i[r[0]]=r[1]}return i},Bn.functions=function(e){return null==e?[]:wi(e,Do(e))},Bn.functionsIn=function(e){return null==e?[]:wi(e,xo(e))},Bn.groupBy=ys,Bn.initial=function(e){return null!=e&&e.length?Qi(e,0,-1):[]},Bn.intersection=za,Bn.intersectionBy=Ga,Bn.intersectionWith=Ha,Bn.invert=Io,Bn.invertBy=Co,Bn.invokeMap=vs,Bn.iteratee=nl,Bn.keyBy=ws,Bn.keys=Do,Bn.keysIn=xo,Bn.map=bs,Bn.mapKeys=function(e,t){var n={};return t=ra(t,3),yi(e,(function(e,i,r){ni(n,t(e,i,r),e)})),n},Bn.mapValues=function(e,t){var n={};return t=ra(t,3),yi(e,(function(e,i,r){ni(n,i,t(e,i,r))})),n},Bn.matches=function(e){return Ni(ai(e,1))},Bn.matchesProperty=function(e,t){return Bi(e,ai(t,1))},Bn.memoize=Ts,Bn.merge=To,Bn.mergeWith=Ao,Bn.method=il,Bn.methodOf=rl,Bn.mixin=al,Bn.negate=As,Bn.nthArg=function(e){return e=ho(e),Hi((function(t){return Mi(t,e)}))},Bn.omit=Fo,Bn.omitBy=function(e,t){return Oo(e,As(ra(t)))},Bn.once=function(e){return ks(2,e)},Bn.orderBy=function(e,t,n,i){return null==e?[]:(Rs(t)||(t=null==t?[]:[t]),Rs(n=i?r:n)||(n=null==n?[]:[n]),ji(e,t,n))},Bn.over=ol,Bn.overArgs=Fs,Bn.overEvery=ll,Bn.overSome=cl,Bn.partial=$s,Bn.partialRight=Os,Bn.partition=Ss,Bn.pick=$o,Bn.pickBy=Oo,Bn.property=ul,Bn.propertyOf=function(e){return function(t){return null==e?r:bi(e,t)}},Bn.pull=Ja,Bn.pullAll=Ka,Bn.pullAllBy=function(e,t,n){return e&&e.length&&t&&t.length?Ui(e,t,ra(n,2)):e},Bn.pullAllWith=function(e,t,n){return e&&e.length&&t&&t.length?Ui(e,t,r,n):e},Bn.pullAt=Ya,Bn.range=hl,Bn.rangeRight=dl,Bn.rearg=Ns,Bn.reject=function(e,t){return(Rs(e)?Lt:pi)(e,As(ra(t,3)))},Bn.remove=function(e,t){var n=[];if(!e||!e.length)return n;var i=-1,r=[],a=e.length;for(t=ra(t,3);++i<a;){var s=e[i];t(s,i,e)&&(n.push(s),r.push(i))}return Wi(e,r),n},Bn.rest=function(e,t){if("function"!=typeof e)throw new Le(a);return Hi(e,t=t===r?t:ho(t))},Bn.reverse=Xa,Bn.sampleSize=function(e,t,n){return t=(n?ga(e,t,n):t===r)?1:ho(t),(Rs(e)?Kn:Ji)(e,t)},Bn.set=function(e,t,n){return null==e?e:Ki(e,t,n)},Bn.setWith=function(e,t,n,i){return i="function"==typeof i?i:r,null==e?e:Ki(e,t,n,i)},Bn.shuffle=function(e){return(Rs(e)?Yn:Zi)(e)},Bn.slice=function(e,t,n){var i=null==e?0:e.length;return i?(n&&"number"!=typeof n&&ga(e,t,n)?(t=0,n=i):(t=null==t?0:ho(t),n=n===r?i:ho(n)),Qi(e,t,n)):[]},Bn.sortBy=_s,Bn.sortedUniq=function(e){return e&&e.length?ir(e):[]},Bn.sortedUniqBy=function(e,t){return e&&e.length?ir(e,ra(t,2)):[]},Bn.split=function(e,t,n){return n&&"number"!=typeof n&&ga(e,t,n)&&(t=n=r),(n=n===r?p:n>>>0)?(e=mo(e))&&("string"==typeof t||null!=t&&!no(t))&&!(t=ar(t))&&nn(e)?yr(un(e),0,n):e.split(t,n):[]},Bn.spread=function(e,t){if("function"!=typeof e)throw new Le(a);return t=null==t?0:gn(ho(t),0),Hi((function(n){var i=n[t],r=yr(n,0,t);return i&&At(r,i),Pt(e,this,r)}))},Bn.tail=function(e){var t=null==e?0:e.length;return t?Qi(e,1,t):[]},Bn.take=function(e,t,n){return e&&e.length?Qi(e,0,(t=n||t===r?1:ho(t))<0?0:t):[]},Bn.takeRight=function(e,t,n){var i=null==e?0:e.length;return i?Qi(e,(t=i-(t=n||t===r?1:ho(t)))<0?0:t,i):[]},Bn.takeRightWhile=function(e,t){return e&&e.length?cr(e,ra(t,3),!1,!0):[]},Bn.takeWhile=function(e,t){return e&&e.length?cr(e,ra(t,3)):[]},Bn.tap=function(e,t){return t(e),e},Bn.throttle=function(e,t,n){var i=!0,r=!0;if("function"!=typeof e)throw new Le(a);return Xs(n)&&(i="leading"in n?!!n.leading:i,r="trailing"in n?!!n.trailing:r),Ls(e,t,{leading:i,maxWait:t,trailing:r})},Bn.thru=us,Bn.toArray=co,Bn.toPairs=No,Bn.toPairsIn=Bo,Bn.toPath=function(e){return Rs(e)?Tt(e,$a):ao(e)?[e]:kr(Fa(mo(e)))},Bn.toPlainObject=go,Bn.transform=function(e,t,n){var i=Rs(e),r=i||Gs(e)||so(e);if(t=ra(t,4),null==n){var a=e&&e.constructor;n=r?i?new a:[]:Xs(e)&&Js(a)?Vn(Ge(e)):{}}return(r?kt:yi)(e,(function(e,i,r){return t(n,e,i,r)})),n},Bn.unary=function(e){return Es(e,1)},Bn.union=Za,Bn.unionBy=Qa,Bn.unionWith=es,Bn.uniq=function(e){return e&&e.length?sr(e):[]},Bn.uniqBy=function(e,t){return e&&e.length?sr(e,ra(t,2)):[]},Bn.uniqWith=function(e,t){return t="function"==typeof t?t:r,e&&e.length?sr(e,r,t):[]},Bn.unset=function(e,t){return null==e||or(e,t)},Bn.unzip=ts,Bn.unzipWith=ns,Bn.update=function(e,t,n){return null==e?e:lr(e,t,fr(n))},Bn.updateWith=function(e,t,n,i){return i="function"==typeof i?i:r,null==e?e:lr(e,t,fr(n),i)},Bn.values=Vo,Bn.valuesIn=function(e){return null==e?[]:Kt(e,xo(e))},Bn.without=is,Bn.words=Ko,Bn.wrap=function(e,t){return $s(fr(t),e)},Bn.xor=rs,Bn.xorBy=as,Bn.xorWith=ss,Bn.zip=os,Bn.zipObject=function(e,t){return dr(e||[],t||[],Zn)},Bn.zipObjectDeep=function(e,t){return dr(e||[],t||[],Ki)},Bn.zipWith=ls,Bn.entries=No,Bn.entriesIn=Bo,Bn.extend=vo,Bn.extendWith=wo,al(Bn,Bn),Bn.add=ml,Bn.attempt=Yo,Bn.camelCase=Mo,Bn.capitalize=jo,Bn.ceil=yl,Bn.clamp=function(e,t,n){return n===r&&(n=t,t=r),n!==r&&(n=(n=fo(n))==n?n:0),t!==r&&(t=(t=fo(t))==t?t:0),ri(fo(e),t,n)},Bn.clone=function(e){return ai(e,4)},Bn.cloneDeep=function(e){return ai(e,5)},Bn.cloneDeepWith=function(e,t){return ai(e,5,t="function"==typeof t?t:r)},Bn.cloneWith=function(e,t){return ai(e,4,t="function"==typeof t?t:r)},Bn.conformsTo=function(e,t){return null==t||si(e,t,Do(t))},Bn.deburr=Ro,Bn.defaultTo=function(e,t){return null==e||e!=e?t:e},Bn.divide=vl,Bn.endsWith=function(e,t,n){e=mo(e),t=ar(t);var i=e.length,a=n=n===r?i:ri(ho(n),0,i);return(n-=t.length)>=0&&e.slice(n,a)==t},Bn.eq=Bs,Bn.escape=function(e){return(e=mo(e))&&J.test(e)?e.replace(H,en):e},Bn.escapeRegExp=function(e){return(e=mo(e))&&ne.test(e)?e.replace(te,"\\$&"):e},Bn.every=function(e,t,n){var i=Rs(e)?Ct:hi;return n&&ga(e,t,n)&&(t=r),i(e,ra(t,3))},Bn.find=ps,Bn.findIndex=ja,Bn.findKey=function(e,t){return Bt(e,ra(t,3),yi)},Bn.findLast=fs,Bn.findLastIndex=Ra,Bn.findLastKey=function(e,t){return Bt(e,ra(t,3),vi)},Bn.floor=wl,Bn.forEach=gs,Bn.forEachRight=ms,Bn.forIn=function(e,t){return null==e?e:gi(e,ra(t,3),xo)},Bn.forInRight=function(e,t){return null==e?e:mi(e,ra(t,3),xo)},Bn.forOwn=function(e,t){return e&&yi(e,ra(t,3))},Bn.forOwnRight=function(e,t){return e&&vi(e,ra(t,3))},Bn.get=Eo,Bn.gt=Vs,Bn.gte=Ms,Bn.has=function(e,t){return null!=e&&ha(e,t,Ei)},Bn.hasIn=ko,Bn.head=Wa,Bn.identity=tl,Bn.includes=function(e,t,n,i){e=Ws(e)?e:Vo(e),n=n&&!i?ho(n):0;var r=e.length;return n<0&&(n=gn(r+n,0)),ro(e)?n<=r&&e.indexOf(t,n)>-1:!!r&&Mt(e,t,n)>-1},Bn.indexOf=function(e,t,n){var i=null==e?0:e.length;if(!i)return-1;var r=null==n?0:ho(n);return r<0&&(r=gn(i+r,0)),Mt(e,t,r)},Bn.inRange=function(e,t,n){return t=uo(t),n===r?(n=t,t=0):n=uo(n),function(e,t,n){return e>=mn(t,n)&&e<gn(t,n)}(e=fo(e),t,n)},Bn.invoke=Lo,Bn.isArguments=js,Bn.isArray=Rs,Bn.isArrayBuffer=Us,Bn.isArrayLike=Ws,Bn.isArrayLikeObject=zs,Bn.isBoolean=function(e){return!0===e||!1===e||Zs(e)&&_i(e)==y},Bn.isBuffer=Gs,Bn.isDate=Hs,Bn.isElement=function(e){return Zs(e)&&1===e.nodeType&&!to(e)},Bn.isEmpty=function(e){if(null==e)return!0;if(Ws(e)&&(Rs(e)||"string"==typeof e||"function"==typeof e.splice||Gs(e)||so(e)||js(e)))return!e.length;var t=ua(e);if(t==_||t==C)return!e.size;if(wa(e))return!Fi(e).length;for(var n in e)if($e.call(e,n))return!1;return!0},Bn.isEqual=function(e,t){return Di(e,t)},Bn.isEqualWith=function(e,t,n){var i=(n="function"==typeof n?n:r)?n(e,t):r;return i===r?Di(e,t,r,n):!!i},Bn.isError=qs,Bn.isFinite=function(e){return"number"==typeof e&&zt(e)},Bn.isFunction=Js,Bn.isInteger=Ks,Bn.isLength=Ys,Bn.isMap=Qs,Bn.isMatch=function(e,t){return e===t||xi(e,t,sa(t))},Bn.isMatchWith=function(e,t,n){return n="function"==typeof n?n:r,xi(e,t,sa(t),n)},Bn.isNaN=function(e){return eo(e)&&e!=+e},Bn.isNative=function(e){if(va(e))throw new _e("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Ti(e)},Bn.isNil=function(e){return null==e},Bn.isNull=function(e){return null===e},Bn.isNumber=eo,Bn.isObject=Xs,Bn.isObjectLike=Zs,Bn.isPlainObject=to,Bn.isRegExp=no,Bn.isSafeInteger=function(e){return Ks(e)&&e>=-9007199254740991&&e<=h},Bn.isSet=io,Bn.isString=ro,Bn.isSymbol=ao,Bn.isTypedArray=so,Bn.isUndefined=function(e){return e===r},Bn.isWeakMap=function(e){return Zs(e)&&ua(e)==x},Bn.isWeakSet=function(e){return Zs(e)&&"[object WeakSet]"==_i(e)},Bn.join=function(e,t){return null==e?"":pn.call(e,t)},Bn.kebabCase=Uo,Bn.last=qa,Bn.lastIndexOf=function(e,t,n){var i=null==e?0:e.length;if(!i)return-1;var a=i;return n!==r&&(a=(a=ho(n))<0?gn(i+a,0):mn(a,i-1)),t==t?function(e,t,n){for(var i=n+1;i--;)if(e[i]===t)return i;return i}(e,t,a):Vt(e,Rt,a,!0)},Bn.lowerCase=Wo,Bn.lowerFirst=zo,Bn.lt=oo,Bn.lte=lo,Bn.max=function(e){return e&&e.length?di(e,tl,Pi):r},Bn.maxBy=function(e,t){return e&&e.length?di(e,ra(t,2),Pi):r},Bn.mean=function(e){return Ut(e,tl)},Bn.meanBy=function(e,t){return Ut(e,ra(t,2))},Bn.min=function(e){return e&&e.length?di(e,tl,$i):r},Bn.minBy=function(e,t){return e&&e.length?di(e,ra(t,2),$i):r},Bn.stubArray=pl,Bn.stubFalse=fl,Bn.stubObject=function(){return{}},Bn.stubString=function(){return""},Bn.stubTrue=function(){return!0},Bn.multiply=bl,Bn.nth=function(e,t){return e&&e.length?Mi(e,ho(t)):r},Bn.noConflict=function(){return ht._===this&&(ht._=Me),this},Bn.noop=sl,Bn.now=Ps,Bn.pad=function(e,t,n){e=mo(e);var i=(t=ho(t))?cn(e):0;if(!t||i>=t)return e;var r=(t-i)/2;return jr(gt(r),n)+e+jr(pt(r),n)},Bn.padEnd=function(e,t,n){e=mo(e);var i=(t=ho(t))?cn(e):0;return t&&i<t?e+jr(t-i,n):e},Bn.padStart=function(e,t,n){e=mo(e);var i=(t=ho(t))?cn(e):0;return t&&i<t?jr(t-i,n)+e:e},Bn.parseInt=function(e,t,n){return n||null==t?t=0:t&&(t=+t),vn(mo(e).replace(re,""),t||0)},Bn.random=function(e,t,n){if(n&&"boolean"!=typeof n&&ga(e,t,n)&&(t=n=r),n===r&&("boolean"==typeof t?(n=t,t=r):"boolean"==typeof e&&(n=e,e=r)),e===r&&t===r?(e=0,t=1):(e=uo(e),t===r?(t=e,e=0):t=uo(t)),e>t){var i=e;e=t,t=i}if(n||e%1||t%1){var a=wn();return mn(e+a*(t-e+ot("1e-"+((a+"").length-1))),t)}return zi(e,t)},Bn.reduce=function(e,t,n){var i=Rs(e)?Ft:Gt,r=arguments.length<3;return i(e,ra(t,4),n,r,ci)},Bn.reduceRight=function(e,t,n){var i=Rs(e)?$t:Gt,r=arguments.length<3;return i(e,ra(t,4),n,r,ui)},Bn.repeat=function(e,t,n){return t=(n?ga(e,t,n):t===r)?1:ho(t),Gi(mo(e),t)},Bn.replace=function(){var e=arguments,t=mo(e[0]);return e.length<3?t:t.replace(e[1],e[2])},Bn.result=function(e,t,n){var i=-1,a=(t=gr(t,e)).length;for(a||(a=1,e=r);++i<a;){var s=null==e?r:e[$a(t[i])];s===r&&(i=a,s=n),e=Js(s)?s.call(e):s}return e},Bn.round=Sl,Bn.runInContext=e,Bn.sample=function(e){return(Rs(e)?Jn:qi)(e)},Bn.size=function(e){if(null==e)return 0;if(Ws(e))return ro(e)?cn(e):e.length;var t=ua(e);return t==_||t==C?e.size:Fi(e).length},Bn.snakeCase=Go,Bn.some=function(e,t,n){var i=Rs(e)?Ot:er;return n&&ga(e,t,n)&&(t=r),i(e,ra(t,3))},Bn.sortedIndex=function(e,t){return tr(e,t)},Bn.sortedIndexBy=function(e,t,n){return nr(e,t,ra(n,2))},Bn.sortedIndexOf=function(e,t){var n=null==e?0:e.length;if(n){var i=tr(e,t);if(i<n&&Bs(e[i],t))return i}return-1},Bn.sortedLastIndex=function(e,t){return tr(e,t,!0)},Bn.sortedLastIndexBy=function(e,t,n){return nr(e,t,ra(n,2),!0)},Bn.sortedLastIndexOf=function(e,t){if(null!=e&&e.length){var n=tr(e,t,!0)-1;if(Bs(e[n],t))return n}return-1},Bn.startCase=Ho,Bn.startsWith=function(e,t,n){return e=mo(e),n=null==n?0:ri(ho(n),0,e.length),t=ar(t),e.slice(n,n+t.length)==t},Bn.subtract=_l,Bn.sum=function(e){return e&&e.length?Ht(e,tl):0},Bn.sumBy=function(e,t){return e&&e.length?Ht(e,ra(t,2)):0},Bn.template=function(e,t,n){var i=Bn.templateSettings;n&&ga(e,t,n)&&(t=r),e=mo(e),t=wo({},t,i,Jr);var a,s,o=wo({},t.imports,i.imports,Jr),l=Do(o),c=Kt(o,l),u=0,h=t.interpolate||we,d="__p += '",p=Ie((t.escape||we).source+"|"+h.source+"|"+(h===X?he:we).source+"|"+(t.evaluate||we).source+"|$","g"),f="//# sourceURL="+($e.call(t,"sourceURL")?(t.sourceURL+"").replace(/[\r\n]/g," "):"lodash.templateSources["+ ++it+"]")+"\n";e.replace(p,(function(t,n,i,r,o,l){return i||(i=r),d+=e.slice(u,l).replace(be,tn),n&&(a=!0,d+="' +\n__e("+n+") +\n'"),o&&(s=!0,d+="';\n"+o+";\n__p += '"),i&&(d+="' +\n((__t = ("+i+")) == null ? '' : __t) +\n'"),u=l+t.length,t})),d+="';\n";var g=$e.call(t,"variable")&&t.variable;g||(d="with (obj) {\n"+d+"\n}\n"),d=(s?d.replace(U,""):d).replace(W,"$1").replace(z,"$1;"),d="function("+(g||"obj")+") {\n"+(g?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(a?", __e = _.escape":"")+(s?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+d+"return __p\n}";var m=Yo((function(){return Pe(l,f+"return "+d).apply(r,c)}));if(m.source=d,qs(m))throw m;return m},Bn.times=function(e,t){if((e=ho(e))<1||e>h)return[];var n=p,i=mn(e,p);t=ra(t),e-=p;for(var r=qt(i,t);++n<e;)t(n);return r},Bn.toFinite=uo,Bn.toInteger=ho,Bn.toLength=po,Bn.toLower=function(e){return mo(e).toLowerCase()},Bn.toNumber=fo,Bn.toSafeInteger=function(e){return e?ri(ho(e),-9007199254740991,h):0===e?e:0},Bn.toString=mo,Bn.toUpper=function(e){return mo(e).toUpperCase()},Bn.trim=function(e,t,n){if((e=mo(e))&&(n||t===r))return e.replace(ie,"");if(!e||!(t=ar(t)))return e;var i=un(e),a=un(t);return yr(i,Xt(i,a),Zt(i,a)+1).join("")},Bn.trimEnd=function(e,t,n){if((e=mo(e))&&(n||t===r))return e.replace(ae,"");if(!e||!(t=ar(t)))return e;var i=un(e);return yr(i,0,Zt(i,un(t))+1).join("")},Bn.trimStart=function(e,t,n){if((e=mo(e))&&(n||t===r))return e.replace(re,"");if(!e||!(t=ar(t)))return e;var i=un(e);return yr(i,Xt(i,un(t))).join("")},Bn.truncate=function(e,t){var n=30,i="...";if(Xs(t)){var a="separator"in t?t.separator:a;n="length"in t?ho(t.length):n,i="omission"in t?ar(t.omission):i}var s=(e=mo(e)).length;if(nn(e)){var o=un(e);s=o.length}if(n>=s)return e;var l=n-cn(i);if(l<1)return i;var c=o?yr(o,0,l).join(""):e.slice(0,l);if(a===r)return c+i;if(o&&(l+=c.length-l),no(a)){if(e.slice(l).search(a)){var u,h=c;for(a.global||(a=Ie(a.source,mo(de.exec(a))+"g")),a.lastIndex=0;u=a.exec(h);)var d=u.index;c=c.slice(0,d===r?l:d)}}else if(e.indexOf(ar(a),l)!=l){var p=c.lastIndexOf(a);p>-1&&(c=c.slice(0,p))}return c+i},Bn.unescape=function(e){return(e=mo(e))&&q.test(e)?e.replace(G,hn):e},Bn.uniqueId=function(e){var t=++Oe;return mo(e)+t},Bn.upperCase=qo,Bn.upperFirst=Jo,Bn.each=gs,Bn.eachRight=ms,Bn.first=Wa,al(Bn,(gl={},yi(Bn,(function(e,t){$e.call(Bn.prototype,t)||(gl[t]=e)})),gl),{chain:!1}),Bn.VERSION="4.17.15",kt(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(e){Bn[e].placeholder=Bn})),kt(["drop","take"],(function(e,t){Rn.prototype[e]=function(n){n=n===r?1:gn(ho(n),0);var i=this.__filtered__&&!t?new Rn(this):this.clone();return i.__filtered__?i.__takeCount__=mn(n,i.__takeCount__):i.__views__.push({size:mn(n,p),type:e+(i.__dir__<0?"Right":"")}),i},Rn.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}})),kt(["filter","map","takeWhile"],(function(e,t){var n=t+1,i=1==n||3==n;Rn.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:ra(e,3),type:n}),t.__filtered__=t.__filtered__||i,t}})),kt(["head","last"],(function(e,t){var n="take"+(t?"Right":"");Rn.prototype[e]=function(){return this[n](1).value()[0]}})),kt(["initial","tail"],(function(e,t){var n="drop"+(t?"":"Right");Rn.prototype[e]=function(){return this.__filtered__?new Rn(this):this[n](1)}})),Rn.prototype.compact=function(){return this.filter(tl)},Rn.prototype.find=function(e){return this.filter(e).head()},Rn.prototype.findLast=function(e){return this.reverse().find(e)},Rn.prototype.invokeMap=Hi((function(e,t){return"function"==typeof e?new Rn(this):this.map((function(n){return Ci(n,e,t)}))})),Rn.prototype.reject=function(e){return this.filter(As(ra(e)))},Rn.prototype.slice=function(e,t){e=ho(e);var n=this;return n.__filtered__&&(e>0||t<0)?new Rn(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),t!==r&&(n=(t=ho(t))<0?n.dropRight(-t):n.take(t-e)),n)},Rn.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},Rn.prototype.toArray=function(){return this.take(p)},yi(Rn.prototype,(function(e,t){var n=/^(?:filter|find|map|reject)|While$/.test(t),i=/^(?:head|last)$/.test(t),a=Bn[i?"take"+("last"==t?"Right":""):t],s=i||/^find/.test(t);a&&(Bn.prototype[t]=function(){var t=this.__wrapped__,o=i?[1]:arguments,l=t instanceof Rn,c=o[0],u=l||Rs(t),h=function(e){var t=a.apply(Bn,At([e],o));return i&&d?t[0]:t};u&&n&&"function"==typeof c&&1!=c.length&&(l=u=!1);var d=this.__chain__,p=!!this.__actions__.length,f=s&&!d,g=l&&!p;if(!s&&u){t=g?t:new Rn(this);var m=e.apply(t,o);return m.__actions__.push({func:us,args:[h],thisArg:r}),new jn(m,d)}return f&&g?e.apply(this,o):(m=this.thru(h),f?i?m.value()[0]:m.value():m)})})),kt(["pop","push","shift","sort","splice","unshift"],(function(e){var t=De[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",i=/^(?:pop|shift)$/.test(e);Bn.prototype[e]=function(){var e=arguments;if(i&&!this.__chain__){var r=this.value();return t.apply(Rs(r)?r:[],e)}return this[n]((function(n){return t.apply(Rs(n)?n:[],e)}))}})),yi(Rn.prototype,(function(e,t){var n=Bn[t];if(n){var i=n.name+"";$e.call(Ln,i)||(Ln[i]=[]),Ln[i].push({name:t,func:n})}})),Ln[Nr(r,2).name]=[{name:"wrapper",func:r}],Rn.prototype.clone=function(){var e=new Rn(this.__wrapped__);return e.__actions__=kr(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=kr(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=kr(this.__views__),e},Rn.prototype.reverse=function(){if(this.__filtered__){var e=new Rn(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},Rn.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,n=Rs(e),i=t<0,r=n?e.length:0,a=function(e,t,n){for(var i=-1,r=n.length;++i<r;){var a=n[i],s=a.size;switch(a.type){case"drop":e+=s;break;case"dropRight":t-=s;break;case"take":t=mn(t,e+s);break;case"takeRight":e=gn(e,t-s)}}return{start:e,end:t}}(0,r,this.__views__),s=a.start,o=a.end,l=o-s,c=i?o:s-1,u=this.__iteratees__,h=u.length,d=0,p=mn(l,this.__takeCount__);if(!n||!i&&r==l&&p==l)return ur(e,this.__actions__);var f=[];e:for(;l--&&d<p;){for(var g=-1,m=e[c+=t];++g<h;){var y=u[g],v=y.iteratee,w=y.type,b=v(m);if(2==w)m=b;else if(!b){if(1==w)continue e;break e}}f[d++]=m}return f},Bn.prototype.at=hs,Bn.prototype.chain=function(){return cs(this)},Bn.prototype.commit=function(){return new jn(this.value(),this.__chain__)},Bn.prototype.next=function(){this.__values__===r&&(this.__values__=co(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?r:this.__values__[this.__index__++]}},Bn.prototype.plant=function(e){for(var t,n=this;n instanceof Mn;){var i=Na(n);i.__index__=0,i.__values__=r,t?a.__wrapped__=i:t=i;var a=i;n=n.__wrapped__}return a.__wrapped__=e,t},Bn.prototype.reverse=function(){var e=this.__wrapped__;if(e instanceof Rn){var t=e;return this.__actions__.length&&(t=new Rn(this)),(t=t.reverse()).__actions__.push({func:us,args:[Xa],thisArg:r}),new jn(t,this.__chain__)}return this.thru(Xa)},Bn.prototype.toJSON=Bn.prototype.valueOf=Bn.prototype.value=function(){return ur(this.__wrapped__,this.__actions__)},Bn.prototype.first=Bn.prototype.head,Ze&&(Bn.prototype[Ze]=function(){return this}),Bn}();ht._=dn,(i=function(){return dn}.call(t,n,t,e))===r||(e.exports=i)}.call(this)},852:(e,t,n)=>{"use strict";n.r(t),n.d(t,{init:()=>a});var i=n(543);window.updateFloatingButtonPosition=i.c;const r={controller:class{$timeout;$element;userDefaultService;items=[];notificationCount=0;evaFloatingIndicator=0;isPanelAlignTop=!0;countUpdateCallbackMap={};static $inject=["$timeout","$element","UserDefaultService"];constructor(e,t,n){this.$timeout=e,this.$element=t,this.$postLink=this.postLink,this.userDefaultService=n,this.setupGlobalHook(),this.setupDrag(),this.setupHover()}async postLink(){await this.loadFloatingButtonPosition()}async loadFloatingButtonPosition(){if(null!=localStorage.getItem("floatingButtonPosition")){let e=JSON.parse(localStorage.getItem("floatingButtonPosition"));return void(this.isFloatingButtonInDefaultPosition(e)&&this.setFloatingButtonPosition(e))}const e=await this.userDefaultService.getUserDefaults("floatingButton");try{if(e&&200===e.status&&Object.prototype.hasOwnProperty.call(e.data,"floatingButtonPosition")){let t=JSON.parse(e.data.floatingButtonPosition.trim());this.isFloatingButtonInDefaultPosition(t)&&(this.setFloatingButtonPosition(t),this.setLocalCachePosition(t.top,t.left))}}catch(e){}}setFloatingButtonPosition(e){let t=document.querySelector(".floating-button-container");t.style.top=e.top,t.style.left=e.left}setLocalCachePosition(e,t){let n=JSON.stringify({top:e,left:t});localStorage.setItem("floatingButtonPosition",n)}isFloatingButtonInDefaultPosition(e){return!("default"===e.top&&"default"===e.left)}setupDrag(){this.$element.find(".floating-button-container").draggable({handle:this.$element.find(".floating-button"),start:()=>{this.$element.addClass("in-drag"),document.body.classList.add("floating-button-in-drag")},stop:e=>{this.$element.removeClass("in-drag"),document.body.classList.remove("floating-button-in-drag"),this.onDragEnd(e)}})}setupGlobalHook(){window.floatingButton={registerItem:this.registerItem.bind(this),updateItem:this.updateItem.bind(this),onItemUpdate:this.onItemUpdate.bind(this)},document.dispatchEvent(new CustomEvent("floatingButtonAvailable"))}setupHover(){let e=this.$element.find(".floating-button-container .floating-button");0!==e.length&&e[0].addEventListener("mouseover",(e=>{this.onHover(e)}))}registerItem(e){if(null==e.key||0===e.key.trim().length||null!=this.items.find((t=>t.key===e.key)))throw`Invalid key or another item with key "${e.key}" already exists!`;(null==e.notificationCount||isNaN(e.notificationCount))&&(e.notificationCount=0),this.items.push(e),this.items=this.items.sort(((e,t)=>e.preferredIndex-t.preferredIndex)),this.refreshNotificationCount(),this.$timeout()}updateItem(e,t){const n=this.items.findIndex((t=>t.key===e));-1!==n&&(this.items[n]={...this.items[n],...t},this.refreshNotificationCount(),"eva"===e&&(this.evaFloatingIndicator=t.evaFloatingIndicator),e in this.countUpdateCallbackMap&&this.countUpdateCallbackMap[e]instanceof Function&&this.countUpdateCallbackMap[e](this.notificationCount),this.$timeout())}refreshNotificationCount(){this.notificationCount=this.items.reduce(((e,t)=>e+t.notificationCount),0)}onItemUpdate(e,t){this.countUpdateCallbackMap[e]=t}onDragEnd(e){const{target:t}=e,n=t.getBoundingClientRect(),i=$(t).find(".floating-button")[0].getBoundingClientRect(),r=i.height;n.y<0?$(t).offset({top:0}):i.bottom>$(window).height()-10&&$(t).offset({top:$(window).height()-10-r}),n.x<20?$(t).offset({left:20}):n.x>$(window).width()-10-n.width-10&&$(t).offset({left:$(window).width()-10-n.width-10});const a=$(t).offset(),s=a.left/$(window).width()*100,o=a.top/$(window).height()*100;this.setLocalCachePosition(o+"%",s+"%")}onHover(e){let t=document.getElementsByClassName("floating-panel-container");if(!t)return;const n=e.target.getBoundingClientRect(),i=t[0].offsetHeight;let r=!0;document.documentElement.clientHeight-n.bottom<i&&(r=!1);let a=this.$timeout((()=>{this.isPanelAlignTop=r,this.$timeout.cancel(a)}))}},templateUrl:"/mobiledoc/jsp/webemr/js/global/floatingButton/floatingButton.html"},a=async()=>{angular.module("floatingButton",[]).component("floatingButton",r);const e=angular.element(document.getElementById("webemrApp")),t=e.injector().get("$compile"),n=e.injector().get("$ocLazyLoad");await n.load({name:"floatingButton",files:["/mobiledoc/jsp/webemr/js/global/floatingButton/floatingButton.css","/mobiledoc/jsp/webemr/useruidefault/userdefaultservice.js"]});const i=e.scope().$new(!0);let a=angular.element("<floating-button></floating-button>");t(a)(i),"1"===window.getUserProfile("showFloatingButton")&&angular.element(document.body).prepend(a)}},402:(e,t,n)=>{"use strict";n.d(t,{Fw:()=>u,HM:()=>g,KM:()=>r,Nj:()=>h,PI:()=>c,PQ:()=>f,Wi:()=>o,av:()=>a,hf:()=>p,ld:()=>d,nh:()=>s,sL:()=>i,v$:()=>l});const i="CLICK",r="DROP_DOWN",a="INPUT_TEXT",s="CHECK_BOX",o="RIGHT_CLICK",l="HOVER",c=1e4,u=999,h={STOPPED:0,RECORDING:1,PAUSED:2},d={NOT_STARTED:0,RUNNING:1,COMPLETED:2,FAILED:3,SKIPPED:4},p={NOT_STARTED:-1,RUNNING:0,COMPLETED:1,FAILED:2},f={NO_PAUSE:1,PAUSE_MANUAL_RESUME:2,PAUSE_AUTO_RESUME:3},g={BELOW:1,ABOVE:2,LEFT:3,RIGHT:4}},998:(e,t,n)=>{"use strict";n.d(t,{_:()=>o});var i=n(130),r=n(505),a=n(402),s=n(967);class o{#e;#t=0;#n;#i=!1;#r=!1;executorService;clickableConditionalStep=void 0;constructor(e,t,n){this.#e=this.formatInstance(e),this.headlessMode=t,this.previewMode=n,this.executorService=new s.ExecutorService(i.getAngularDependency("$http"))}formatInstance(e){return e.steps=i.getBranchedSteps(e.steps),e.steps.forEach((e=>{e.fieldOptions=JSON.parse(e.fieldOptions)})),e}async play(){await this.#a(),await this.#s(),await this.logPlaylistExecution(),await this.#o()}async#a(){Array.from(document.getElementsByClassName("playlist-launcher-overlay")).forEach((e=>e.remove())),Array.from(document.getElementsByTagName("playlist-progress-window")).forEach((e=>e.remove())),this.headlessMode||(await i.getAngularDependency("$ocLazyLoad").load({name:"playlist",files:["/mobiledoc/jsp/webemr/js/global/playlist/progressWindow/progressWindow.css"]}),this.#n=await new Promise((e=>{const t=angular.element(document.getElementById("webemrApp")),n=i.getAngularDependency("$compile"),r=t.scope().$new(!0);r.onLoad=t=>e(t),r.instance=this.#e,r.previewMode=this.previewMode;let a=angular.element('<playlist-progress-window  preview-mode="previewMode" instance="instance" on-load="onLoad"></playlist-progress-window>');n(a)(r),angular.element(document.body).append(a)})))}async#s(){let e;for(;this.#t<this.#e.steps.length;){if(!this.headlessMode&&(this.#n.isExecutionStopped()||this.#n.isExecutionFailed()))return;let t=this.#e.steps[this.#t],n=!1;try{await this.#l(this.#t,t,e)}catch(e){if(!this.clickableConditionalStep||t.isConditionalStepsAdded){await this.#n.onStepFailed(this.#t),await this.#n.onExecutionFailed();break}{let e=this.clickableConditionalStep;await this.appendConditionalSteps(t,e),n=!0,this.clickableConditionalStep=void 0}}n||(this.#t++,e=t)}}async logPlaylistExecution(){if(this.#i||!(this.#e.metadata.workflowGuid&&this.#e.metadata.workflowGuid.length>0))return;let e=this.#n.isExecutionFailed()?0:1;await this.executorService.logPlaylistExecution(this.#e.metadata.workflowGuid,e)}async appendConditionalSteps(e,t){let n=this.findRequiredConditionalSteps(e.conditionalSetSteps,t);e.isConditionalStepsAdded=!0;let i=this.#t;await this.#n.onStepRequeue(this.#t),n.forEach((e=>{this.#e.steps.splice(i,0,e),i++}))}findRequiredConditionalSteps(e,t){for(const n of e){const e=n.findIndex((e=>e===t));if(-1!==e)return n.slice(e)}return null}async#o(){this.headlessMode||this.#n.isExecutionFailed()||(await this.#n.onExecutionCompleted(),await r.getTimer(3e3),this.#n.destroy())}async#l(e,t,n){this.headlessMode||await this.#n.onStepStarted(this.#t);const i=`${t.screenIdentifierSelector}:has(${t.fieldIdentifierSelector})`;let s=await this.getParentContainerForElement(t.screenIdentifier,i),o=await this.getField(s,t);null!=o?(o?.classList.add("playlist-focused-element"),await r.getTimer(1e3*r.EXECUTOR_SPEED),t.pause===a.PQ.PAUSE_MANUAL_RESUME||t.pause===a.PQ.PAUSE_AUTO_RESUME?(o.focus(),await this.#c(o,t),this.onUserActionCompleted()):await this.#u(o,t.fieldType,t.fieldValue,n,t.fieldAction,t.isAppendContent,t.keyToPress),t.keyToPress&&(r.simulateKeyPress(o,t.keyToPress,"keydown"),r.simulateKeyPress(o,t.keyToPress,"keypress"),r.simulateKeyPress(o,t.keyToPress,"keyup")),this.headlessMode||await this.#n.onStepCompleted(this.#t),this.previewMode&&await this.#n.onNextStepCompleted()):await Promise.reject()}async getField(e,t){const n={cancel:!1};let i=this.getConditionalSteps(t),s=[r.waitForClickableSelector(e,this.getFieldIdentifier(t),t.fieldAttributeSelector,t.fieldIdentifierSelector,n).then((e=>({type:"parentStep",field:e}))),r.getTimer(a.PI)];i.length>0&&(this.clickableConditionalStep=void 0,s.push(...i.map(((t,a)=>new Promise(((s,o)=>setTimeout((async()=>{try{await r.waitForClickableSelector(e,this.getFieldIdentifier(t),t.fieldAttributeSelector,t.fieldIdentifierSelector,n,{conditionalSelector:t.conditionalSelector}),this.clickableConditionalStep||(this.clickableConditionalStep=i[a])}catch(e){o(e)}}),t.waitPromiseTime)))))));let o,l=await Promise.race(s);if("parentStep"===l.type)o=l.field;else if("conditional"===l.type)throw r.getCustomError(a.Fw,"Conditional Steps is executable",i[l.index]);if(o instanceof HTMLElement)return o;n.cancel=!0}getConditionalSteps(e){return e.conditionalSetSteps?(e.conditionalSetSteps.map((e=>{let t=e.length;e.map(((e,n)=>{e.waitPromiseTime=500*(t-n)}))})),e.conditionalSetSteps.flat()):[]}getDelayedPromiseTimeForConditionalSteps(e){return e>4e3?4e3:e+500}async getParentContainerForElement(e,t){const n={cancel:!1};let i=document;if(e&&""!==e||t&&""!==t){let a=await Promise.race([r.waitForScreenToOpen(e,t,n),r.getTimer(3e3)]);a instanceof HTMLElement?i=a:n.cancel=!0}return i}getFieldIdentifier(e){let t=e.fieldIdentifier;if("radio button"===e.fieldType&&e.fieldValue){let n=e.fieldOptions.filter((t=>e.fieldValue===t.value));t=n[0]?n[0].identifier:t}return t}async#u(e,t,n,r,s,o,l){if(r&&"checkbox"===r.fieldType&&this.verifyPreviousStep(r),i.isDirectiveStaffLookup(e)){const t=JSON.parse(n);angular.element(e).scope().selectStaff(t,!1),await i.processAngularUpdates()}else if(i.isDirectivePatientLookup(e)){const t=JSON.parse(n);angular.element(e).scope().selectPatient(t),await i.processAngularUpdates()}else if(i.isDirectiveLabLookup(e)){const t=JSON.parse(n);angular.element(e).scope().selectLab(t),await i.processAngularUpdates()}else if(i.isDirectiveProviderLookup(e))JSON.parse(n).forEach((t=>angular.element(e).scope().selectProvider(t))),await i.processAngularUpdates();else if(i.isDirectiveFacilityLookup(e))JSON.parse(n).forEach((t=>angular.element(e).scope().selectFacility(t))),await i.processAngularUpdates();else if(i.isDirectiveResourceLookup(e))angular.element(e).scope().setResourceDetail(n),await i.processAngularUpdates();else if(i.isDirectiveVisitTypeLookup(e)){const t=JSON.parse(n);angular.element(e).scope().setVisitType(t),await i.processAngularUpdates()}else if(i.isDirectiveVisitStatusLookup(e)){const t=JSON.parse(n);angular.element(e).scope().setVisitStatus(t),await i.processAngularUpdates()}else if(i.isDirectiveReasonLookup(e)){const t=JSON.parse(n);angular.element(e).scope().setReason(t),await i.processAngularUpdates()}else if(i.isDirectiveTimeLookup(e))angular.element(e).scope().setTime(n),await i.processAngularUpdates();else if(i.isDirectiveInsuranceLookup(e)){const t=JSON.parse(n);angular.element(e).scope().selectInsurance(t),await i.processAngularUpdates()}else if(i.isDirectiveGuarantorLookup(e)){const t=JSON.parse(n);angular.element(e).scope().selectGuarantor(t),await i.processAngularUpdates()}else if(i.isDirectiveSpecialtyLookup(e))JSON.parse(n).forEach((t=>angular.element(e).scope().selectspecialty(t))),await i.processAngularUpdates();else if("textbox"===t||"textarea"===t){if(e.focus(),e.value=1===o&&e.value?e.value+" "+n:n,["input","keydown","keyup"].forEach((t=>{e.dispatchEvent(new Event(t,{bubbles:!0}))})),s===a.Wi){e.click();let t=new Event("contextmenu",{bubbles:!0});e.dispatchEvent(t)}}else"checkbox"===t?this.updateCheckboxElement(e,n||!1):"select-one"===t?this.setDropDownValue(e,n):"radio button"===t?e.click():s===a.Wi?this.doRightClick(e):s===a.v$?this.doMouseHover(e):l||(this.doMouseAction(e,"mousedown"),this.doMouseAction(e,"mouseup"),e.click())}doMouseAction(e,t){let n=new Event(t,{bubbles:!0});e.dispatchEvent(n)}doRightClick(e){let t=new Event("contextmenu",{bubbles:!0});e.dispatchEvent(t);for(const n of e.children)n.dispatchEvent(t)}doMouseHover(e){const t=new MouseEvent("mouseover",{bubbles:!0,cancelable:!0,view:window});r.getDeepestElementInTarget(e).dispatchEvent(t)}setDropDownValue(e,t){let n=angular.element(e)[0].options;if(n)for(let i=0;i<n.length;i++)if(n[i].text===t){angular.element(e).val(n[i].value).change();break}}onUserActionCompleted(){Array.from(document.getElementsByClassName("playlist-instruction-container")).forEach((e=>e.remove()))}verifyPreviousStep(e){let t=this.getPreviousElement(e);t&&this.correctPreviousCheckboxIfChanged(t,e)}getPreviousElement(e){let t=r.getElementFromXPath(document,e.fieldIdentifier);const n=r.isElementClickable(document,t);return null!==t&&n||(t=document.querySelector(e.fieldIdentifierSelector)),t}correctPreviousCheckboxIfChanged(e,t){this.isPreviousCheckboxValueChanged(e,t.fieldValue)&&this.updateCheckboxElement(e,t.fieldValue)}isPreviousCheckboxValueChanged(e,t){return(t="true"===t.toLowerCase())!==angular.element(e).prop("checked")}updateCheckboxElement(e,t){t="true"===t.toLowerCase(),angular.element(e).prop("checked",!t).trigger("change"),angular.element(e).prop("checked",t).trigger("change")}async#c(e,t){return await i.getAngularDependency("$ocLazyLoad").load({name:"playlist",files:["/mobiledoc/jsp/webemr/js/global/playlist/executor/instruction/instruction.css"]}),new Promise((n=>{const s=angular.element(document.getElementById("webemrApp")),o=i.getAngularDependency("$compile"),l=s.scope().$new(!0);l.onDismiss=()=>n(),l.instruction=t.customDescription||t.fieldTooltip,l.instructionLocation=t.fieldTooltipLocation,l.targetElement=e;let c=angular.element('<playlist-instruction instruction="instruction" instruction-location="instructionLocation" on-dismiss="onDismiss" target-element="targetElement"></playlist-instruction>');if(o(c)(l),angular.element(document.body).append(c),t.pause===a.PQ.PAUSE_AUTO_RESUME){let i=r.getEventNameForElement(t.fieldType);e.addEventListener(i,(()=>{setTimeout((()=>{l.$broadcast("$destroy"),n()}),500)}),{once:!0})}}))}}},505:(e,t,n)=>{"use strict";n.r(t),n.d(t,{EXECUTOR_SPEED:()=>i,findElementFromXPath:()=>c,getCustomError:()=>m,getDeepestElementInTarget:()=>g,getElementFromXPath:()=>p,getEventNameForElement:()=>f,getTimer:()=>r,isElementClickable:()=>d,isElementMenu:()=>h,isEligibleConditionalElement:()=>l,simulateKeyPress:()=>y,toggleMenu:()=>u,waitForClickableSelector:()=>o,waitForScreenToOpen:()=>s});const i=(()=>{let e=parseFloat(getItemKeyValue("CentralPlaylistSpeed"))||.3;return e>0&&e<=5?e:e>5?5:.3})(),r=e=>new Promise((t=>setTimeout(t,e))),a=(e,t)=>{if(null==t)return;const n=t.getBoundingClientRect();let i=e.elementFromPoint(n.x+n.width/2,n.y+n.height/2);if(null!=i&&(i.matches("#playlist-progress-container")||i.matches("#playlist-progress-container *"))){const e=document.getElementById("playlist-progress-container");e.classList.contains("align-right")?e.classList.remove("align-right"):e.classList.add("align-right")}},s=(e,t,n)=>new Promise((i=>{const r=()=>{if(n?.cancel)i();else{if(e?.length>0){const t=p(document,e);if(t&&!t.matches(".playlist-configuration,.playlist-configuration-backdrop"))return void i(t)}if(t?.length>0){t.includes("_#")&&(t=t.replace("_#","#"));const e=document.querySelector(t);if(e)return void i(e)}requestAnimationFrame(r)}};requestAnimationFrame(r)})),o=(e,t,n,i,r,s)=>new Promise((o=>{const u=()=>{if(r?.cancel)o();else{if(t&&t.length>0){let i=c(e,t,n);if(i&&l(i,s))return void o(i)}if(null!=i&&i.length>0){i.includes("_#")&&(i=i.replace("_#","#"));const e=document.querySelector(i);a(document,e);const t=d(document,e);if(null!=e&&t&&l(e,s))return void o(e)}requestAnimationFrame(u)}};requestAnimationFrame(u)})),l=(e,t)=>!t||!t.conditionalSelector||e.matches(t.conditionalSelector),c=(e,t,n)=>{let i=p(e,t);if(!new RegExp(/\.\/\/.*\[@id=".*"]\//g).test(t)&&!t.includes("BODY")&&i)return i;if(n){n.includes("on click")&&(n=n.replace("on click","onclick"));let t=p(e,n);if(t)return t}return i},u=e=>{h(e)&&!$("#leftnavApp").hasClass("visible")&&$("#jellybean-panelLink4").click()},h=e=>!(null==e||!e.closest("div"))&&"leftnavApp"===e.closest("div").id,d=(e,t)=>{if(null==t)return!1;const n=t.getBoundingClientRect();let i=e.elementFromPoint(n.x+n.width/2,n.y+n.height/2);return i===t||t.contains(i)},p=(e,t)=>{try{let n=document.evaluate(t,e,null,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,null);0===n.snapshotLength&&e!==document&&(n=document.evaluate(t,document,null,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,null));for(let e=0,t=n.snapshotLength;e<t;e++){let t=n.snapshotItem(e);if(a(document,t),d(document,t))return t}}catch(e){return}},f=e=>{let t="";return t=e.includes("checkbox")||e.includes("radio")||e.includes("select")||e.includes("dropdown")?"change":e.includes("datepicker")||e.includes("text")||e.includes("password")?"blur":"click",t},g=e=>{let t=e,n=0;const i=(e,r)=>{r>n&&(n=r,t=e),Array.from(e.children).forEach((e=>i(e,r+1)))};return i(e,0),t},m=(e,t,n)=>{let i=new Error(t);return i.code=e,i.data=n,i},y=(e,t,n)=>{var i=new KeyboardEvent(n,{key:t,code:t,bubbles:!0,cancelable:!0});e.dispatchEvent(i)}},369:(e,t,n)=>{"use strict";n.r(t),n.d(t,{init:()=>T});var i=n(998),r=n(37),a=n(861);const s={bindings:{addEditInstance:"=playlist",onClose:"&",permissions:"=",onTemplateConfiguration:"&"},controller:r.L,templateUrl:"/mobiledoc/jsp/webemr/js/global/playlist/configuration/partials/create/base.html"},o={bindings:{onClose:"&",isSuccessFeedback:"=",playlistFeedback:"=",feedbackCharRemaining:"=",errorMessageForFeedback:"=",timeOutOnClose:"="},controller:a.G,templateUrl:"/mobiledoc/jsp/webemr/js/global/playlist/configuration/partials/feedback/base.html"};var l=n(505),c=n(130),u=n(869);let h=[];const d=async()=>{const e=new u.LauncherService((0,c.getAngularDependency)("$http")),t=(await e.getPlaylists()).data.playlists.map((e=>(e.elementSelector=e.elementSelector.replace("_#","#"),e)));h=[],(await e.getPlaylistsWithInstances("","")).data.playlists.forEach((e=>{e.instances.forEach((()=>{let n=t.find((t=>t.id===e.id));h.push({id:e.id,isGlobal:e.isGlobal,elementSelector:n.elementSelector,elementXPath:n.elementXPath,conditionalSteps:n.conditionalSteps})}))}))},p=()=>{const e=((e,t)=>{let n;return(...i)=>{clearTimeout(n),n=setTimeout((()=>{e(...i)}),t)}})((()=>{const e=h.filter(f).length;window.floatingButton.updateItem("playlist",{notificationCount:e})}),3e3);new MutationObserver((t=>e(t))).observe(document,{childList:!0,subtree:!0})},f=e=>!e.isGlobal&&(0,c.isValidInstanceOrPlaylist)(e),g={controller:class{launcherService;userDefaultService;$scope;$element;$timeout;instancesLoading=!0;instances=[];playlists=[];searchText="";searchPlaceholderLeft="";searchPlaceholderRight="";isFavoriteFilter=!1;selectedItemIndex=-1;selectedInstance=void 0;commandMode=!1;commandSubjectInstance;commandDropdownItems=[];moduleName="playlist";PLAYLIST_FAVORITE_FILTER="isPlaylistFavoriteFilter";instanceGroup={contextual:!0,global:!0};static $inject=["launcherService","$scope","$element","$timeout","UserDefaultService"];constructor(e,t,n,i,r){this.launcherService=e,this.$scope=t,this.$element=n,this.$timeout=i,this.$postLink=this.postLink,this.userDefaultService=r,this.registerKeyDownEventListener(),this.setStickyInstanceGroupPosition()}async postLink(){document.getElementById("playlist-launcher-launcher-search-input")?.focus(),await this.loadLauncherPreferences(),this.loadPlaylistData()}setStickyInstanceGroupPosition(){null==localStorage.getItem("PlaylistInstanceGroupPosition")?localStorage.setItem("PlaylistInstanceGroupPosition",JSON.stringify(this.instanceGroup)):this.instanceGroup=JSON.parse(localStorage.getItem("PlaylistInstanceGroupPosition"))}destroy(){this.$timeout((()=>{this.$element.remove()}));const e=document.getElementsByClassName("playlist-launcher-overlay");e.length>0&&Array.from(e).forEach((e=>e.remove())),this.deRegisterKeyDownEventListener()}async loadLauncherPreferences(){this.instancesLoading=!0;const e=await this.userDefaultService.getUserDefaults(this.moduleName);try{if(e&&200===e.status){if(this.PLAYLIST_FAVORITE_FILTER in e.data){let t=$.trim(e.data[this.PLAYLIST_FAVORITE_FILTER]);this.isFavoriteFilter="1"===t}}else notification.show("error","","Something went wrong while saving favorite filter",2e3)}catch(e){notification.show("error","","Something went wrong while saving favorite filter",2e3)}}loadPlaylistData(){this.instancesLoading=!0,this.launcherService.getPlaylists().then((e=>{e.data&&"success"===e.data.status?(this.playlists=this.getPlaylistsWithNormalizedSelectors(e.data.playlists),this.loadRelevantInstances()):notification.show("error","","Something went wrong while loading playlist details",2e3)})).catch((()=>{notification.show("error","","Something went wrong while loading playlist details",2e3)}))}getPlaylistsWithNormalizedSelectors(e){return e.map((e=>(e.elementSelector=e.elementSelector.replace("_#","#"),e)))}loadRelevantInstances(){this.instancesLoading=!0,this.instances=[];let e=this.getRelevantInstances();e&&0!==e.length?this.launcherService.getInstances(this.searchText,e,this.isFavoriteFilter).then((e=>{e.data&&"success"===e.data.status?(this.instances=this.getInstancesWithRenamedShortcuts(e.data.instances||[]),this.instancesLoading=!1):notification.show("error","","Something went wrong while loading instance details",2e3)})).catch((()=>{notification.show("error","","Something went wrong while loading instance details",2e3)})):this.instancesLoading=!1}getInstancesWithRenamedShortcuts(e){const t=c.groupBy(e,"shortcut");return Object.entries(t).forEach((([e,t])=>{e.trim().length>0&&t.length>1&&t.forEach(((e,t)=>{e.shortcut+=t+1}))})),e}getCommandParameterJustEntered(){for(let e of this.commandSubjectInstance.steps)if(e.shortcut.length>0&&this.searchText.endsWith(` ${e.shortcut}`))return e;return null}getShortcutExample(e){return isNaN(e.shortcutExample)?e.shortcutExample?.startsWith('"')||e.shortcutExample?.startsWith("'")?`${e.shortcut} ${e.shortcutExample}`:`${e.shortcut} "${e.shortcutExample}"`:e.shortcut+e.shortcutExample}async onSearch(){if(this.searchPlaceholderLeft="",this.searchPlaceholderRight="",this.selectedItemIndex=-1,this.searchText.startsWith(".")){if(this.instances.every((e=>0===e.shortcut.length)))return;if(this.commandMode=!0,"."===this.searchText&&(this.commandSubjectInstance=null,this.commandDropdownItems=this.instances.filter((e=>e.shortcut.length>0&&e.shortcut.startsWith(this.searchText.substring(1).trimStart()))),this.searchPlaceholderLeft=`${this.searchText.replace(" ","&nbsp;")}[shortcut]`),this.searchText.startsWith(".")&&!this.searchText.includes(" ")&&(this.commandSubjectInstance=null,this.commandDropdownItems=this.instances.filter((e=>e.shortcut.length>0&&e.shortcut.startsWith(this.searchText.substring(1).trimStart()))),this.selectedItemIndex=0),this.searchText.startsWith(".")&&this.searchText.substring(1).trimStart().includes(" ")){const e=this.instances.find((e=>e.shortcut===this.searchText.substring(1,this.searchText.indexOf(" "))));if(null==e)this.searchPlaceholderRight="Invalid shortcut!";else{if(null==this.commandSubjectInstance){const t=await this.launcherService.getInstance(e.instanceId);this.commandSubjectInstance=t.data}const t=this.commandSubjectInstance.steps.filter((e=>e.shortcut?.length>0)).map((e=>e.shortcut)),n=this.parseCommand(this.searchText,t).parameters.map((e=>e.name));this.commandDropdownItems=this.commandSubjectInstance.steps.filter((e=>e.shortcut.trim().length>0&&!n.includes(e.shortcut))),this.$timeout()}const t=this.getCommandParameterJustEntered();null!=t&&(this.searchPlaceholderLeft=`${this.searchText.replace(" ","&nbsp;")}[${t.fieldName}]`),this.searchText.endsWith(" ")&&this.commandDropdownItems.length>0&&(this.searchPlaceholderLeft=`${this.searchText.replace(" ","&nbsp;")}[shortcut][value]`)}}else this.loadRelevantInstances(),this.commandMode=!1,this.commandSubjectInstance=void 0;this.togglePositionRelativeToEnableScrollInShortcuts(),this.setInstanceGroupStatusBasedOnSearchText()}togglePositionRelativeToEnableScrollInShortcuts(){const e=document.getElementsByClassName("launcher-middle-panel")[0];this.commandMode?e.classList.remove("relative-position"):e.classList.add("relative-position")}clearCommandMode(){this.searchText="",this.commandMode=!1,this.commandSubjectInstance=void 0,this.commandDropdownItems=[],this.searchPlaceholderLeft="",this.searchPlaceholderRight="",this.selectedItemIndex=-1}onKeyArrowUp(){if(this.selectedItemIndex--,this.selectedItemIndex<0&&(this.commandMode?this.selectedItemIndex=this.commandDropdownItems.length-1:this.selectedItemIndex=this.instances.length-1),!this.commandMode){const e=[].concat(...Object.values(c.groupBy(this.instances,"isGlobal")));this.selectedInstance=e[this.selectedItemIndex]}this.$timeout((()=>{this.applyScrollAtTopBottomForSelectedItem()}))}onKeyArrowDown(){if(this.selectedItemIndex++,(this.commandMode&&this.selectedItemIndex>this.commandDropdownItems.length-1||!this.commandMode&&this.selectedItemIndex>this.instances.length-1)&&(this.selectedItemIndex=0),!this.commandMode){const e=[].concat(...Object.values(c.groupBy(this.instances,"isGlobal")));this.selectedInstance=e[this.selectedItemIndex]}this.$timeout((()=>{this.applyScrollAtTopBottomForSelectedItem()}))}applyScrollAtTopBottomForSelectedItem(){let e=document.getElementsByClassName("playlist-launcher-item-container-selected")[0],t=document.getElementsByClassName("shortcut-table-body-row-selected")[0];e&&e.scrollIntoViewIfNeeded(!1),t&&(0===this.selectedItemIndex?t.closest(".vertical-scroll").scrollTop=0:t.scrollIntoViewIfNeeded(!1))}async onKeyEnter(){if(this.commandMode){if(this.searchText.trim().includes(" ")){const e=this.searchText.substring(1,this.searchText.indexOf(" ")).trim(),t=this.instances.find((t=>t.shortcut===e));if(null==t)this.searchPlaceholderRight="Invalid Shortcut!";else{const{data:e}=await this.launcherService.getInstance(t.instanceId),n=e.steps.filter((e=>e.shortcut?.length>0)).map((e=>e.shortcut)),r=this.parseCommand(this.searchText,n);e.steps.forEach((e=>{const t=r.parameters.find((t=>t.name===e.shortcut));null!=t&&0!==t.value?.trim().length&&(e.fieldValue=t.value,e.pause=1)})),new i._(e,!1,!1).play()}}else if(this.commandDropdownItems.length>0){const e=await this.launcherService.getInstance(this.commandDropdownItems[this.selectedItemIndex].instanceId);new i._(e.data,!1,!1).play()}}else this.selectInstance(this.instances[this.selectedItemIndex])}onKeySpace(){if(this.commandMode&&!this.searchText.trim().includes(" ")&&1===this.commandDropdownItems[this.selectedItemIndex]?.hasFieldShortcuts){const e=this.commandDropdownItems[this.selectedItemIndex].shortcut;this.searchText=`.${e} `,this.onSearch()}}async onSearchKeyDown(e){return"ArrowUp"===e.key?(this.onKeyArrowUp(),e.preventDefault(),!1):"ArrowDown"===e.key?(this.onKeyArrowDown(),e.preventDefault(),!1):"Enter"===e.key?(this.onKeyEnter(),e.preventDefault(),e.stopImmediatePropagation(),!1):this.commandMode&&" "===e.key&&!this.searchText.substring(1).trimStart().includes(" ")?(this.onKeySpace(),e.preventDefault(),!1):void 0}getRelevantInstances(){document.body.classList.add("playlist-pointer-events"),this.hideLauncherScreen();let e=this.playlists.filter((e=>this.isValidInstanceOrPlaylist(e))).map((e=>e.id));return this.showLauncherScreen(),document.body.classList.remove("playlist-pointer-events"),e}isValidInstanceOrPlaylist(e){if(!e.conditionalSteps||0===e.conditionalSteps.length)return this.isPlaylistExecutable(e);if(!this.isPlaylistExecutable(e)){let t=e.conditionalSteps.length,n=!1;for(let i=0;i<t&&!n;i++){let t=e.conditionalSteps[i];n=this.isPlaylistExecutable(t)}return n}return!0}isPlaylistExecutable(e){return c.isValidSelector(e.elementSelector)&&this.isElementClickable(e.elementSelector)||this.isElementFetchedFromXpath(e.elementXPath)}isElementClickable(e){let t=document.querySelector(e);return!!t&&l.isElementClickable(document,t)}isElementFetchedFromXpath(e){return!!l.getElementFromXPath(document,e)}hideLauncherScreen(){Array.from(document.getElementsByClassName("playlist-launcher-overlay")).forEach((e=>e.style.visibility="hidden"))}showLauncherScreen(){Array.from(document.getElementsByClassName("playlist-launcher-overlay")).forEach((e=>e.style.visibility="visible"))}selectInstance(e){Array.from(document.getElementsByClassName("playlist-launcher-overlay")).forEach((e=>e.remove())),this.launcherService.getInstance(e.instanceId).then((e=>{const{data:t}=e;new i._(t,!1,!1).play()}))}openConfiguration(e){this.clearCommandMode(),(async e=>{const t=angular.element(document.getElementById("webemrApp")),n=t.injector().get("$ocLazyLoad"),i=t.injector().get("$modal");return await n.load({name:"playlist",files:getDependencies("concurrencyAlertsProvider").concat(["/mobiledoc/jsp/webemr/js/sortable.js","/mobiledoc/jsp/webemr/js/global/playlist/configuration/configuration.css","/mobiledoc/jsp/webemr/js/global/playlist/configuration/template/template.css","/mobiledoc/jsp/webemr/js/lodash.js"])}),i.open({templateUrl:"/mobiledoc/jsp/webemr/js/global/playlist/configuration/configuration.html",controller:"configurationController",controllerAs:"$ctrl",bindToController:!0,windowClass:"playlist-configuration",backdrop:"static",backdropClass:"playlist-configuration-backdrop",keyboard:!1,size:"lg",resolve:{instance:function(){return e}}}).result})(e).then((()=>{}),(()=>{l.waitForClickableSelector(document,"","","body:not(:has(.playlist-configuration-backdrop))").then((()=>{this.loadPlaylistData(),d()}))}))}toggleFavorites(){this.clearCommandMode(),this.isFavoriteFilter=!this.isFavoriteFilter,this.setPlaylistUserProfileFavoriteFilter(),this.loadRelevantInstances()}setPlaylistUserProfileFavoriteFilter(){let e={};e[this.PLAYLIST_FAVORITE_FILTER]=this.isFavoriteFilter?"1":"0",this.userDefaultService.setUserDefaults(this.moduleName,e,window.global.TrUserId).then((function(e){e&&200===e.status||notification.show("error","","Something went wrong while saving favorite filter",2e3)}),(function(){notification.show("error","","Something went wrong while saving favorite filter",2e3)}))}onInstanceEdit(e){this.openConfiguration(e)}onInstanceFavorite(e,t){0===e.isFavorite?(e.isFavorite=1,this.launcherService.setUserFavoriteInstance(e.instanceId,"setFavorite").then((e=>{e.data||notification.show("error","","Something went wrong while loading favorite details",2e3)})).catch((()=>{notification.show("error","","Something went wrong while loading favorite details",2e3)}))):(e.isFavorite=0,this.launcherService.setUserFavoriteInstance(e.instanceId,"resetFavorite").then((e=>{e.data&&"success"===e.data.status?this.isFavoriteFilter&&this.loadRelevantInstances():notification.show("error","","Something went wrong while loading favorite details",2e3)})).catch((()=>{notification.show("error","","Something went wrong while loading favorite details",2e3)}))),t.stopPropagation()}parseCommand(e,t){let n=e,i=n.substring(1,n.indexOf(" "));const r=[];for(n=n.substring(n.indexOf(" ")).trim();0!==n.length;){const e=t.find((e=>new RegExp(`^${e}(\\s|"|[0-9]|$)`).test(n)));if(null==e)break;if(n=n.substring(e.length).trim(),n.startsWith('"')){const t=n.substring(1).indexOf('"'),i=n.substring(1,t+1);n=n.substring(i.length+2).trim(),r.push({name:e,value:i})}else{let t="";t=n.includes(" ")?n.substring(0,n.indexOf(" ")):n,n=n.substring(t.length).trim(),r.push({name:e,value:t})}}return{workflow:i,parameters:r}}shouldCommandNameDropdownOpen(){return!(!this.searchText.startsWith(".")||this.searchText.includes(" ")||(this.commandSubjectInstance=void 0,0))}shouldCommandNameDropdownOpen1(){return this.searchText.startsWith(".")&&!this.searchText.includes(" ")}shouldCommandParametersDropdownOpen(){return null!=this.commandSubjectInstance&&this.searchText.substring(0,document.getElementById("playlist-launcher-launcher-search-input")?.selectionEnd).endsWith(" ")}addCommandParameter(e){this.searchText+=" "+e,document.getElementById("playlist-launcher-launcher-search-input")?.focus()}setCommand(e){this.searchText=`.${e}`,document.getElementById("playlist-launcher-launcher-search-input")?.focus(),this.onSearch()}shouldShowCategories(){return this.instances.some((e=>e.isGlobal))&&this.instances.some((e=>!e.isGlobal))}shouldShowPlaceholder(){return!this.instancesLoading&&0===this.instances.length&&0===this.searchText.length&&!this.isFavoriteFilter}onKeyDown=e=>{27===e.which&&0===document.getElementsByClassName("playlist-configuration").length&&this.destroy()};registerKeyDownEventListener(){document.addEventListener("keydown",this.onKeyDown)}deRegisterKeyDownEventListener(){document.removeEventListener("keydown",this.onKeyDown)}toggleInstanceGroup(e){"0"===e?this.instanceGroup.contextual=!this.instanceGroup.contextual:"1"===e&&(this.instanceGroup.global=!this.instanceGroup.global),localStorage.setItem("PlaylistInstanceGroupPosition",JSON.stringify(this.instanceGroup))}setInstanceGroupStatusBasedOnSearchText(){this.instanceGroup.contextual=!0,this.instanceGroup.global=!0,localStorage.setItem("PlaylistInstanceGroupPosition",JSON.stringify(this.instanceGroup))}allInstancesBelongToSingleGroup(){if(0===this.instances.length)return!1;const e=this.instances[0].isGlobal;return this.instances.every((t=>t.isGlobal===e))}},templateUrl:"/mobiledoc/jsp/webemr/js/global/playlist/launcher/launcher.html"},m=u.LauncherService;var y=n(402);const v={bindings:{instance:"<",onLoad:"&",previewMode:"<"},controller:class{$scope;$timeout;instance;isNextStepClicked=!1;stepIndex=0;windowStatus=y.hf.NOT_STARTED;static $inject=["$scope","$timeout"];constructor(e,t){this.$scope=e,this.$timeout=t,this.$onInit=this.initialize,this.$postLink=this.postLink}initialize(){this.instance.steps=this.instance.steps.map((e=>(e.status=y.ld.NOT_STARTED,e)))}postLink(){this.windowStatus=y.hf.RUNNING,this.onLoad()(this)}async onStepStarted(e){this.instance.steps[e].status=y.ld.RUNNING,this.stepIndex=e,await c.processAngularUpdates()}async onStepCompleted(e){this.instance.steps[e].status=y.ld.COMPLETED;let t=document.getElementById("progressStepsList");t.scrollTop=t.scrollTop+16,await c.processAngularUpdates()}async onStepSkipped(e){this.instance.steps[e].status=y.ld.SKIPPED,await c.processAngularUpdates()}async onStepFailed(e){this.instance.steps[e].status=y.ld.FAILED,await c.processAngularUpdates()}async onStepRequeue(e){this.instance.steps[e].status=y.ld.NOT_STARTED,await c.processAngularUpdates()}async onExecutionCompleted(){this.windowStatus=y.hf.COMPLETED,await c.processAngularUpdates()}async onExecutionFailed(){this.windowStatus=y.hf.FAILED,await c.processAngularUpdates()}isExecutionStopped(){return this.windowStatus===y.hf.NOT_STARTED}isExecutionSuccessful(){return this.windowStatus===y.hf.COMPLETED}isExecutionFailed(){return this.windowStatus===y.hf.FAILED}clearElementProperties(){Array.from(document.getElementsByClassName("playlist-focused-element")).forEach((function(e){e.classList.remove("playlist-focused-element")}))}destroy(){this.windowStatus=y.hf.NOT_STARTED,this.$timeout((()=>{this.clearElementProperties(),this.$scope.$destroy(),Array.from(document.getElementsByTagName("playlist-progress-window")).forEach((e=>e.remove())),Array.from(document.getElementsByClassName("playlist-instruction-container")).forEach((e=>e.remove()))}),1e3)}nextButtonClicked(){this.isNextStepClicked=!0}async onNextStepCompleted(){return new Promise((e=>{this.nextButtonClicked=()=>e()}))}launchRecorder(){this.destroy(),c.getAngularDependency("$ocLazyLoad").load({name:"playlist",files:["/mobiledoc/jsp/webemr/js/global/playlist/recorder/recorder.css","/mobiledoc/jsp/webemr/js/global/playlist/recorder/recorderField.css"]}).then((()=>{const e=angular.element(document.getElementById("webemrApp")),t=c.getAngularDependency("$compile"),n=e.scope().$new(!0);n.steps=this.instance.steps,n.stepIndex=++this.stepIndex,n.draftData=this.instance.metadata.draftData;let i=angular.element('<playlist-recorder steps="steps"  draft-data="draftData"  step-index="stepIndex"></playlist-recorder>');t(i)(n),angular.element(document.body).prepend(i)}))}},templateUrl:"/mobiledoc/jsp/webemr/js/global/playlist/progressWindow/progressWindow.html"},w={bindings:{instruction:"<",instructionLocation:"<",onDismiss:"&",targetElement:"<"},controller:class{$scope;$element;$timeout;instruction;instructionLocation;onDismiss;targetElement;positionTop=0;positionLeft=0;maxWidth="none";static $inject=["$scope","$element","$timeout"];constructor(e,t,n){this.$scope=e,this.$element=t,this.$timeout=n,this.$postLink=this.postLink,e.$on("$destroy",(()=>this.dismiss()))}postLink(){let e=this.$timeout((()=>{this.setPosition(),this.$timeout.cancel(e)}))}dismiss(){this.targetElement=null,this.$timeout((()=>{this.$element.remove(),this.onDismiss()()}))}setPosition(){const{x:e,y:t,height:n,width:i}=this.targetElement.getBoundingClientRect();if(this.instructionLocation===y.HM.BELOW)this.positionLeft=e,this.positionTop=t+n+10;else if(this.instructionLocation===y.HM.ABOVE){const n=this.$element[0].querySelector(".playlist-instruction-container").getBoundingClientRect().height;this.positionLeft=e,this.positionTop=t-10<n?0:t-n-10}else if(this.instructionLocation===y.HM.LEFT){const n=this.$element[0].querySelector(".playlist-instruction-container").getBoundingClientRect().width;e-10<n?(this.maxWidth=e-10,this.positionLeft=0):this.positionLeft=e-n-10,this.positionTop=t}else this.instructionLocation===y.HM.RIGHT&&(this.positionLeft=e+i+10,this.positionTop=t)}},templateUrl:"/mobiledoc/jsp/webemr/js/global/playlist/executor/instruction/instruction.html"},b={bindings:{name:"<",width:"<",height:"<",color:"<"},controller:class{name="";width=0;height=0;color=""},template:'\n<svg ng-if="$ctrl.name === \'cloudDownload\'" stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 16 16" ng-attr-height="{{$ctrl.height}}px" ng-attr-width="{{$ctrl.width}}px" xmlns="http://www.w3.org/2000/svg">\n    <path fill-rule="evenodd" d="M7.646 10.854a.5.5 0 0 0 .708 0l2-2a.5.5 0 0 0-.708-.708L8.5 9.293V5.5a.5.5 0 0 0-1 0v3.793L6.354 8.146a.5.5 0 1 0-.708.708l2 2z"></path>\n    <path d="M4.406 3.342A5.53 5.53 0 0 1 8 2c2.69 0 4.923 2 5.166 4.579C14.758 6.804 16 8.137 16 9.773 16 11.569 14.502 13 12.687 13H3.781C1.708 13 0 11.366 0 9.318c0-1.763 1.266-3.223 2.942-3.593.143-.863.698-1.723 1.464-2.383zm.653.757c-.757.653-1.153 1.44-1.153 2.056v.448l-.445.049C2.064 6.805 1 7.952 1 9.318 1 10.785 2.23 12 3.781 12h8.906C13.98 12 15 10.988 15 9.773c0-1.216-1.02-2.228-2.313-2.228h-.5v-.5C12.188 4.825 10.328 3 8 3a4.53 4.53 0 0 0-2.941 1.1z"></path>\n</svg>\n<svg ng-if="$ctrl.name === \'downloaded\'" stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 16 16" ng-attr-height="{{$ctrl.height}}px" ng-attr-width="{{$ctrl.width}}px" xmlns="http://www.w3.org/2000/svg">\n    <path d="M2.5 8a5.5 5.5 0 0 1 8.25-4.764.5.5 0 0 0 .5-.866A6.5 6.5 0 1 0 14.5 8a.5.5 0 0 0-1 0 5.5 5.5 0 1 1-11 0z"></path>\n    <path d="M15.354 3.354a.5.5 0 0 0-.708-.708L8 9.293 5.354 6.646a.5.5 0 1 0-.708.708l3 3a.5.5 0 0 0 .708 0l7-7z"></path>\n</svg>\n<svg ng-if="$ctrl.name === \'templateConfigWarning\'" stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024" ng-attr-height="{{$ctrl.height}}px" ng-attr-width="{{$ctrl.width}}px" xmlns="http://www.w3.org/2000/svg">\n    <path d="M955.7 856l-416-720c-6.2-10.7-16.9-16-27.7-16s-21.6 5.3-27.7 16l-416 720C56 877.4 71.4 904 96 904h832c24.6 0 40-26.6 27.7-48zM480 416c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v184c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V416zm32 352a48.01 48.01 0 0 1 0-96 48.01 48.01 0 0 1 0 96z"></path>\n</svg>\n<svg ng-if="$ctrl.name === \'categoryExpandCollapse\'" stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" ng-attr-height="{{$ctrl.height}}px" ng-attr-width="{{$ctrl.width}}px" xmlns="http://www.w3.org/2000/svg">\n    <polyline points="9 18 15 12 9 6"></polyline>\n</svg>\n<svg ng-if="$ctrl.name === \'cloudUpload\'" stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024" ng-attr-height="{{$ctrl.height}}px" ng-attr-width="{{$ctrl.width}}px" xmlns="http://www.w3.org/2000/svg">\n    <path d="M518.3 459a8 8 0 0 0-12.6 0l-112 141.7a7.98 7.98 0 0 0 6.3 12.9h73.9V856c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V613.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 459z"></path>\n    <path d="M811.4 366.7C765.6 245.9 648.9 160 512.2 160S258.8 245.8 213 366.6C127.3 389.1 64 467.2 64 560c0 110.5 89.5 200 199.9 200H304c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8h-40.1c-33.7 0-65.4-13.4-89-37.7-23.5-24.2-36-56.8-34.9-90.6.9-26.4 9.9-51.2 26.2-72.1 16.7-21.3 40.1-36.8 66.1-43.7l37.9-9.9 13.9-36.6c8.6-22.8 20.6-44.1 35.7-63.4a245.6 245.6 0 0 1 52.4-49.9c41.1-28.9 89.5-44.2 140-44.2s98.9 15.3 140 44.2c19.9 14 37.5 30.8 52.4 49.9 15.1 19.3 27.1 40.7 35.7 63.4l13.8 36.5 37.8 10C846.1 454.5 884 503.8 884 560c0 33.1-12.9 64.3-36.3 87.7a123.07 123.07 0 0 1-87.6 36.3H720c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h40.1C870.5 760 960 670.5 960 560c0-92.7-63.1-170.7-148.6-193.3z"></path>\n</svg>\n<svg ng-if="$ctrl.name === \'draft\'" stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 24 24" ng-attr-height="{{$ctrl.height}}px" ng-attr-width="{{$ctrl.width}}px" xmlns="http://www.w3.org/2000/svg">\n    <path d="M20 2C20.5523 2 21 2.44772 21 3V6.757L19 8.757V4H5V20H19V17.242L21 15.242V21C21 21.5523 20.5523 22 20 22H4C3.44772 22 3 21.5523 3 21V3C3 2.44772 3.44772 2 4 2H20ZM21.7782 8.80761L23.1924 10.2218L15.4142 18L13.9979 17.9979L14 16.5858L21.7782 8.80761ZM13 12V14H8V12H13ZM16 8V10H8V8H16Z"></path>\n</svg>\n<svg ng-if="$ctrl.name === \'play\'" stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024" ng-attr-height="{{$ctrl.height}}px" ng-attr-width="{{$ctrl.width}}px" xmlns="http://www.w3.org/2000/svg">\n    <path d="M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"></path><path d="M719.4 499.1l-296.1-215A15.9 15.9 0 0 0 398 297v430c0 13.1 14.8 20.5 25.3 12.9l296.1-215a15.9 15.9 0 0 0 0-25.8zm-257.6 134V390.9L628.5 512 461.8 633.1z"></path>\n</svg>\n<svg ng-if="$ctrl.name === \'altExpand\'" stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 24 24" ng-attr-height="{{$ctrl.height}}px" ng-attr-width="{{$ctrl.width}}px" xmlns="http://www.w3.org/2000/svg">\n    <path d="m21 15.344-2.121 2.121-3.172-3.172-1.414 1.414 3.172 3.172L15.344 21H21zM3 8.656l2.121-2.121 3.172 3.172 1.414-1.414-3.172-3.172L8.656 3H3zM21 3h-5.656l2.121 2.121-3.172 3.172 1.414 1.414 3.172-3.172L21 8.656zM3 21h5.656l-2.121-2.121 3.172-3.172-1.414-1.414-3.172 3.172L3 15.344z"></path>\n</svg>\n<svg ng-if="$ctrl.name === \'altCollapse\'" stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 24 24" ng-attr-height="{{$ctrl.height}}px" ng-attr-width="{{$ctrl.width}}px" xmlns="http://www.w3.org/2000/svg">\n    <path d="M16.121 6.465 14 4.344V10h5.656l-2.121-2.121 3.172-3.172-1.414-1.414zM4.707 3.293 3.293 4.707l3.172 3.172L4.344 10H10V4.344L7.879 6.465zM19.656 14H14v5.656l2.121-2.121 3.172 3.172 1.414-1.414-3.172-3.172zM6.465 16.121l-3.172 3.172 1.414 1.414 3.172-3.172L10 19.656V14H4.344z"></path>\n</svg>\n<span ng-if="$ctrl.name === \'spinner\'" class="playlist-spinner" ng-style="{\'height\': $ctrl.height + \'px\', \'width\': $ctrl.width + \'px\', \'border-color\': $ctrl.color, \'border-bottom-color\': \'transparent\'}"></span>\n<svg ng-if="$ctrl.name === \'question\'" stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" ng-attr-height="{{$ctrl.height}}px" ng-attr-width="{{$ctrl.width}}px" xmlns="http://www.w3.org/2000/svg">\n    <path d="M289 448h-66v-65h66v65zm-1-98h-64c0-101 96-95.1 96-159 0-35.2-28.8-63.4-64-63.4S192 158 192 192h-64c0-71 57.3-128 128-128s128 56.4 128 127c0 79.9-96 89-96 159z"></path>\n</svg>\n<svg ng-if="$ctrl.name === \'info\'" stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024" ng-attr-height="{{$ctrl.height}}px" ng-attr-width="{{$ctrl.width}}px" xmlns="http://www.w3.org/2000/svg">\n    <path d="M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"></path>\n    <path d="M464 336a48 48 0 1 0 96 0 48 48 0 1 0-96 0zm72 112h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V456c0-4.4-3.6-8-8-8z"></path>\n</svg>\n<svg ng-if="$ctrl.name === \'next\'"  style="color: white" xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-skip-end-fill" viewBox="0 0 16 16" ng-attr-height="{{$ctrl.height}}px" ng-attr-width="{{$ctrl.width}}px">\n    <path d="M12.5 4a.5.5 0 0 0-1 0v3.248L5.233 3.612C4.693 3.3 4 3.678 4 4.308v7.384c0 .63.692 1.01 1.233.697L11.5 8.753V12a.5.5 0 0 0 1 0V4z" fill="white"></path>\n</svg>\n<svg ng-if="$ctrl.name === \'preview\'"  xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-play-fill" viewBox="0 0 16 16" ng-attr-height="{{$ctrl.height}}px" ng-attr-width="{{$ctrl.width}}px">\n    <path d="m11.596 8.697-6.363 3.692c-.54.313-1.233-.066-1.233-.697V4.308c0-.63.692-1.01 1.233-.696l6.363 3.692a.802.802 0 0 1 0 1.393z"/>\n</svg>\n<svg ng-if="$ctrl.name === \'advancedSearch\'" stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 24 24" ng-attr-height="{{$ctrl.height}}px" ng-attr-width="{{$ctrl.width}}px" xmlns="http://www.w3.org/2000/svg">\n    <path fill="none" d="M0 0h24v24H0V0z"></path>\n    <path d="M7 9H2V7h5v2zm0 3H2v2h5v-2zm13.59 7l-3.83-3.83c-.8.52-1.74.83-2.76.83-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5c0 1.02-.31 1.96-.83 2.75L22 17.59 20.59 19zM17 11c0-1.65-1.35-3-3-3s-3 1.35-3 3 1.35 3 3 3 3-1.35 3-3zM2 19h10v-2H2v2z"></path>\n</svg>\n<svg ng-if="$ctrl.name === \'calendar\'" stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024" ng-attr-height="{{$ctrl.height}}px" ng-attr-width="{{$ctrl.width}}px" xmlns="http://www.w3.org/2000/svg">\n    <path d="M880 184H712v-64c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v64H384v-64c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v64H144c-17.7 0-32 14.3-32 32v664c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V216c0-17.7-14.3-32-32-32zm-40 656H184V460h656v380zM184 392V256h128v48c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-48h256v48c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-48h128v136H184z"></path>\n</svg>\n<svg ng-if="$ctrl.name === \'sortAscendingDescending\'" stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024" ng-attr-height="{{$ctrl.height}}px" ng-attr-width="{{$ctrl.width}}px" xmlns="http://www.w3.org/2000/svg">\n    <path d="M868 545.5L536.1 163a31.96 31.96 0 0 0-48.3 0L156 545.5a7.97 7.97 0 0 0 6 13.2h81c4.6 0 9-2 12.1-5.5L474 300.9V864c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V300.9l218.9 252.3c3 3.5 7.4 5.5 12.1 5.5h81c6.8 0 10.5-8 6-13.2z"></path>\n</svg>\n'};class S{static $inject=["$timeout"];constructor(e){this.restrict="A",this.$timeout=e}link(e,t){const n=()=>{this.isOverflowed(t)&&this.addTooltip(t)},i=()=>{this.removeTooltip(t)};t.on("mouseenter",n),t.on("mouseleave",i),e.$on("$destroy",(()=>{t.off("mouseenter",n),t.off("mouseleave",i)}))}isOverflowed(e){return e[0].scrollWidth>e[0].clientWidth}addTooltip(e){e.attr("title",e.text())}removeTooltip(e){e.removeAttr("title")}}const _={bindings:{steps:"<",onSave:"&",templateScreenPath:"<"},controller:class{onSave;steps;templateScreenPath;$scope;$element;$timeout;onTextInputBlurHandler;onSelectChangeHandler;onCheckboxChangeHandler;onRadioChangeHandler;onButtonClickHandler;fieldMap;stepIndex;readyForSelection=!1;static $inject=["$scope","$timeout","$element"];constructor(e,t,n){this.$scope=e,this.$timeout=t,this.$element=n,this.$onInit=this.initialize,this.onTextInputBlurHandler=this.onTextInputBlur.bind(this),this.onSelectChangeHandler=this.onSelectChange.bind(this),this.onCheckboxChangeHandler=this.onCheckboxChange.bind(this),this.onRadioChangeHandler=this.onRadioChange.bind(this),this.onButtonClickHandler=this.onButtonClick.bind(this),this.fieldMap=new WeakMap}initialize(){this.stepIndex=this.steps.findIndex((e=>e.groupId>0)),-1!==this.stepIndex?this.setupStep():this.cancel()}setupStep(){null==this.steps[this.stepIndex].selectedFields&&(this.steps[this.stepIndex].selectedFields=[]),this.steps[this.stepIndex].fields.forEach((e=>{l.waitForClickableSelector(document,e.fieldIdentifier,e.fieldAttributeSelector,e.fieldIdentifierSelector).then((t=>this.onFieldAvailable(e,t)))}))}onFieldAvailable(e,t){this.readyForSelection=!0,this.highlightElement(e,t),this.fieldMap.set(t,e),this.setupListenerForField(e,t)}setupListenerForField(e,t){c.isDirectiveStaffLookup(t)?c.getDirectiveScope(t,"[staff] > div").playlistCallback=e=>this.onStaffLookupDirectiveSelect(t,e):c.isDirectivePatientLookup(t)?c.getDirectiveScope(t,"[patient]").playlistCallback=e=>this.onPatientLookupDirectiveSelect(t,e):c.isDirectiveLabLookup(t)?c.getDirectiveScope(t,"[lab]").playlistCallback=e=>this.onLabLookupDirectiveSelect(t,e):c.isDirectiveProviderLookup(t)?c.getDirectiveScope(t,"[provider] > div").playlistCallback=e=>this.onProviderLookupDirectiveSelect(t,e):c.isDirectiveFacilityLookup(t)?c.getDirectiveScope(t,"[provider] > div").playlistCallback=e=>this.onFacilityLookupDirectiveSelect(t,e):c.isDirectiveResourceLookup(t)?c.getDirectiveScope(t,"[resource] > input").playlistCallback=e=>this.onResourceLookupDirectiveSelect(t,e):c.isDirectiveVisitTypeLookup(t)?c.getDirectiveScope(t,"[visit-type-drop-down] > div#visitLookupId").playlistCallback=e=>this.onVisitTypeLookupDirectiveSelect(t,e):c.isDirectiveVisitStatusLookup(t)?c.getDirectiveScope(t,"[visit-status-drop-down] > div").playlistCallback=e=>this.onVisitStatusLookupDirectiveSelect(t,e):c.isDirectiveReasonLookup(t)?c.getDirectiveScope(t,"[reason-drop-down] > input").playlistCallback=e=>this.onReasonLookupDirectiveSelect(t,e):c.isDirectiveTimeLookup(t)?c.getDirectiveScope(t,"[time] > input").playlistCallback=e=>this.onTimeLookupDirectiveSelect(t,e):c.isDirectiveInsuranceLookup(t)?c.getDirectiveScope(t,"[insurance] > div#insuranceInlineLookup").playlistCallback=e=>this.onInsuranceLookupDirectiveSelect(t,e):c.isDirectiveGuarantorLookup(t)?c.getDirectiveScope(t,"[guarantor] > div#searchGuarantor").playlistCallback=e=>this.onGuarantorLookupDirectiveSelect(t,e):c.isDirectiveSpecialtyLookup(t)?c.getDirectiveScope(t,"[specialty] > div").playlistCallback=e=>this.onSpecialtyLookupDirectiveSelect(t,e):t.matches("input[type='text'],input[type='textbox'],textarea")?t.addEventListener("blur",this.onTextInputBlurHandler):t.matches("select")?t.addEventListener("change",this.onSelectChangeHandler):t.matches("input[type='checkbox']")?t.addEventListener("change",this.onCheckboxChangeHandler):t.matches("input[type='radio']")?e.fieldOptions.forEach((t=>{const n=c.getElementFromXPath(document,t.identifier);this.fieldMap.set(n,e),n.addEventListener("change",this.onRadioChangeHandler)})):t.matches("button, a")&&t.addEventListener("click",this.onButtonClickHandler,!0)}onStaffLookupDirectiveSelect(e,t){this.addSelectedField(e,t.name,t)}onPatientLookupDirectiveSelect(e,t){this.addSelectedField(e,t.name,t)}onLabLookupDirectiveSelect(e,t){this.addSelectedField(e,t.name,t)}onProviderLookupDirectiveSelect(e,t){let n=t[0].Name;t.length>1&&(n=t.map((e=>`[${e.Name}]`)).join(", ")),this.addSelectedField(e,n,t)}onFacilityLookupDirectiveSelect(e,t){let n=t[0].Name;t.length>1&&(n=t.map((e=>`[${e.Name}]`)).join(", ")),this.addSelectedField(e,n,t)}onResourceLookupDirectiveSelect(e,t){this.$timeout((()=>{this.addSelectedField(e,e.value,t)}))}onVisitTypeLookupDirectiveSelect(e,t){this.addSelectedField(e,t.Description,t)}onVisitStatusLookupDirectiveSelect(e,t){this.addSelectedField(e,t.code,t)}onReasonLookupDirectiveSelect(e,t){this.addSelectedField(e,t.name,t)}onTimeLookupDirectiveSelect(e,t){this.addSelectedField(e,t,t)}onInsuranceLookupDirectiveSelect(e,t){this.addSelectedField(e,t.Name,t)}onGuarantorLookupDirectiveSelect(e,t){this.addSelectedField(e,t.name,t)}onSpecialtyLookupDirectiveSelect(e,t){let n=t[0].Name;t.length>1&&(n=t.map((e=>`[${e.Name}]`)).join(", ")),this.addSelectedField(e,n,t)}onTextInputBlur(e){this.addSelectedField(e.target,e.target.value,e.target.value)}onSelectChange(e){this.addSelectedField(e.target,e.target[e.target.selectedIndex].text,e.target[e.target.selectedIndex].text)}onCheckboxChange(e){const t=e.target.checked?"Yes":"No",n=e.target.checked?"true":"false";this.addSelectedField(e.target,t,n)}onRadioChange(e){const t=this.fieldMap.get(e.target).fieldOptions.find((t=>c.getElementFromXPath(document,t.identifier)===e.target));null!=t&&this.addSelectedField(e.target,t.value,t.value)}onButtonClick(e){let t=e.target;"BUTTON"!==t.tagName&&"A"!==t.tagName&&(t=t.closest("button,a")),this.addSelectedField(t,"",""),e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation()}addSelectedField(e,t,n){const i=this.fieldMap.get(e),r=this.steps[this.stepIndex].selectedFields.find((e=>e.workflowDataId===i.workflowDataId));r?(r.instanceValueLabel=t,r.instanceValue=n):this.steps[this.stepIndex].selectedFields.push({...i,instanceValueLabel:t,instanceValue:n}),this.$timeout()}removeField(e){this.steps[this.stepIndex].selectedFields=this.steps[this.stepIndex].selectedFields.filter((t=>t!==e))}resetHighlight(){document.querySelectorAll(".playlist-template-field").forEach((e=>{e.classList.remove("playlist-template-field")}))}highlightElement(e,t){"radio button"===e.fieldType?e.fieldOptions.forEach((e=>{c.getElementFromXPath(document,e.identifier).classList.add("playlist-template-field")})):t.classList.add("playlist-template-field")}cleanupListeners(){document.querySelectorAll(".playlist-template-field").forEach((e=>{e.removeEventListener("blur",this.onTextInputBlurHandler),e.removeEventListener("change",this.onSelectChangeHandler),e.removeEventListener("change",this.onCheckboxChangeHandler),e.removeEventListener("change",this.onRadioChangeHandler),e.removeEventListener("click",this.onButtonClickHandler)}))}async skipToNextGroup(){if(this.stepIndex++,this.stepIndex>=this.steps.length)this.stepIndex=-1;else if(0===this.steps[this.stepIndex].groupId){const e={...this.steps[this.stepIndex].fields[0],fieldsOptions:this.steps[this.stepIndex].fieldOptions};null==e.fieldOptions&&(e.fieldOptions="{}"),"string"!=typeof e.fieldOptions&&(e.fieldOptions=JSON.stringify(e.fieldOptions)),await new i._({steps:[e]},!0,!1).play(),await this.skipToNextGroup()}}async save(){this.doCleanup(),this.anotherGroupExists()?await this.skipToNextGroup():this.stepIndex=-1,-1===this.stepIndex?(this.onSave()(!0,this.steps),this.$timeout((()=>{this.$element.remove()}))):this.setupStep()}anotherGroupExists(){for(let e=this.stepIndex+1;e<this.steps.length;e++)if(this.steps[e].groupId>0)return!0;return!1}doCleanup(){this.cleanupListeners(),this.resetHighlight()}cancel(){this.doCleanup(),this.onSave()(!1),this.$timeout((()=>{this.$element.remove()}))}},templateUrl:"/mobiledoc/jsp/webemr/js/global/playlist/configuration/template/template.html"};class P{$http;static $inject=["$http"];constructor(e){this.$http=e}getCategories(e){return 0===e?this.$http({method:"GET",url:"/mobiledoc/emr/playlist/playlist/category"}):this.$http({method:"GET",url:"/mobiledoc/emr/playlist/cloud/categories"})}getPlaylists(e,t,n,i){return this.$http({method:"POST",url:0===e?"/mobiledoc/emr/playlist/playlists":"/mobiledoc/emr/playlist/cloud/playlists",data:{categoryIds:t.join(","),offset:n,playlistFilterParams:i}})}getCloudPlayListCount(){return this.$http({method:"GET",url:"/mobiledoc/emr/playlist/cloud/count"})}getPlaylist(e,t){let n=e?`/mobiledoc/emr/playlist/playlist/${t}`:`/mobiledoc/emr/playlist/cloud/playlist/${t}`;return this.$http({method:"GET",url:n})}getPlaylistTemplate(e){let t=`/mobiledoc/emr/playlist/playlistTemplate/${e}`;return this.$http({method:"GET",url:t})}setUserFavoriteInstance(e,t){return this.$http({method:"POST",url:`/mobiledoc/emr/playlist/instances/${e}/favorites?action=${t}`})}deleteInstance(e,t,n){return this.$http({method:"POST",url:`/mobiledoc/emr/playlist/instances/${e}/delete`,data:{instanceIds:t,action:n}})}downloadPlaylist(e){return this.$http({method:"POST",url:`/mobiledoc/emr/playlist/cloud/download/${e}`})}saveInstance(e){return this.$http({method:"POST",url:"/mobiledoc/emr/playlist/saveInstance",data:e})}addPlaylistFeedback(e){return this.$http({method:"POST",url:"/mobiledoc/emr/playlist/cloud/feedback",data:{playlistFeedback:e,userName:window.global.TrUserName}})}}var E=n(59),k=n.n(E);class I{configurationService;$scope;$modalInstance;$timeout;concurrencyAlertType;categories=[];selectedCategory={};offset=0;count=20;downloadedLoading=!0;cloudLoading=!0;loaders={newTemplate:!1,detailPanel:!1};shouldDim=!1;shouldShowAdvancedSearch=!1;advancedSearchMode=!1;shouldShowUsageInfo=!1;usageInfoPanelLocation={x:0,y:0};downloadedPlaylists=[];cloudPlaylists=[];cloudPlaylistCount=0;loadedPlaylistDetails={};viewMode=0;selectedPlaylist=void 0;addEditInstance=void 0;bShowAlert=!1;warningPopupMessageDetail={};permissions={};isSaveDisabled=!0;ALL_DOWNLOADED_CATEGORIES="All Downloaded Categories";ALL_CLOUD_CATEGORIES="All Cloud Categories";VIEW_MODE_CLOUD_TAB=1;VIEW_MODE_DOWNLOADED_TAB=0;playlistFeedback;errorMessageForFeedback;isSuccessFeedback=!1;feedbackCharRemaining=500;timeOutOnClose;originalStepsJson;static $inject=["configurationService","$scope","$modalInstance","$timeout","concurrencyAlertType"];searchFilters=[{name:"Reference ID",scope:["Downloaded","Cloud","Drafts"]},{name:"Title",scope:["Downloaded","Cloud","Drafts"]},{name:"Description",scope:["Downloaded","Cloud","Drafts"]},{name:"Downloaded On",scope:["Downloaded","Cloud","Drafts"]},{name:"Downloaded By",operations:["Equals","Not Equals"]},{name:"Objective",operations:["Equals","Not Equals","Contains"]},{name:"Starting Point",operations:["Equals","Not Equals","Contains"]},{name:"Consumer",operations:["Equals","Not Equals","Contains"]},{name:"Specialty",operations:["Equals","Not Equals","Contains"]},{name:"Role",operations:["Equals","Not Equals","Contains"]},{name:"Status",operations:["Equals","Not Equals"],options:["Downloaded","Not Downloaded"]},{name:"Customization",operations:["Equals","Not Equals"],options:["Configurable","Not Configurable"]},{name:"Configuration",operations:["Equals","Not Equals"],options:["Configured","Not Configured"]},{name:"Type",operations:["Equals","Not Equals"],options:["Automated","Guided"]}];searchParams=this.getDefaultSearchParams();failedValidations={};disableSearchBar=!1;displayMsgForSearch="";selectedFilters=[];sortMode="Name";sortOrder="asc";KEYWORD_SEPARATOR=" AND ";NO_PLAYLIST_FOUND_FOR_SEARCH="No Playlists were found based on the search criteria.";constructor(e,t,n,i,r){this.configurationService=e,this.$modalInstance=n,this.$scope=t,this.$timeout=i,this.concurrencyAlertType=r,this.$timeout((()=>this.initialize()))}initialize(){this.initializeSettings(),this.fetchPlayLists(0),this.fetchCloudPlayListCount(),this.getCategories(this.viewMode)}setupDatePicker(){$("#downloadedByDatepicker").datepicker({dateFormat:"mm/dd/yy",minDate:new Date(2023,0,1,0),changeMonth:!0,changeYear:!0,numberOfMonths:1,autoclose:!0,showButtonPanel:!0,onSelect:e=>{this.searchParams.downloadedOn=e,$("#downloadedByDatepicker > .ui-datepicker").hide(),this.$scope.$apply()}}),$("#downloadedByDatepicker > .ui-datepicker").hide(),$("#downloadedOnCalendar, #playlist-advanced-search-downloaded-on-text").click((function(){$("#downloadedByDatepicker > .ui-datepicker").toggle()})),$("#playlist-advanced-search-downloaded-on-text").on("change",(function(){const e=$(this).val();$("#downloadedByDatepicker").datepicker("setDate",e)})),this.adjustdatepickerWidth()}adjustdatepickerWidth(){const e=document.querySelector("#downloadedByDatepicker .ui-datepicker-inline");e&&e.classList.remove("ui-datepicker-inline")}initializeSettings(){this.permissions.deletePlaylist=getPermission("deletePlaylist",window.global.TrUserId),this.permissions.downloadPlaylist=getPermission("downloadPlaylist",window.global.TrUserId),this.permissions.configurePlaylistTemplate=getPermission("configurePlaylistTemplate",window.global.TrUserId),this.permissions.editPublicPlaylistTemplate=getPermission("editPublicPlaylistTemplate",window.global.TrUserId),this.permissions.createPublicPlaylistTemplate=getPermission("createPublicPlaylistTemplate",window.global.TrUserId),this.permissions.sharePlaylistFeedback=getPermission("sharePlaylistFeedback",window.global.TrUserId)}focusOnSearchPlaylistInputTextbox(){document.getElementById("playlist-catalog-search-input")?.focus()}loadMorePlaylist(){if(1===this.viewMode&&(this.cloudLoading||this.cloudPlaylistCount===this.cloudPlaylists.length))return;this.offset+=this.count,this.downloadedLoading=0===this.viewMode,this.cloudLoading=1===this.viewMode;let e=this.getAssociatedCategories(this.selectedCategory);this.searchParams.viewMode=this.viewMode,this.configurationService.getPlaylists(this.viewMode,e,this.offset,JSON.stringify(this.searchParams)).then((e=>{e&&e.data&&"success"===e.data.status&&(0===this.viewMode?this.downloadedPlaylists.push(...e.data.playlists):(this.cloudPlaylists.push(...e.data.playlists),this.cloudPlaylistCount=e.data.count,this.cloudLoading=!1))}))}fetchPlayLists(e,t,n){0===e?this.downloadedLoading=!0:(this.cloudLoading=!0,this.cloudPlaylists=[]),this.selectedCategory=t;let i=this.getAssociatedCategories(t);this.offset=0,this.searchParams.viewMode=this.viewMode,this.searchParams.tagGuidList=i,this.setPlaylistTypeToDisplay(),this.displayMsgForSearch="",this.configurationService.getPlaylists(e,i,this.offset,JSON.stringify("download"===n?this.getDefaultSearchParams():this.searchParams)).then((t=>{t&&t.data&&"success"===t.data.status&&(0===e?(this.downloadedPlaylists=t.data.playlists,this.downloadedLoading=!1):(this.cloudPlaylists=t.data.playlists,this.cloudPlaylistCount=t.data.count,this.cloudLoading=!1),(0===e&&0===this.downloadedPlaylists.length||1===e&&0===this.cloudPlaylists.length)&&(this.displayMsgForSearch=this.NO_PLAYLIST_FOUND_FOR_SEARCH),this.advanceSearchPostCallback(e),this.focusOnSearchPlaylistInputTextbox())}))}advanceSearchPostCallback(e){this.shouldShowAdvancedSearch&&(0===e&&0===this.downloadedPlaylists.length&&(this.displayMsgForSearch=this.NO_PLAYLIST_FOUND_FOR_SEARCH),1===e&&0===this.cloudPlaylists.length&&(this.displayMsgForSearch=this.NO_PLAYLIST_FOUND_FOR_SEARCH),this.toggleAdvancedSearchPanel(),this.searchParams.keywords.length>0&&(this.disableSearchBar=!0))}fetchCloudPlayListCount(){this.configurationService.getCloudPlayListCount().then((e=>{e&&e.data&&"success"===e.data.status&&(this.cloudPlaylistCount=e.data.count,this.cloudLoading=!1)}))}toggleCategory(e){e.expanded=!e.expanded}setViewMode(e){let t=this.viewMode;this.viewMode=e,this.selectedPlaylist=void 0,this.loadedPlaylistDetails={},this.resetSearchParams(),this.resetDefaultSortOrder(),this.getCategories(this.viewMode),this.fetchPlayLists(this.viewMode),t!==this.viewMode&&(1===this.viewMode?this.fetchPlayLists(0):0===this.viewMode&&this.fetchCloudPlayListCount())}getCategories(e){this.configurationService.getCategories(e).then((t=>{if(t&&t.data&&"success"===t.data.status){this.categories=t.data.categories;const n=this.categories.find((e=>"All Categories"===e.name));null!=n&&(n.selected=!0,n.displayName=0===e?this.ALL_DOWNLOADED_CATEGORIES:this.ALL_CLOUD_CATEGORIES)}}))}resetDetailPanelScroll(){const e=document.querySelector(".detail-content-container.vertical-scroll");null!=e&&(e.scrollTop=0)}selectPlaylist(e,t){this.resetDetailPanelScroll();let n=0===this.viewMode;null==t&&e.guid in this.loadedPlaylistDetails?this.selectedPlaylist=this.loadedPlaylistDetails[e.guid]:(this.loaders.detailPanel=!0,this.selectedPlaylist={guid:e.guid},this.configurationService.getPlaylist(n,e.guid).then((n=>{if(n&&n.data&&"success"===n.data.status){this.loaders.detailPanel=!1;let i=n.data.playlist;i.isDownloaded=e.isDownloaded,i.steps=c.getBranchedSteps(i.steps),this.loadedPlaylistDetails[i.guid]=i,this.selectedPlaylist=i,null!=t&&(this.selectedPlaylist.name=t.name,delete this.loadedPlaylistDetails[i.guid]);for(let e in this.selectedPlaylist.tags)this.selectedPlaylist.tags[e]=Object.keys(this.selectedPlaylist.tags[e]).reverse().map((t=>({...this.selectedPlaylist.tags[e][t],key:t})))}else notification.show("error","","Something went wrong while loading Playlist details",2e3),this.loaders.detailPanel=!1})).catch((()=>{notification.show("error","","Something went wrong while loading Playlist details",2e3),this.loaders.detailPanel=!1})))}selectPlaylistTemplate(e,t,n){e.stopPropagation(),this.selectPlaylist(t,n)}close(){this.$modalInstance.dismiss("cancel")}toggleInstanceFavorite(e,t){let n="instance"===t?e.id:e.instances[0]&&e.instances[0].id?e.instances[0].id:0;0===e.isFavorite?(e.isFavorite=1,this.configurationService.setUserFavoriteInstance(n,"setFavorite").then((t=>{t.data&&"success"===t.data.status?notification.show("success","",e.name+" has been successfully added to the favorites list.",2e3):notification.show("error","","Something went wrong while loading favorite details",2e3)})).catch((()=>{notification.show("error","","Something went wrong while loading favorite details",2e3)}))):(e.isFavorite=0,this.configurationService.setUserFavoriteInstance(n,"resetFavorite").then((t=>{t.data&&"success"===t.data.status?notification.show("success","",e.name+" has been successfully removed from the favorites list.",2e3):notification.show("error","","Something went wrong while loading favorite details",2e3)})).catch((()=>{notification.show("error","","Something went wrong while loading favorite details",2e3)})))}openAddEditInstance(e){this.loaders.newTemplate=!0,this.configurationService.getPlaylist(!0,e.guid).then((e=>{if(e&&e.data&&"success"===e.data.status){this.loaders.newTemplate=!1;const t=k().cloneDeep(e.data.playlist.steps);e.data.playlist.steps=c.getBranchedSteps(e.data.playlist.steps),this.addEditInstance=e.data.playlist,this.addEditInstance.originalStepsList=t,this.addEditInstance.steps.forEach((e=>{e.fields.forEach((e=>{e.fieldOptions=JSON.parse(e.fieldOptions)}))})),this.addEditInstance.isShared=0,this.addEditInstance.configurationMode=1}else notification.show("error","","An error occurred while loading Playlist details",2e3),this.loaders.newTemplate=!1})).catch((()=>{notification.show("error","","An error occurred while loading Playlist details",2e3),this.loaders.newTemplate=!1}))}closeAddEditInstance(){this.addEditInstance=void 0,this.initialize()}removeInstanceStep(e,t){e.selectedFields=e.selectedFields.filter((e=>e!==t))}deleteInstance(e,t,n){let i=[t];this.configurationService.deleteInstance(e,i,"instance").then((e=>{e.data&&"success"===e.data.status?notification.show("success","","Playlist Catalog - "+n+" has been deleted successfully",2e3):e.data&&"failed"===e.data.status?notification.show("error","",e.data.message,2e3):notification.show("error","","Something went wrong while deleting instance details",2e3),this.refreshCurrentTabAndCategory()})).catch((()=>{notification.show("error","","Something went wrong while deleting instance details",2e3)}))}editInstance(e){this.configurationService.getPlaylistTemplate(e.id).then((e=>{if(e&&e.data&&"success"===e.data.status){const t=k().cloneDeep(e.data.playlist.steps);e.data.playlist.steps=c.getBranchedSteps(e.data.playlist.steps),this.addEditInstance=e.data.playlist,this.addEditInstance.originalStepsList=t,this.addEditInstance.configurationMode=1}else notification.show("error","","An error occurred while loading Playlist details",2e3)})).catch((()=>{notification.show("error","","An error occurred while loading Playlist details",2e3)}))}filterPlaylist(e){this.UnSelectCategories(),e.selected=!e.selected,this.fetchPlayLists(this.viewMode,e)}UnSelectCategories(){for(let e=0;e<this.categories.length;e++)this.categories[e].selected=!1,"All Categories"!==this.categories[e].name&&this.unSelectChildCategories(this.categories[e])}unSelectChildCategories(e){for(let t=0;t<e.children.length;t++){let n=e.children[t];this.unSelectChildCategories(n),n.selected=!1}}getAssociatedCategories(e){if(!e||"All Categories"===e.name)return[];let t=[];return t.push(e.tagGuid),this.getAllChildCategories(e,t),t}getAllChildCategories(e,t){for(let n=0;n<e.children.length;n++){let i=e.children[n];this.getAllChildCategories(i,t),t.push(i.tagGuid)}}deletePlaylist(e){let t=e.guid,n=e.instances?e.instances.map((e=>e.id)):[];this.configurationService.deleteInstance(t,n,"playlist").then((t=>{t.data&&"success"===t.data.status?(notification.show("success","","Playlist Catalog - "+e.name+" has been deleted successfully",2e3),this.selectedPlaylist=void 0,this.deleteFromLoadedPlaylists(e.guid),e.isDownloaded&&(e.isDownloaded=!1)):t.data&&"failed"===t.data.status?notification.show("error","",t.data.message,2e3):notification.show("error","","Something went wrong while deleting Playlist details",2e3),this.refreshCurrentTabAndCategory()})).catch((()=>{notification.show("error","","Something went wrong while deleting Playlist details",2e3),this.fetchPlayLists(0)}))}downloadPlaylist(e){e.isDownloading=!0,this.configurationService.downloadPlaylist(e.guid).then((t=>{e.isDownloading=!1,t&&t.data&&"success"===t.data.status?(e.isDownloaded=!0,notification.show("success","","Playlist downloaded successfully",2e3),this.postDownloadingPlaylistSuccess(e)):t.data&&"failed"===t.data.status?(notification.show("error","",t.data.message,2e3),this.postDownloadingPlaylistFailure(e)):(notification.show("error","","Something went wrong while downloading Playlist",2e3),this.postDownloadingPlaylistFailure(e))})).catch((()=>{notification.show("error","","Something went wrong while downloading Playlist",2e3),this.postDownloadingPlaylistFailure(e)}))}postDownloadingPlaylistFailure(e){this.deleteFromLoadedPlaylists(e.guid),this.selectedPlaylist=void 0,this.refreshCurrentTabAndCategory(),this.viewMode===this.VIEW_MODE_CLOUD_TAB&&this.fetchPlayLists(this.VIEW_MODE_DOWNLOADED_TAB,void 0,"download")}postDownloadingPlaylistSuccess(e){this.refreshPlaylistDetails(e),this.updateCloudTabPlaylistDetailsPostDownload(e),this.viewMode===this.VIEW_MODE_DOWNLOADED_TAB&&this.getCategories(this.VIEW_MODE_DOWNLOADED_TAB),this.fetchPlayLists(this.VIEW_MODE_DOWNLOADED_TAB,void 0,"download")}refreshPlaylistDetails(e){this.deleteFromLoadedPlaylists(e.guid),this.selectedPlaylist&&this.selectedPlaylist.guid===e.guid&&this.selectPlaylist(e)}updateCloudTabPlaylistDetailsPostDownload(e){let t=this.getPlaylistFromCloudPlaylist(e.guid);t&&(t.isDownloaded=!0)}deleteFromLoadedPlaylists(e){e in this.loadedPlaylistDetails&&delete this.loadedPlaylistDetails[e]}getPlaylistFromCloudPlaylist(e){if(!this.cloudPlaylists||0===this.cloudPlaylists.length)return null;let t=this.cloudPlaylists.filter((t=>t.guid===e));return t.length>0?t[0]:null}refreshCurrentTabAndCategory(){this.fetchPlayLists(this.viewMode),this.getCategories(this.viewMode)}showWarningPopup(e,t,n){let i;this.shouldDim=!0,"instance"===e?i="Are you sure you want to <strong>permanently delete</strong> this Playlist template:<br><strong>"+n.name+"</strong> ?":"playlist"!==e||t.isTemplate?"playlist"===e&&t.isTemplate&&(i="This Playlist contains multiple templates that will permanently be deleted. Are you sure you want to <strong>delete</strong> this Playlist:<br><strong>"+t.name+"</strong> and all of its templates ?<br><br><br><strong>Note: </strong>You can download the original Playlist from the Cloud again after it has been deleted. However, any customized templates of the Playlist will not be retained."):i="Are you sure you want to <strong>delete</strong> the Playlist:<br><strong>"+t.name+"</strong> ?<br><br><br><strong>Note: </strong>You can download the original Playlist from the Cloud again after it has been deleted.",this.warningPopupMessageDetail=this.getWarningPopupMessageDetails(i),this.bShowAlert=!0,this.deletePlaylistInstance=()=>{"instance"===e?this.deleteInstance(t,n.id,n.name):this.deletePlaylist(t),this.shouldDim=!1},this.cancelDeletePlaylistInstance=()=>{this.bShowAlert=!1,this.shouldDim=!1}}getWarningPopupMessageDetails(e){let t={title:"<strong>Playlist Catalog - Delete Confirmation</strong>"};return t.beforeList=e,t.type=this.concurrencyAlertType.WARNING,t.afterList="",t.closeMsg="",t}startConfiguration(){const e=document.querySelectorAll(".playlist-configuration, .playlist-configuration-backdrop");e.forEach((e=>{e.classList.add("playlist-configuration-hide")}));const t=document.querySelectorAll(".playlist-launcher-overlay");t.forEach((e=>{e.classList.add("playlist-configuration-hide")}));const n=angular.element(document.getElementById("webemrApp")),i=c.getAngularDependency("$compile"),r=n.scope().$new(!0);r.steps=JSON.parse(angular.toJson(this.addEditInstance.steps)),r.onSave=(n,i)=>{t.forEach((e=>{e.classList.remove("playlist-configuration-hide")})),e.forEach((e=>{e.classList.remove("playlist-configuration-hide")})),document.querySelectorAll("playlist-template").forEach((e=>e.remove())),n&&(this.addEditInstance.steps=i)},r.templateScreenPath=this.addEditInstance.templateScreenPath;let a=angular.element('<playlist-template steps="steps" on-save="onSave" template-screen-path="templateScreenPath"></playlist-template>');i(a)(r),angular.element(document.body).prepend(a)}setStaffLookupSearchParamValue(e){e&&(this.searchParams.downloadedBy=e.staff.id,this.searchParams.downloadedByLabel=e.staff.name,this.searchParams.downloadedByDefaultSelection=e.staff.name+":"+e.staff.id)}clearDownloadedBy(){this.searchParams.downloadedBy=void 0,this.searchParams.downloadedByLabel="",this.searchParams.downloadedByDefaultSelection=""}showUsageInfo(e){this.shouldDim=!0,this.shouldShowUsageInfo=!0,this.usageInfoPanelLocation=e.target.getBoundingClientRect()}hideUsageInfo(){this.shouldDim=!1,this.shouldShowUsageInfo=!1}toggleAdvancedSearchPanel(){this.shouldDim=!this.shouldDim,this.failedValidations={},this.shouldShowAdvancedSearch=!this.shouldShowAdvancedSearch,this.shouldShowAdvancedSearch&&this.$timeout((()=>this.setupDatePicker())),this.setKeyWordsSearchParam()}setKeyWordsSearchParam(){this.searchParams.searchText.length>0&&(this.searchParams.keywordSearch=angular.copy(this.searchParams.searchText))}getOperationsForFilter(e){const t=this.searchFilters.find((t=>t.name===e));return t?t.operations:[]}getOptionsForFilter(e){const t=this.searchFilters.find((t=>t.name===e));return t?t.options:[]}addSearchFilter(){this.searchFilters.forEach((e=>{this.selectedFilters.push({name:e.name,operation:"",value:""})}))}async doAdvancedSearch(){this.validateSearchInput()&&(null!==this.searchParams.currentScreen&&void 0!==this.searchParams.currentScreen?(this.searchParams.filteredDownloadedWorkflowList=await c.getCurrentScreenExecutablePlaylists(this.viewMode),this.searchParams.currentScreenWorkflowList=angular.copy(this.searchParams.filteredDownloadedWorkflowList)):(this.searchParams.filteredDownloadedWorkflowList=[],this.searchParams.currentScreenWorkflowList=[]),this.setKeywords(),this.fetchPlayLists(this.viewMode))}validateSearchInput(){if(void 0!==this.searchParams.downloadedOn&&""!==this.searchParams.downloadedOn){if(!moment(this.searchParams.downloadedOn,"MM/DD/YYYY",!0).isValid())return this.failedValidations.downloadedOn=!0,this.failedValidations.errorMsg='An invalid date was entered in the "Downloaded On" field',!1;if(parseInt(this.searchParams.downloadedOn.trim().slice(-4))<2023)return this.failedValidations.downloadedOn=!0,this.failedValidations.errorMsg='Enter a year greater than or equal to 2023 in the "Downloaded On" field',!1}return!0}setSortMode(e){this.sortMode=e,this.searchParams.sortMode=this.sortMode,this.sortOrder="Most Used"===e||"Most Downloaded"===e||"Release Date"===e||"Download Date"===e?"desc":"asc",this.searchParams.sortOrder=this.sortOrder,this.refreshCurrentTabAndCategory()}toggleSortOrder(){this.sortOrder="asc"===this.sortOrder?"desc":"asc",this.searchParams.sortOrder=this.sortOrder,this.refreshCurrentTabAndCategory()}setKeywords(){const e=[];this.searchParams.keywords="",this.searchParams.name&&e.push('Name: "'+this.searchParams.name+'"'),this.searchParams.description&&e.push('Description: "'+this.searchParams.description+'"'),this.setPlaylistTypeToDisplay(),this.searchParams.type&&e.push("Type: "+this.searchParams.type.replaceAll("How-To","Guided")),this.searchParams.referenceId&&e.push('Reference ID: "'+this.searchParams.referenceId+'"'),1===this.viewMode&&void 0!==this.searchParams.downloaded&&e.push("Downloaded: "+(1===this.searchParams.downloaded?"Yes":"No")),0===this.viewMode&&(this.searchParams.downloadedBy&&e.push('Downloaded By: "'+this.searchParams.downloadedByLabel+'"'),this.searchParams.downloadedOn&&e.push("Downloaded On: "+this.searchParams.downloadedOn),this.searchParams.configured&&e.push("Configured: "+this.searchParams.configured)),void 0!==this.searchParams.configurable&&e.push("Configurable: "+(1===this.searchParams.configurable?"Yes":"No")),this.searchParams.keywordSearch&&e.push('Keywords: "'+this.searchParams.keywordSearch+'"'),this.searchParams.currentScreen&&e.push("Current Screen: "+this.searchParams.currentScreen),this.searchParams.searchText=angular.copy(this.searchParams.keywordSearch),this.searchParams.keywords=e.join(this.KEYWORD_SEPARATOR)}clearSearch(){this.shouldShowAdvancedSearch&&this.toggleAdvancedSearchPanel(),this.resetSearchParams(),this.fetchPlayLists(this.viewMode)}setPlaylistTypeToDisplay(){this.searchParams.typeList&&(this.searchParams.type=Object.values(this.searchParams.typeList).filter((e=>!1!==e)).join(","))}resetSearchParams(){this.searchParams=this.getDefaultSearchParams(),this.disableSearchBar=!1}resetDefaultSortOrder(){this.sortMode="Name",this.sortOrder="asc"}exitAdvancedSearchMode(){this.advancedSearchMode=!1}formatDate(e){return new Date(e)}getDefaultSearchParams(){return{sortMode:"Name",sortOrder:"asc",searchText:"",keywords:"",typeList:{0:"Automation",1:"How-To"},downloadedByDefaultSelection:"",keywordSearch:""}}cancelSearchPopup(){this.clearSearch()}openPlaylistFeedbackPopup(e){this.isSuccessFeedback=!1,document.getElementById("playlist-feedback-id").classList.add("in"),document.getElementById("playlist-feedback-id").focus(),$("#playlist-feedback-id").position({my:"left+5 bottom-30",at:"left bottom",of:$("#"+e.currentTarget.id),collision:"none none"})}closePlaylistFeedBack(){document.getElementById("playlist-feedback-id").classList.remove("in"),this.playlistFeedback="",this.feedbackCharRemaining=500,this.errorMessageForFeedback="",clearTimeout(this.timeOutOnClose)}}var C=n(334);let L;function D(){const e=document.getElementsByClassName("playlist-launcher-overlay");if(e.length>0)return void Array.from(e).forEach((e=>e.remove()));const t=document.createElement("div");t.className="playlist-launcher-overlay",document.body.appendChild(t),c.getAngularDependency("$ocLazyLoad").load({name:"playlist",files:["/mobiledoc/jsp/webemr/js/global/playlist/launcher/launcher.css","/mobiledoc/jsp/webemr/useruidefault/userdefaultservice.js"]}).then((()=>{const e=angular.element(document.getElementById("webemrApp")),n=c.getAngularDependency("$compile"),i=e.scope().$new(!0);let r=angular.element("<playlist-launcher></playlist-launcher>");n(r)(i),angular.element(t).append(r)}))}function x(e){if("Control"===e.key){if(document.getElementsByClassName("floatingPanelPlaylistLauncher").length>0)return;L&&Date.now()-L<=1e3?(D(),L=void 0):L=Date.now()}else L=void 0}const T=()=>{(()=>{const e=()=>{angular.module("playlist",["providerlookup","lablookup","guarantorlookup","timelookup","visitStatusLookup","visitTypeLookup","reasonLookup","resourceLookup","insurancelookup","specialtylookup","stafflookup","facilitylookup","patientlookup"]).component("playlistProgressWindow",v).component("playlistInstruction",w).component("playlistIcon",b).component("playlistTemplate",_).directive("overflowTooltip",["$timeout",e=>new S(e)]).component("playlistIconLauncher",C.V).service("launcherService",m).component("playlistLauncher",g).service("configurationService",P).controller("configurationController",I).directive("whenScrolled",(function(){return function(e,t,n){const i=t[0];t.bind("scroll",(function(){i.scrollTop+i.offsetHeight>=i.scrollHeight&&e.$apply(n.whenScrolled)}))}})).component("templateConfiguration",s).component("playlistFeedback",o),document.addEventListener("keyup",x),c.getAngularDependency("$ocLazyLoad").load({name:"playlist",files:["/mobiledoc/jsp/webemr/js/global/playlist/base.css"]}),isItemKeyEnabled("CentralEnablePlaylistRecorder")&&n.e(434).then(n.bind(n,492)).then((e=>{e.init()}))};null!=angular.element(document.getElementById("webemrApp")).injector()?e():window.addEventListener("angularAppReady",e,{once:!0})})(),(e=>{const t=()=>{window.floatingButton.registerItem({key:"playlist",icon:'<span class="playlist-icon-container"><i class="playlist-icon"></i></span>',notificationCount:0,onClick:e,preferredIndex:0,title:"Playlists can also be accessed using CTRL + CTRL"}),(async()=>{await d(),p()})()};null!=window.floatingButton?t():document.addEventListener("floatingButtonAvailable",t,{once:!0})})(D)}},869:(e,t,n)=>{"use strict";n.r(t),n.d(t,{LauncherService:()=>i});class i{$http;static $inject=["$http"];constructor(e){this.$http=e}getPlaylists(){return this.$http({method:"GET",url:"/mobiledoc/emr/playlist"})}getCloudPlayListFirstStep(){return this.$http({method:"GET",url:"/mobiledoc/emr/playlist/cloud/playlistFirstSteps"})}getPlaylistsWithInstances(e,t){let n=JSON.stringify({searchText:t});return this.$http({method:"POST",url:"/mobiledoc/emr/playlist/playlists",data:{categoryIds:e,playlistFilterParams:n}})}getInstances(e,t,n){return this.$http({method:"GET",url:"/mobiledoc/emr/playlist/instances",params:{searchText:e,sequenceIds:t.join(","),isFavoriteFilter:n?1:0}})}getInstance(e){return this.$http({method:"GET",url:`/mobiledoc/emr/playlist/instances/${e}`})}setUserFavoriteInstance(e,t){return this.$http({method:"POST",url:`/mobiledoc/emr/playlist/instances/${e}/favorites?action=${t}`})}deleteInstance(e){return this.$http({method:"POST",url:`/mobiledoc/emr/playlist/instances/${e}/delete`})}}},543:(e,t,n)=>{"use strict";t.c=void 0;const i=n(130);t.c=()=>{if(null!=localStorage.getItem("floatingButtonPosition")){const e=localStorage.getItem("floatingButtonPosition");if(null!==e){const t=JSON.parse(e),n={floatingButtonPosition:{top:"",left:""}};n.floatingButtonPosition={top:t.top,left:t.left},r(n)}}};const r=e=>{try{(0,i.getAngularDependency)("UserDefaultService").setUserDefaultsBySyncCall("floatingButton",e,window.global.TrUserId)}catch(e){window.notification.show("error","","error occurred while saving floating button position",2e3)}}},348:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setup=void 0;const i=n(852);t.setup=()=>{window.isPlaylistEnabled()&&Promise.resolve().then((()=>n(369))).then((e=>{e.init()})),window.addEventListener("load",(()=>i.init()),{once:!0})}},861:(e,t,n)=>{"use strict";t.G=void 0;const i=n(130);class r{constructor(e,t,n,i,r,a){this.onClose=()=>1,this.responseMessage="",this.feedbackCharLimit=500,this.configurationService=e,this.isSuccessFeedback=t,this.playlistFeedback=n,this.feedbackCharRemaining=i,this.errorMessageForFeedback=r,this.timeOutOnClose=a}refreshRemainingCharacters(){const e=this.playlistFeedback?this.playlistFeedback.length:0;if(e>500)return void(this.playlistFeedback=this.playlistFeedback.slice(0,this.feedbackCharLimit));const t=this.feedbackCharLimit-e;this.feedbackCharRemaining=t}addPlaylistFeedback(){if(!i.getAngularDependency("dataTruncUtilityService").getTextFieldWidthsFromTable("web_playlist_catalog_feedback","playlistFeedbackPopup","orangetheme"))return!1;this.configurationService.addPlaylistFeedback(this.playlistFeedback).then((e=>{e.data&&"success"===e.data.status?(this.errorMessageForFeedback="",this.responseMessage="Thanks for your feedback.",this.isSuccessFeedback=!0,this.timeOutOnClose=window.setTimeout((()=>{this.onClose()}),5e3)):e.data&&"failed"===e.data.status&&(this.errorMessageForFeedback=e.data.message)})).catch((()=>{this.errorMessageForFeedback="Something went wrong while submitting feedback"}))}}t.G=r,r.$inject=["configurationService"]},37:(e,t)=>{"use strict";t.L=void 0;class n{constructor(e,t){this.addEditInstance={configurationMode:1,instanceName:"",steps:[],guid:"",instanceId:0,workflowDataId:0,isShared:0,originalStepsList:[]},this.onClose=()=>1,this.onTemplateConfiguration=()=>1,this.permissions={createPublicPlaylistTemplate:!1},this.concurrencyAlertType={WARNING:""},this.isTemplateNameExists=!0,this.saveButtonTitle="",this.templateDirtyFlag=!1,this.showDirtyTemplatePopup=!1,this.dirtyTemplateDetails={},this.configurationService=e,this.concurrencyAlertType=t}$postLink(){this.addFieldDescriptionsToSelectedFields(),this.addFieldDetailsToSelectedFields()}addFieldDescriptionsToSelectedFields(){this.addEditInstance.steps.forEach((e=>{(e.selectedFields||[]).forEach((t=>{if(null!=t.fieldDescription)return;const n=e.fields.find((e=>e.guid===t.guid));null!=n&&null!=n.fieldDescription&&(t.fieldDescription=n.fieldDescription)}))}))}addFieldDetailsToSelectedFields(){this.addEditInstance.steps.forEach((e=>{e.fields.forEach((e=>{"string"==typeof e.fieldOptions&&(e.fieldOptions=JSON.parse(e.fieldOptions))})),e.selectedFields&&e.selectedFields.forEach((e=>{"string"==typeof e.fieldOptions&&(e.fieldOptions=JSON.parse(e.fieldOptions)),this.setInstanceValueDetails(e)}))}))}validateAddEditInstance(){return this.isTemplateNameExists=!!(this.addEditInstance.instanceName&&this.addEditInstance.instanceName.length>0),this.isTemplateNameExists}setTemplateDirtyFlag(){this.templateDirtyFlag=!0}onDirtyTemplateDiscard(){this.showDirtyTemplatePopup=!1,this.templateDirtyFlag=!1,this.onClose()}onDirtyTemplateCancel(){this.showDirtyTemplatePopup=!1}closeAddEditInstance(){this.templateDirtyFlag?(this.showDirtyTemplatePopup=!0,this.dirtyTemplateDetails={title:"<strong>Playlist Template - Unsaved Data</strong>",beforeList:"You have unsaved data on this window. Are you sure you want to <strong>Exit & Discard</strong> the changes made to this window?",type:this.concurrencyAlertType.WARNING,afterList:"",closeMsg:""}):this.onClose()}saveAddEditInstance(){this.addEditInstance.steps.filter((e=>e.groupId>0)).forEach((e=>{(e.selectedFields||[]).forEach((e=>{null!=e.instanceValue&&"object"==typeof e.instanceValue&&(e.instanceValue=angular.toJson(e.instanceValue))}))})),this.validateAddEditInstance()&&this.configurationService.saveInstance(this.prepareInstance(this.addEditInstance)).then((e=>{e&&e.data&&"success"===e.data.status?this.onClose():e.data&&"failed"===e.data.status?window.notification.show("error","",e.data.message,2e3):window.notification.show("error","","An error occurred while saving Playlist details",2e3)})).catch((()=>{window.notification.show("error","","An error occurred while saving Playlist details",2e3)}))}prepareInstance(e){return{instanceId:e.instanceId,workflowGuid:e.guid,instanceName:e.instanceName,workflowDataId:e.workflowDataId,isShared:e.isShared,steps:this.getPreparedSteps(e.steps,e.originalStepsList)}}getPreparedSteps(e,t){const n=[];return t.forEach((t=>{if(t.isBranchingStep)t.isStepTemplated?n.push(...this.getEligibleTemplateBranch(e,t.branchGroupGuid)):t.branches.forEach((t=>{var i;n.push(...this.getPreparedSteps(e,null!==(i=t.steps)&&void 0!==i?i:[]))}));else if(t.groupId>0){const i=e.find((e=>e.groupId===t.groupId));i&&n.push(i)}else n.push(t)})),n}getEligibleTemplateBranch(e,t){return e.filter((e=>e.branchGroupGuid===t))}isConfigurationPending(){const e=this.getFailingStep();return null==e||null!=this.addEditInstance.instanceName&&0!==this.addEditInstance.instanceName.trim().length?null!=e?(1===this.addEditInstance.configurationMode?this.saveButtonTitle="Select and define a Control to save":this.saveButtonTitle="Click 'Configure' to add optional steps in order to save",!0):null==this.addEditInstance.instanceName||0===this.addEditInstance.instanceName.trim().length?(this.saveButtonTitle="Enter a Template Name in order to save",!0):(this.saveButtonTitle="",!1):(1===this.addEditInstance.configurationMode?this.saveButtonTitle="Enter a Template Name and select/define Controls in order to save":this.saveButtonTitle="Enter a Template Name and define controls from the 'Configure' button in order to save",!0)}getFailingStep(){return this.addEditInstance.steps.find((e=>0!==e.groupId&&(null==e.selectedFields||0===e.selectedFields.length||!!e.selectedFields.some((e=>(null==e.instanceValue||""===e.instanceValue||0===Object.keys(e.instanceValue).length)&&"button"!==e.fieldType&&"a"!==e.fieldType)))))}setStaffLookupValue(e){e.instanceValue=e.instanceValueSelected.staff,e.instanceValueLabel=e.instanceValue.name,this.setTemplateDirtyFlag()}onTextFieldUpdate(e){e.instanceValueLabel=e.instanceValue,this.setTemplateDirtyFlag()}addTemplateField(e,t){null==e.selectedFields&&(e.selectedFields=[]),"checkbox"===t.fieldType&&(t.instanceValue="false"),e.selectedFields.push(JSON.parse(angular.toJson(t))),this.setTemplateDirtyFlag()}addAllTemplateFields(e){e.fields.forEach((t=>this.addTemplateField(e,t)))}removeTemplateField(e,t){e.selectedFields=(e.selectedFields||[]).filter((e=>e!==t)),this.setTemplateDirtyFlag()}startConfiguration(){this.setTemplateDirtyFlag(),this.onTemplateConfiguration()}setInstanceValueDetails(e){if(e.instanceValueLabel="",e.instanceValue){let t,n,i;switch(e.fieldType){case"checkbox":e.instanceValueLabel="true"===e.instanceValue?"Yes":"No";break;case"facility-lookup":t=JSON.parse(e.instanceValue),n=t[0].Name,t.length>1&&(n=t.map((e=>`[${e.Name}]`)).join(", ")),e.instanceValueLabel=n,e.instanceValueId=t[0].Id;break;case"provider-lookup":"string"==typeof e.instanceValue&&(e.instanceValueSelected={provider:JSON.parse(e.instanceValue)[0]},i=JSON.parse(e.instanceValue)),n=i[0].Name,i.length>1&&(n=i.map((e=>`[${e.Name}]`)).join(", ")),e.instanceValueLabel=n;break;case"specialty-lookup":e.instanceValueSelected={specialty:{},specialtyList:JSON.parse(e.instanceValue)},i=JSON.parse(e.instanceValue),n=i[0].Name,i.length>1&&(n=i.map((e=>`[${e.Name}]`)).join(", ")),e.instanceValueLabel=n;break;case"staff-lookup":t=JSON.parse(e.instanceValue),e.instanceValueLabel=t.name,e.instanceValueSelected=t.id;break;case"guarantor-lookup":e.instanceValueSelected={guarantor:JSON.parse(e.instanceValue)},e.instanceValueLabel=JSON.parse(e.instanceValue).name;break;case"reason-lookup":e.instanceValueSelected=JSON.parse(e.instanceValue),e.instanceValueLabel=e.instanceValueSelected.name;break;case"insurance-lookup":e.instanceValueLabel=JSON.parse(e.instanceValue).Name,e.instanceValueSelected={insurance:JSON.parse(e.instanceValue)};break;case"visit-type-lookup":e.instanceValue=JSON.parse(e.instanceValue),e.instanceValueLabel=e.instanceValue.Description;break;case"visit-status-lookup":t=JSON.parse(e.instanceValue),e.instanceValueLabel=t.code,e.instanceValueSelected={code:e.instanceValueLabel};break;case"resource-lookup":e.instanceValueSelected={id:e.instanceValue};break;case"patient-lookup":e.instanceValueSelected={patient:JSON.parse(e.instanceValue)},e.instanceValueLabel=JSON.parse(e.instanceValue).name;break;case"lab-lookup":e.instanceValueSelected={lab:JSON.parse(e.instanceValue)},e.instanceValueLabel=JSON.parse(e.instanceValue).name;break;case"time-lookup":e.instanceValueSelected={time:e.instanceValue},e.instanceValueLabel=e.instanceValue;break;default:e.instanceValueLabel=e.instanceValue}}}setInsuranceLookup(e){e.instanceValue=e.instanceValueSelected.insurance,this.setTemplateDirtyFlag()}setFacilityLookup(e){Object.keys(e.instanceValueSelected.facility).length>0?e.instanceValue=[e.instanceValueSelected.facility]:e.instanceValue="",this.setTemplateDirtyFlag()}setVisitStatusLookup(e,t){t?(e.instanceValue="",e.instanceValueSelected=""):e.instanceValue=e.instanceValueSelected,this.setTemplateDirtyFlag()}setReasonLookupValue(e,t){t?(e.instanceValue="",e.instanceValueSelected=""):e.instanceValueSelected.name&&(e.instanceValue=Object.assign({},e.instanceValueSelected)),this.setTemplateDirtyFlag()}setResourceLookupValue(e,t){t?(e.instanceValue="",e.instanceValueSelected=""):e.instanceValue=e.instanceValueSelected.id,this.setTemplateDirtyFlag()}setPatientLookupValue(e){e.instanceValue=e.instanceValueSelected.patient,this.setTemplateDirtyFlag()}setSpecialtyLookupValue(e){e.instanceValue=e.instanceValueSelected.specialtyList,this.setTemplateDirtyFlag()}setProviderLookupValue(e){Object.keys(e.instanceValueSelected.provider).length>0?e.instanceValue=[e.instanceValueSelected.provider]:e.instanceValue="",this.setTemplateDirtyFlag()}setLabLookupValue(e){e.instanceValue=e.instanceValueSelected.lab,this.setTemplateDirtyFlag()}setTimeLookupValue(e){e.instanceValue=e.instanceValueSelected.time,this.setTemplateDirtyFlag()}setGuarantorLookupValue(e){e.instanceValue=e.instanceValueSelected.guarantor,this.setTemplateDirtyFlag()}}t.L=n,n.$inject=["configurationService","concurrencyAlertType"]},967:function(e,t){"use strict";var n=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,a){function s(e){try{l(i.next(e))}catch(e){a(e)}}function o(e){try{l(i.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,o)}l((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.ExecutorService=void 0,t.ExecutorService=class{constructor(e){this.$http=e}logPlaylistExecution(e,t){return n(this,void 0,void 0,(function*(){return this.$http({method:"POST",url:`/mobiledoc/emr/playlist/playlist/${e}/${t}/execution`})}))}}},334:(e,t,n)=>{"use strict";t.V=void 0;const i=n(955);t.V={bindings:{type:"<"},controller:i.PlaylistIconLauncherController,templateUrl:"/mobiledoc/jsp/webemr/js/global/playlist/misc/playlistIconLauncher/playlistIconLauncher.html"}},955:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PlaylistIconLauncherController=void 0;class n{constructor(e,t,n,i){this.$element=e,this.$attrs=t,this.$compile=n,this.$ocLazyLoad=i,this.playlistFeatureEnabled=!1,this.playlistCount=0,this.type=""}$postLink(){this.playlistFeatureEnabled=window.isPlaylistEnabled(),this.type=this.$attrs.type,this.getPlaylistCount(),this.loadCssFile()}loadCssFile(){this.$ocLazyLoad.load({name:"playlist",files:["/mobiledoc/jsp/webemr/js/global/playlist/misc/playlistIconLauncher/playlistIconLauncher.css"]})}openPlaylistLauncher(){if(this.playlistFeatureEnabled&&this.type&&("popup"===this.type||"modal"===this.type)){const e=document.createElement("div");e.className="playlist-launcher-overlay",document.body.appendChild(e),this.$ocLazyLoad.load({name:"playlist",files:["/mobiledoc/jsp/webemr/js/global/playlist/launcher/launcher.css","/mobiledoc/jsp/webemr/useruidefault/userdefaultservice.js"]}).then((()=>{const t=document.getElementById("webemrApp");if(t){const n=angular.element(t).scope().$new(!0);let i="";"popup"===this.type&&(i="floatingPanelPlaylistLauncher");const r=angular.element(`<playlist-launcher class="${i}"></playlist-launcher>`);if("popup"===this.type){const e=document.getElementsByClassName("playlist-icon-launcher-toolbar-container")[0].getBoundingClientRect();r.css("position","absolute"),r.css("left",e.left+30),r.css("top",e.top-100)}this.$compile(r)(n),angular.element(e).append(r)}}))}}getPlaylistCount(){this.playlistFeatureEnabled&&this.type&&("popup"===this.type||"modal"===this.type)&&void 0!==window.floatingButton&&window.floatingButton.onItemUpdate("playlist",(e=>{this.playlistCount=e}))}}t.PlaylistIconLauncherController=n,n.$inject=["$element","$attrs","$compile","$ocLazyLoad"]},130:function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,a){function s(e){try{l(i.next(e))}catch(e){a(e)}}function o(e){try{l(i.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,o)}l((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.isSecuritySettingCheckSuccess=t.isItemKeyCheckSuccess=t.isBranchConditionSatisfied=t.areConditionsSatisfied=t.getEligibleBranch=t.getBranchedSteps=t.isPlaylistExecutable=t.isValidInstanceOrPlaylist=t.showPlaylistPopups=t.hidePlaylistPopups=t.getExecutablePlaylists=t.getAllPlaylists=t.getCurrentScreenExecutablePlaylists=t.isValidSelector=t.groupBy=t.getElementFromXPath=t.getDirectiveScope=t.isDirectiveSpecialtyLookup=t.isDirectiveGuarantorLookup=t.isDirectiveInsuranceLookup=t.isDirectiveTimeLookup=t.isDirectiveReasonLookup=t.isDirectiveVisitStatusLookup=t.isDirectiveVisitTypeLookup=t.isDirectiveResourceLookup=t.isDirectiveFacilityLookup=t.isDirectiveProviderLookup=t.isDirectiveLabLookup=t.isDirectivePatientLookup=t.isDirectiveStaffLookup=t.processAngularUpdates=t.getAngularDependency=void 0;const r=n(869),a=n(505);t.getAngularDependency=e=>{const t=document.getElementById("webemrApp");if(null!=t)return angular.element(t).injector().get(e)},t.processAngularUpdates=()=>{const e=(0,t.getAngularDependency)("$timeout");return new Promise((t=>e(t)))},t.isDirectiveStaffLookup=e=>null!=e&&(e.matches("[staff] *")||e.matches("[staff]")),t.isDirectivePatientLookup=e=>null!=e&&(e.matches("[patient] *")||e.matches("[patient]")),t.isDirectiveLabLookup=e=>null!=e&&(e.matches("[lab] *")||e.matches("[lab]")),t.isDirectiveProviderLookup=e=>null!=e&&(e.matches("[provider] *")||e.matches("[provider]")),t.isDirectiveFacilityLookup=e=>null!=e&&(e.matches("[facility] *")||e.matches("[facility]")),t.isDirectiveResourceLookup=e=>null!=e&&(e.matches("[resource-lookup] *")||e.matches("[resource-lookup]")),t.isDirectiveVisitTypeLookup=e=>null!=e&&(e.matches("[visit-type-drop-down] *")||e.matches("[visit-type-drop-down]")),t.isDirectiveVisitStatusLookup=e=>null!=e&&(e.matches("[visit-status-drop-down] *")||e.matches("[visit-status-drop-down]")),t.isDirectiveReasonLookup=e=>null!=e&&(e.matches("[reason-drop-down] *")||e.matches("[reason-drop-down]")),t.isDirectiveTimeLookup=e=>null!=e&&(e.matches("[time] *")||e.matches("[time]")),t.isDirectiveInsuranceLookup=e=>null!=e&&(e.matches("[insurance] *")||e.matches("[insurance]")),t.isDirectiveGuarantorLookup=e=>null!=e&&(e.matches("[guarantor] *")||e.matches("[guarantor]")),t.isDirectiveSpecialtyLookup=e=>null!=e&&(e.matches("[specialty] *")||e.matches("[specialty]")),t.getDirectiveScope=(e,t)=>{let n=angular.element(e).scope();const i=e.closest(t);return null!=i&&(n=angular.element(i).scope()),n},t.getElementFromXPath=(e,t)=>""===t||null===t?null:document.evaluate(t,e,null,XPathResult.ANY_UNORDERED_NODE_TYPE,null).singleNodeValue,t.groupBy=(e,t)=>{const n=new Map;return e.forEach((e=>{var i;const r=e[t];n.has(r)?null===(i=n.get(r))||void 0===i||i.push(e):n.set(r,[e])})),n},t.isValidSelector=e=>{if(null==e)return!1;try{return document.querySelector(e),!0}catch(e){return!1}},t.getCurrentScreenExecutablePlaylists=e=>i(void 0,void 0,void 0,(function*(){const n=yield(0,t.getAllPlaylists)(e);return(0,t.getExecutablePlaylists)(n)})),t.getAllPlaylists=e=>i(void 0,void 0,void 0,(function*(){let n=[];const i=new r.LauncherService((0,t.getAngularDependency)("$http")),{data:a}=0===e?yield i.getPlaylists():yield i.getCloudPlayListFirstStep();if(a&&"success"===a.status)return n=(a.playlists||[]).map((e=>(e.elementSelector=e.elementSelector.replace("_#","#"),e))),n})),t.getExecutablePlaylists=e=>{document.body.classList.add("playlist-pointer-events"),(0,t.hidePlaylistPopups)();const n=e.filter((e=>(0,t.isValidInstanceOrPlaylist)(e))).map((e=>e.id));return(0,t.showPlaylistPopups)(),document.body.classList.remove("playlist-pointer-events"),n},t.hidePlaylistPopups=()=>{Array.from(document.getElementsByClassName("playlist-configuration")).forEach((e=>e.style.visibility="hidden")),Array.from(document.getElementsByClassName("playlist-configuration-backdrop")).forEach((e=>e.style.visibility="hidden")),Array.from(document.getElementsByClassName("playlist-launcher-overlay")).forEach((e=>e.style.visibility="hidden"))},t.showPlaylistPopups=()=>{Array.from(document.getElementsByClassName("playlist-configuration")).forEach((e=>e.style.visibility="visible")),Array.from(document.getElementsByClassName("playlist-configuration-backdrop")).forEach((e=>e.style.visibility="visible")),Array.from(document.getElementsByClassName("playlist-launcher-overlay")).forEach((e=>e.style.visibility="visible"))},t.isValidInstanceOrPlaylist=e=>{if(!e.conditionalSteps||0===e.conditionalSteps.length)return(0,t.isPlaylistExecutable)(e);if(!(0,t.isPlaylistExecutable)(e)){const n=e.conditionalSteps.length;let i=!1;for(let r=0;r<n&&!i;r++){const n=e.conditionalSteps[r];i=!!(0,t.isPlaylistExecutable)(n)}return i}return!0},t.isPlaylistExecutable=e=>{const n=(0,t.isValidSelector)(e.elementSelector),i=(0,a.isElementClickable)(document,document.querySelector(e.elementSelector)),r=(0,t.getElementFromXPath)(document,e.elementXPath),s=(0,a.isElementClickable)(document,r);return n&&i||r&&s},t.getBranchedSteps=e=>{const n=[];return e.forEach((e=>{var i;if(e.isBranchingStep){const r=(0,t.getEligibleBranch)(e);r&&n.push(...(0,t.getBranchedSteps)(null!==(i=r.steps)&&void 0!==i?i:[]))}else n.push(e)})),n},t.getEligibleBranch=e=>{var n;let i=-1;const r=e.branches.length;for(let a=0;a<r&&-1===i;a++){const r=e.branches[a];(0,t.areConditionsSatisfied)(JSON.parse(null!==(n=r.preReqJson)&&void 0!==n?n:"{}"))&&(i=a)}return-1!==i?e.branches[i]:null},t.areConditionsSatisfied=e=>{const n=e.conditions,i=e.conditionsFormula,r={};for(const e in n){const i=n[e];r[e]=(0,t.isBranchConditionSatisfied)(i)}return i.split("|").some((e=>e.split("&").every((e=>r[e.trim()]))))},t.isBranchConditionSatisfied=e=>"itemkey"===e.type?(0,t.isItemKeyCheckSuccess)(e):"securitysetting"===e.type&&(0,t.isSecuritySettingCheckSuccess)(e),t.isItemKeyCheckSuccess=e=>{var t;const n=e.name,i=e.value;if("id"===e.qualifier){const e={itemId:""};return window.getItemKeyValuePair(n,e),e.itemId===i}return"value"===e.qualifier&&(null===(t=window.getItemKeyValue(n))||void 0===t?void 0:t.toLowerCase())===(null==i?void 0:i.toLowerCase())},t.isSecuritySettingCheckSuccess=e=>Boolean(e.value)===window.getPermission(e.name,window.global.TrUserId)}},i={};function r(e){var t=i[e];if(void 0!==t)return t.exports;var a=i[e]={id:e,loaded:!1,exports:{}};return n[e].call(a.exports,a,a.exports,r),a.loaded=!0,a.exports}r.m=n,r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.f={},r.e=e=>Promise.all(Object.keys(r.f).reduce(((t,n)=>(r.f[n](e,t),t)),[])),r.u=e=>"app.playlist-recorder.js",r.miniCssF=e=>"app.playlist-recorder.css",r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),e={},t="mobiledoc:",r.l=(n,i,a,s)=>{if(e[n])e[n].push(i);else{var o,l;if(void 0!==a)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var h=c[u];if(h.getAttribute("src")==n||h.getAttribute("data-webpack")==t+a){o=h;break}}o||(l=!0,(o=document.createElement("script")).charset="utf-8",o.timeout=120,r.nc&&o.setAttribute("nonce",r.nc),o.setAttribute("data-webpack",t+a),o.src=n),e[n]=[i];var d=(t,i)=>{o.onerror=o.onload=null,clearTimeout(p);var r=e[n];if(delete e[n],o.parentNode&&o.parentNode.removeChild(o),r&&r.forEach((e=>e(i))),t)return t(i)},p=setTimeout(d.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=d.bind(null,o.onerror),o.onload=d.bind(null,o.onload),l&&document.head.appendChild(o)}},r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),r.p="/mobiledoc/jsp/webemr/js/dist/",(()=>{if("undefined"!=typeof document){var e={179:0};r.f.miniCss=(t,n)=>{e[t]?n.push(e[t]):0!==e[t]&&{434:1}[t]&&n.push(e[t]=(e=>new Promise(((t,n)=>{var i=r.miniCssF(e),a=r.p+i;if(((e,t)=>{for(var n=document.getElementsByTagName("link"),i=0;i<n.length;i++){var r=(s=n[i]).getAttribute("data-href")||s.getAttribute("href");if("stylesheet"===s.rel&&(r===e||r===t))return s}var a=document.getElementsByTagName("style");for(i=0;i<a.length;i++){var s;if((r=(s=a[i]).getAttribute("data-href"))===e||r===t)return s}})(i,a))return t();((e,t,n,i,r)=>{var a=document.createElement("link");a.rel="stylesheet",a.type="text/css",a.onerror=a.onload=n=>{if(a.onerror=a.onload=null,"load"===n.type)i();else{var s=n&&("load"===n.type?"missing":n.type),o=n&&n.target&&n.target.href||t,l=new Error("Loading CSS chunk "+e+" failed.\n("+o+")");l.code="CSS_CHUNK_LOAD_FAILED",l.type=s,l.request=o,a.parentNode&&a.parentNode.removeChild(a),r(l)}},a.href=t,document.head.appendChild(a)})(e,a,0,t,n)})))(t).then((()=>{e[t]=0}),(n=>{throw delete e[t],n})))}}})(),(()=>{var e={179:0};r.f.j=(t,n)=>{var i=r.o(e,t)?e[t]:void 0;if(0!==i)if(i)n.push(i[2]);else{var a=new Promise(((n,r)=>i=e[t]=[n,r]));n.push(i[2]=a);var s=r.p+r.u(t),o=new Error;r.l(s,(n=>{if(r.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var a=n&&("load"===n.type?"missing":n.type),s=n&&n.target&&n.target.src;o.message="Loading chunk "+t+" failed.\n("+a+": "+s+")",o.name="ChunkLoadError",o.type=a,o.request=s,i[1](o)}}),"chunk-"+t,t)}};var t=(t,n)=>{var i,a,[s,o,l]=n,c=0;if(s.some((t=>0!==e[t]))){for(i in o)r.o(o,i)&&(r.m[i]=o[i]);l&&l(r)}for(t&&t(n);c<s.length;c++)a=s[c],r.o(e,a)&&e[a]&&e[a][0](),e[a]=0},n=self.webpackChunkmobiledoc=self.webpackChunkmobiledoc||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})(),(()=>{"use strict";r(348).setup()})()})();
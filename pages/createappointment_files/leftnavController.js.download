var favarr="";var menuitems="";var popupmenuurl="";function leftnavController($scope,$http,$ocLazyLoad,$window){$scope.$parent.leftmenupopup="";var leftdata=getleftnavitems();$scope.leftnavmenu=JSON.parse(leftdata);var leftmenu=getleftMenu();$scope.leftmenu=JSON.parse(leftmenu);$scope.carousel=false;$scope.pluginFormsName=[{urlPath:'ECLINIFORMS',pluginName:'ECLINICFORMS'},{urlPath:'FAXINBOX',pluginName:'FAXINBOX'},{urlPath:'PTDOC',pluginName:'PTDOC'},{urlPath:'SCANDOCUMENTS',pluginName:'SCANFRMLFTMNU'},{urlPath:'LETTERS',pluginName:'LETTERS'}];$scope.showfavleftmenu=getUserProfile("ShowFavoritesLeftMenu");$scope.activetabid=1;if($scope.showfavleftmenu==1){$('.navgator').hide();$('.favOne').show()}$scope.showCaroussel=function(iconvalue){if(iconvalue==1&&$scope.favorites.length>14||iconvalue==0&&$scope.leftnavmenu.length>12){$('nav.jcarousel.active').jcarousel('reload',{});$('.jcarousel-vertical').css('padding-top',20);$scope.carousel=true;$scope.carouselvalue=1}else{$('nav.jcarousel.active').jcarousel('reload',{})}};$scope.loadOptionsFromPtDoc=function(tabsel){$scope.sel_patient=0;switch(tabsel){case"eCliniForms":launchPlugin('id=ECLINICFORMS');break;case"pluginsetting":launchPlugin('id=STARTUP');break;case"FaxInbox":launchPlugin('id=FAXINBOX');break;case"Letters":launchPlugin('id=LETTERS');break;case"ptdoc":launchPlugin('id=PTDOC');break;case"scan":launchPlugin('id=SCANFRMLFTMNU');break}};$scope.favorites="";$scope.getDataFromChild=function(data){$scope.favorites.push(data);$scope.getfavorites()};$scope.getfavorites=function(){try{var serverUrl='/mobiledoc/jsp/webemr/layout/getLeftnavFields.jsp';var paramdata={trigger:"getfavorites",UserID:global.TrUserId};var jsonFavorites=urlPost(serverUrl,paramdata);$scope.favoritelist=JSON.parse(jsonFavorites);$scope.favorites=$scope.favoritelist.favorites.favorite;$scope.favcount=$scope.favoritelist.favorites.favcount;$scope.favdropwidth='0px';$scope.favlistwidth='0px';if($scope.favcount==0){$scope.favdropwidth='290px';$scope.favlistwidth='280px'}else{if($scope.favcount<=8&&$scope.favcount>0){$scope.favdropwidth=290+'px'}else if($scope.favcount<=16&&$scope.favcount>8){$scope.favdropwidth=580+'px'}else if($scope.favcount<=24&&$scope.favcount>16){$scope.favdropwidth=870+'px'}else if($scope.favcount<=32&&$scope.favcount>24){$scope.favdropwidth=1160+'px'}}favarr=$scope.favorites}catch(e){ecwAlert("Error occurred while loading favorites")}};$scope.getfavorites();if($scope.showfavleftmenu==1&&$scope.favcount>14||$scope.showfavleftmenu==0&&$scope.leftnavmenu.length>12){$('.jcarousel-vertical').css('padding-top',20);$scope.carousel=true}else{$scope.carousel=false;$('.jcarousel-vertical').css('padding-top',0)}$scope.getfavname=function(itemName,isMenu){if(itemName!=undefined&&itemName.length>0){if(itemName.length>25){itemName=itemName.substring(0,23)+'...'}if(isMenu==0)return itemName;else return"M : "+itemName}else return""};$scope.getnavfavname=function(itemName){if(itemName!=undefined&&itemName.length>0){if(itemName.length>=12){itemName=itemName.substring(0,9)+'...'}return itemName}else return""};$scope.favoritesPopuUp=function(){$ocLazyLoad.load({name:'favoriteListOrder',files:['/mobiledoc/jsp/webemr/layout/favoritesList.js']}).then(function(){var url=makeURL('/mobiledoc/jsp/webemr/layout/favoritesList.jsp');angular.element(document.getElementById('webemrApp')).scope().favoriteslist=url},function(e){console.log(e)})};$scope.showfavstar=function(itemID){return!(itemID.indexOf("prov")>-1||itemID.indexOf("staff")>-1)};$scope.setFavoriteItem=function(itemID,delfav,isMenu,favtitle){var favorite;if(favtitle===undefined||favtitle==null)favtitle='';if(isMenu==1){if($("#favorite_menu_"+itemID).hasClass("active")){favorite=0}else{favorite=1}}else{if($("#favorite_"+itemID).hasClass("active")){favorite=0}else{favorite=1}}if(favorite==1){if($('#favlist li').length>=32){ecwAlert("More than 32 favorites cannot be added")}else{$scope.setFavorite(itemID,favorite,isMenu,favtitle,delfav)}}else{$scope.setFavorite(itemID,favorite,isMenu,favtitle,delfav)}};$scope.setFavorite=function(itemID,favorite,isMenu,favtitle,delfav){$.ajaxSetup({"async":false});$.ajax({type:"POST",url:'/mobiledoc/jsp/webemr/layout/getLeftnavFields.jsp',data:{trigger:"setfavorite",UserID:global.TrUserId,itemID:itemID,favorite:favorite,isMenu:isMenu,title:favtitle},success:function(){$scope.getfavorites();if(delfav==1){if(isMenu==0){$('#favorite_'+itemID).toggleClass("active")}else{$('#favorite_menu_'+itemID).toggleClass("active")}}}});$.ajaxSetup({"async":true})};$('nav.jcarousel.active').carousel({interval:false});angular.element(document).ready(function(){$('.icon-star').on('click',function(){if($('#favlist li').length<32){$(this).toggleClass('active')}return false});for(var i=0;i<favarr.length;i++){if(favarr[i].isMenu==0)$('#favorite_'+favarr[i].itemID).addClass("active");else $('#favorite_menu_'+favarr[i].itemID).addClass("active")}});$scope.openURL=function(UrlPath){$scope.$broadcast('clear-search-setting-input');if(UrlPath==="#/emr-chat"&&$('#chatDockView')[0]!==undefined&&!$('#chatDockView')[0].className.contains('ng-hide')){ecwAlert('You have an active Chat session with a patient from healow Connect. Please continue to Chat from healow Connect screen.');return}if(UrlPath.length>0){if($('#searchdiv').hasClass('active')){$('.searchmenu').val('');$scope.searchitems=[];$('#searchdiv').removeClass('active');$('#pane'+$scope.activetabid).addClass('active');$('#menu'+$scope.activetabid).addClass('active')}if(UrlPath.trim()=="#/maqdashboard"){var response="";var param=null;var viewtype=null;var OS="";if(window.navigator.userAgent.indexOf("Mac")!=-1){OS="macprojecte"}else{OS="winprojecte"}if(!$scope.eCliniFormsWebOnly(OS)){viewtype="plugIn"}else{viewtype="Web"}param={facilityId:global.facilityId};$.ajax({url:"/mobiledoc/jsp/webemr/maqdashboards/getMUdata.jsp",type:"POST",data:param,cache:false,"async":false,success:function(data){response=data.trim();var pos=response.indexOf("?");if(pos.toString()!="-1"){var vPos=response.indexOf("viewtype",parseInt(pos));var vPosStart=response.indexOf("=",parseInt(vPos));var vPosEnd=response.indexOf("&",parseInt(vPosStart));if(vPosEnd.toString()!="-1"){viewtype=response.substring(parseInt(vPosStart)+1,parseInt(vPosEnd))}else{if(vPosStart.toString()!="-1"){viewtype=response.substring(parseInt(vPosStart+1))}}}}});if(viewtype.toString()=="plugIn"){var OS="";if(window.navigator.userAgent.indexOf("Mac")!=-1){OS="macprojecte"}else{OS="winprojecte"}if($scope.eCliniFormsWebOnly(OS)){alert("10e Plugin tool is not installed in the machine.Please visit login page(Download button->10e Plugin tool(Install).")}else{response=encodeURIComponent(response);launchPlugin('id=MAQ|url='+response)}}else if(viewtype.toString()!="plugIn"){$window.location=UrlPath+"/"+Base64.encode(response)}$('.response-nav-lp > nav > ul > li > a.active').removeClass('active');$('.response-nav-lp > nav > ul > li').removeClass('open')}else if(UrlPath.trim()=="progressNotes"){if(containsKey('loggedInInfo')){var info=JSON.parse(get('loggedInInfo'));if(info.lastEncId!=''&&info.lastPtId!=''){$scope.resetLeftMenu();doChecksForPN(info.lastEncId,info.lastPtId,$http)}else{showNoPrevEncAlert()}}else{showNoPrevEncAlert()}$('.response-nav-lp > nav > ul > li > a.active').removeClass('active');$('.response-nav-lp > nav > ul > li').removeClass('open')}else if(UrlPath.trim()=="reviewPN"){var isEnableCC=getItemKeyValue("EnableReview4ConvenientCare");if(isEnableCC&&isEnableCC.trim().toLowerCase()==="yes"){UrlPath='#/mobiledoc/jsp/webemr/jellybean/sbeen/ReviewProgressNotesCC.jsp'}else{UrlPath='#/mobiledoc/jsp/webemr/jellybean/sbeen/ReviewProgressNotes.jsp'}$window.location=UrlPath;$('.response-nav-lp > nav > ul > li > a.active').removeClass('active');$('.response-nav-lp > nav > ul > li').removeClass('open')}else if(UrlPath.trim()=="#/mobiledoc/jsp/catalog/activateProducts.jsp"){$('.response-nav-lp > nav > ul > li > a.active').removeClass('active');$('.response-nav-lp > nav > ul > li').removeClass('open');$window.location="#/mobiledoc/jsp/catalog/activateProducts.jsp/"+(new Date).getTime()}else if(UrlPath.trim()=="#r=ipWeb.go/ConfigureFrequency"){$scope.loadPopupMenu(1,'configureCorrectionApp','/mobiledoc/jsp/webemr/corrections/configureFrequency/configureFrequency.jsp','/mobiledoc/jsp/webemr/corrections/configureFrequency/configureFrequencyController.js')}else if(isCcmrUrl(UrlPath.trim())){var bLoadRegular=true;try{var appInjector=angular.element(document.getElementById('webemrApp')).injector();var appRoute=appInjector.get('$route');var currentURL="#"+appRoute.current.loadedTemplateUrl;if(currentURL.indexOf(UrlPath.trim())==0){appRoute.reload();bLoadRegular=false}}catch(e){}if(bLoadRegular){$window.location=UrlPath}$('.response-nav-lp > nav > ul > li > a.active').removeClass('active');$('.response-nav-lp > nav > ul > li').removeClass('open')}else if($scope.isForPluginMode(UrlPath.trim().toUpperCase())){try{launchPlugin('id='+$scope.getPluginNameToLaunch(UrlPath.trim().toUpperCase()).pluginName)}catch(err){console.log(err)}}else if(UrlPath.trim()==="#/mobiledoc/jsp/webemr/dashboard/Interface-Dashboard.jsp"&&getPermission("Interface_Dashboard_View",global.TrUserId)===false){ecwAlert("You don't have permissions to Access Interface Dashboard. Please contact your administrator.","Security Access");return}else if(UrlPath.trim()==="#/mobiledoc/jsp/webemr/jellybean/reconcile/Interface-Reconciliation.jsp"&&getPermission("Interface_Reconciliation_View",global.TrUserId)===false){ecwAlert("You don't have permissions to Access Interface Reconciliation. Please contact your administrator.","Security Access");return}else if(getPermission("Registry",global.TrUserId)===false&&(UrlPath.trim()==="#/mobiledoc/jsp/webemr/registryV2/registry.jsp"||UrlPath.trim()==="#/mobiledoc/jsp/webemr/registryV2/RegistryReportsList.jsp")){ecwAlert("You don't have permissions to access Registry. Please contact your administrator.","Security Access");return}else if(UrlPath.trim()=="#/mobiledoc/jsp/webemr/allergy/Forms.jsp"){$('.response-nav-lp > nav > ul > li > a.active').removeClass('active');$('.response-nav-lp > nav > ul > li').removeClass('open');$window.location="#/mobiledoc/jsp/webemr/allergy/Forms.jsp"}else if(getPermission("AllowAccessToClinicalRuleEngineConfiguration",global.TrUserId)===false&&UrlPath.trim()==="#/mobiledoc/jsp/webemr/clinicalrule/creLanding.jsp"){ecwAlert('This feature is controlled through the "AllowAccessToClinicalRuleEngineConfiguration" security key.If you need permission, please contact your practice Administrator for permission.',"Security Access");return}else if(getPermission("AllowAccessToCREReport",global.TrUserId)===false&&UrlPath.trim()==="#/mobiledoc/jsp/webemr/clinicalrule/creoutput.jsp"){ecwAlert('This feature is controlled through the "AllowAccessToCREReport" security key.If you need permission, please contact your practice Administrator for permission.',"Security Access");return}else if(UrlPath.trim()==="#/mobiledoc/jsp/webemr/uadmin/referringPhysicians/physicians.jsp"&&getPermission("AllowReferDoctors",global.TrUserId)===false){ecwAlert("You do not have permissions to Access Referring Physicians. Please contact your administrator.","Security Access");return}else if(UrlPath.trim()==="#/mobiledoc/jsp/webemr/behavioralhealth/cliniciandashboard/view/clinicianDashboard.jsp"&&getPermission("AccessClinicianDashboard",global.TrUserId)===false){ecwAlert('Clinician Dashboard access denied.  Please contact your administrator to grant access to "Clinician Dashboard" security setting.',"Clinician Dashboard â€“ Access");return}else{$window.location=UrlPath;$('.response-nav-lp > nav > ul > li > a.active').removeClass('active');$('.response-nav-lp > nav > ul > li').removeClass('open')}}};var isCcmrUrl=function(url){return url!=null&&url!=undefined&&(url=='#/mobiledoc/jsp/webemr/ccmr/ccmrDashboard.jsp'||url=='#/mobiledoc/jsp/webemr/ccmr/ccmrCarePlanning.jsp'||url=='#/mobiledoc/jsp/webemr/ccmr/ccmrCCM.jsp'||url=='#/mobiledoc/jsp/webemr/ccmr/ccmrAdmin.jsp'||url=='#/mobiledoc/jsp/webemr/cpcplus/cpcPlusDashboard.jsp'||url=='#/mobiledoc/jsp/webemr/phm/phmBilling.jsp'||url=='#/mobiledoc/jsp/webemr/ccmr/ccmrCaseManagement.jsp'||url=='#/mobiledoc/jsp/webemr/ccmr/rpm/enrollment/views/rpmDashboard.html'||url=='#/mobiledoc/jsp/webemr/ccm/userfacing/dashboard/view/ccmPcmDashboard.html')};var showNoPrevEncAlert=function(){$scope.resetLeftMenu();var message="No encounter opened after Login.";ecwAlert(message,"Progress Note")};$scope.isForPluginMode=function(urlPath){return $scope.pluginFormsName.find(url=>{return url.urlPath==urlPath})};$scope.getPluginNameToLaunch=function(urlPath){return $scope.pluginFormsName.filter(url=>{return url.urlPath==urlPath})[0]};$scope.resetLeftMenu=function(){$(".orange-drop").css("width","0px");$(".orange-drop").css("left","0px");$(".orange-drop").css("top","0px");$(".orange-drop").css("opacity","")};$scope.getborderright=function(i){return Math.floor(i/8)===Math.floor(($scope.favcount-1)/8)};$scope.getsearchborderright=function(i){return Math.floor(i/8)==Math.floor(($scope.searchitems.length-1)/8)};$scope.favleftpad=function(i){return Math.floor(i/8)>0};$scope.TrUserId=global.TrUserId;var leftnavRandomNumber=(new Date).getTime();$scope.loadPopupMenu=function(ismodule,modalname,url,jsfiles){$scope.$broadcast('clear-search-setting-input');if(modalname&&modalname.trim()==="immvalidation"){if(getPermission("ImmInjValidationsScreen",global.TrUserId)===false){ecwAlert("You don't have permissions to Access Immunization/Therapeutic Injection Validation screen. Please contact your administrator.","Security Access");return}}if(modalname==='QuestionnaireDesigner'){$scope.openURL(url);return}if(modalname==='eICRApp'){var isAdminUser=getItemKeyValue("Administrator",true)===global.TrUserId;if(!isAdminUser&&getPermission("eICR Dashboard",global.TrUserId)===false){ecwAlert("You do not have permission to access the eICR Dashboard. Contact your administrator to obtain access.","Security Access","","","orangetheme");return}$scope.openURL(url);return}if(modalname==='authDefaults'||modalname==='URLRestrictionSetting'||modalname==='configReportTemplates'){$scope.openURL(url);return}if($('#searchdiv').hasClass('active')){$('.searchmenu').val('');$scope.searchitems=[];$('#searchdiv').removeClass('active');$('#pane'+$scope.activetabid).addClass('active');$('#menu'+$scope.activetabid).addClass('active')}if(modalname=="MerchantAccountAdministration"){window.open("https://www.oc2net.net/tcprivate/countercheck/eclinicalworks&redirect=1","LeftMenu"+leftnavRandomNumber,'width=770, height=510,top=50,left=440,location=no,menubar=no,resizable=no,scrollbars=no,status=no,titlebar=no,toolbar=no')}if(url.trim()=="pluginsetting"){$scope.loadOptionsFromPtDoc('pluginsetting')}else if(modalname.trim()=="allergy"){var filesarr=[];if(jsfiles!=null&&jsfiles.length>0){filesarr=jsfiles.split(",")}$ocLazyLoad.load({name:modalname,files:filesarr,cache:true}).then(function(){$scope.openURL(url)})}else{if($scope.isForPluginMode(url.trim().toUpperCase())){try{launchPlugin('id='+$scope.getPluginNameToLaunch(url.trim().toUpperCase()).pluginName)}catch(err){console.log(err)}}else{var filesarr=[];if(jsfiles!=null&&jsfiles.length>0){filesarr=jsfiles.split(",")}if(url!=null&&url.length>0){$('.response-nav > nav > ul > li.open').removeClass('open');if(url.indexOf("?")>-1)url=url+"&callfromleftmenu=yes";else url=url+"?callfromleftmenu=yes";$ocLazyLoad.load({name:modalname,files:filesarr,cache:true}).then(function(){if(modalname==="GuarantorSearch"){$scope.$parent.patienthuburl=makeURL(url)}else{$scope.$parent.leftmenupopup=makeURL(url)}(function($){$.event.special.removed={remove:function(e){if(e.handler)e.handler()}}});var excluded=["ReconcileRecalculateBalanceDailog","reconcileTransactionsDailog","ClaimswithMissingEncountersDailog","referal","adjustmentReportModal","printSchedule"];$(document).one("show.bs.modal","ng-include[src='leftmenupopup'] .modal",function(){var k=$("ng-include[src='leftmenupopup'] .modal")[0];ecwHelp_removeModalIdFromOpenModal=false;if(k.id!==undefined&&excluded.includes(k.id)){$(document).off("show.bs.modal","ng-include[src='leftmenupopup'] .modal");return}else{$("#"+k.id).on("hide.bs.modal removed",function(e){if(isItemKeyEnabled("EnableECWHelpFeature")&&!isItemKeyEnabled("EnableECWHelpEditing")){ecwHelp_removeModalIdFromOpenModal=true;Eclincalworkshelp_Settings.actionOnModalclose(e)}if(e!==undefined&&e.target===k){var el=$("ng-include[src='leftmenupopup']").find("[ng-controller], [data-ng-controller]");if(angular.element(el).scope()!==undefined)angular.element(el).scope().$destroy();angular.element(el).remove();angular.element("ng-include[src='leftmenupopup']").remove();$("#"+k.id).off("hide.bs.modal removed");$(document).off("show.bs.modal","ng-include[src='leftmenupopup'] .modal")}})}})},function(e){console.log(e)})}}}if(url=='/mobiledoc/jsp/webemr/menu/helpmenu/ToggleServerLogs.jsp?enableFlag=1'||url=='/mobiledoc/jsp/webemr/menu/helpmenu/ToggleServerLogs.jsp?enableFlag=0'){var enableServer=$('#enableLog');var disableServer=$('#disableLog');if($(disableServer).parent().attr('style')=='display:none'){$(disableServer).parent().attr('style','display:block');$(enableServer).parent().attr('style','display:none')}else if($(enableServer).parent().attr('style')=='display:none'){$(enableServer).parent().attr('style','display:block');$(disableServer).parent().attr('style','display:none')}}$('.response-nav-lp > nav > ul > li > a.active').removeClass('active');$('.response-nav-lp > nav > ul > li').removeClass('open')};$scope.openitems=function(itemID,hassubitems,ismodule,modalname,url,jsfiles,isDisabled){if(hassubitems)activetab(itemID);else{$scope.loadPopupMenu(ismodule,modalname,url,jsfiles,isDisabled)}};$scope.searchitems=[];$scope.searchMenuText='';$scope.searchMenuItems=function(searchval){var searchitems=[];if(searchval.length>2){$scope.searchitems=[];if(searchval.toLowerCase().match(/statement.*/)){searchval="statement"}for(var i=0;i<$scope.leftnavmenu.length;i++){var subitems=$scope.leftnavmenu[i].subitems;for(var j=0;j<subitems.length;j++){if(subitems[j].menuItemName.toLowerCase().indexOf(searchval.toLowerCase())>=0||searchval.toLowerCase().indexOf("statement")>=0&&subitems[j].menuItemName=="Accounts Lookup"){var menuObj={};menuObj.menuItemName=subitems[j].menuItemName;menuObj.title=subitems[j].menuItemName;menuObj.itemId=subitems[j].itemID;menuObj.UrlPath=subitems[j].UrlPath;menuObj.iconClass=subitems[j].iconClass;menuObj.isMenu=0;if(menuObj.menuItemName==="Accounts Lookup"){menuObj.title="Generate patient/guarantor statements, transfer accounts to/from Collections, and write off balances.";searchitems.splice(0,0,menuObj)}else if(menuObj.menuItemName==="Patient Statements"){menuObj.title="View Patient Statements that have been generated in the past.";searchitems.splice(4,0,menuObj)}else{searchitems.push(menuObj)}}}}for(var i=0;i<$scope.leftmenu.length;i++){if($scope.leftmenu[i].menuID>0){var mainelementsArr=$scope.leftmenu[i].mainelements;for(j=0;j<mainelementsArr.length;j++){var elementsArr=mainelementsArr[j].elements;for(k=0;k<elementsArr.length;k++){if(!elementsArr[k].hasSubItems&&elementsArr[k].menuItemName.toLowerCase().indexOf(searchval.toLowerCase())>=0){var menuObj={};menuObj.modulename=elementsArr[k].modulename;menuObj.title=elementsArr[k].title;menuObj.jsfiles=elementsArr[k].jsfiles;menuObj.parentID=elementsArr[k].parentID;menuObj.itemID=elementsArr[k].itemID;menuObj.UrlPath=elementsArr[k].UrlPath;menuObj.menuItemName=elementsArr[k].menuItemName;menuObj.ismodule=elementsArr[k].ismodule;menuObj.isMenu=1;if(menuObj.menuItemName==="Setup Patient Statement"){menuObj.title="Configure patient/guarantor statement printing details, edit dunning messages, and customize the message that prints on patient/guarantor statements.";searchitems.splice(1,0,menuObj)}else if(menuObj.menuItemName==="Configure Automatic Upload of Patient Statements"){menuObj.title="Configure the scheduled day and time at which statements are generated automatically, customize the message that prints on these statements, and opt to automatically write off small balances.";searchitems.splice(2,0,menuObj)}else{searchitems.push(menuObj)}}}}}}$scope.searchitems=searchitems;$("#orangecontent").find('.tab-pane').removeClass('active');$('#pane'+$scope.activetabid).removeClass('active');$('#searchdiv').addClass('active')}else{$('#searchdiv').removeClass('active');$('#pane'+$scope.activetabid).addClass('active');$('#menu'+$scope.activetabid).addClass('active')}};$scope.favoritesPopuUp=function(){$ocLazyLoad.load({name:'favoriteListOrder',files:['/mobiledoc/jsp/webemr/layout/favoritesList.js']}).then(function(){var url=makeURL('/mobiledoc/jsp/webemr/layout/favoritesList.jsp');angular.element(document.getElementById('webemrApp')).scope().favoriteslist=url},function(e){console.log(e)})};$scope.eCliniFormsWebOnly=function(strVal){var session=cookie.split("=");var data=getDeviceCompatibilityCheckValue(strVal,session[1],"","");if(data!=""&&!angular.isUndefined(data)){var res=data.split(",");return!(res[0]=="true")}};$scope.LettersWebOnly=function(){var session=cookie.split("=");var data=getDeviceCompatibilityCheckValue("letters",session[1],"","");if(data!=""&&!angular.isUndefined(data)){var res=data.split(",");return res[0]=="true"}};$scope.setactivepane=function(itemID){$scope.activetabid=itemID};$scope.startstopEVA=function(){loadEva()};$("#leftnavApp .icon-label-menu").on("click",function(){setTimeout(hideSettingInfoPopup,0);setTimeout(focusSearchInput,200)});let focusSearchInput=function(){if($("#ai_search_input_Main_Menu").is(":visible")){$("#ai_search_input_Main_Menu").focus();$(".aiCommandsPopupSettingSearch").hide()}else{$(".searchmenu").focus()}};$scope.getUniversityToken=function(){var url="/mobiledoc/jsp/websecurity/authenticateEMR";var response=urlPost(url);if(response.success==="success"){var url=response.redirectECWUniversityURL+"?token="+response.jweToken;window.open(url,'_blank')}else{showAlertMessage("<div class='text-left mt-20'> <div class='mb10'><b>eCW University Login Error:</b></div>There was an error logging into eCW University. Please contact support.</div>","","SecurityErrorMsg","","an error logging into eCW University",'500px')}};let hideSettingInfoPopup=function(){if($("#ai_search_input_Main_Menu").is(":visible")){$(".aiCommandsPopupSettingSearch").hide()}}}function prevjscroll(){$(".jcarousel.active").jcarousel("reload",{});$(".jcarousel.active").jcarousel("scroll","-=1");return false}function nextjscroll(){$(".jcarousel.active").jcarousel("reload",{});$(".jcarousel.active").jcarousel("scroll","+=1");return false}function activetab(itemID,hierarchy){$('.searchmenu').val('');if(hierarchy==undefined)hierarchy='';if($("#menu"+itemID).length){if(hierarchy!==''){var linkArr=[];if(hierarchy.indexOf("->")>-1){var links=hierarchy.split('->');for(var i=0;i<links.length;i++){hyplink=links[i].split('-');linkArr[i]=hyplink[1]}if(linkArr[0]==='Community'&&linkArr[1]==='Mappings'){if(getPermission("AllowAccessToCommunityMappings",global.TrUserId)===false){ecwAlert("You don't have permissions to Access Community Mappings. Please contact your administrator.","Security Access","","","orangetheme");return}}}}$("#orangecontent").find('.tab-pane').removeClass('active');$("#menu"+itemID).addClass('active')}else{var hlink='';if(hierarchy!=''){if(hierarchy.indexOf("->")>-1){var links=hierarchy.split('->');for(var i=0;i<links.length;i++){hyplink=links[i].split('-');hlink+="<a class='cursor' style='color:#F58F51;font-weight:600' onclick='activetab("+hyplink[0]+")'><u class='elem'>"+hyplink[1]+"</u></a>";if(i!=links.length-1)hlink+="<i class='icon icon-whitearrow' style='margin-right:5px;margin-left:5px'></i>"}}else{hyplink=hierarchy.split('-');hlink+="<a class='cursor' style='color:#F58F51;font-weight:600' onclick='activetab("+hyplink[0]+")'><u class='elem'>"+hyplink[1]+"</u></a>"}$("#emptyhier").html('');$("#emptyhier").append(hlink);$("#orangecontent").find('.tab-pane').removeClass('active');$("#emptytab").addClass('active')}}}function refreshCount(){var webemrAppScope=angular.element($("#JellyBeanCountCntrl")).scope();webemrAppScope.refreshCount();webemrAppScope.$apply()}
class ContextMenuHandler{setupContextMenu(){this.addStylesheetContextMenu(document);this.setupIframeHandlerCM(document)}addStylesheetContextMenu(document){const cdStyle=document.createElement("style");cdStyle.type="text/css";cdStyle.innerHTML='@keyframes cmTrigger {\n'+'\tfrom { opacity: 0.99; }\n'+'\tto { opacity: 1; }\n'+'}\n'+'iframe {\n'+'\tanimation-duration: 0.001s;\n'+'\tanimation-name: cmTrigger;\n'+'}';document.getElementsByTagName("head")[0].appendChild(cdStyle)}setupIframeHandlerCM(document){const clazz=this;$(document).on("animationstart","iframe",e=>this.initializeIframeCM(e,clazz))}addContextMenuCSS(iframe){try{const cssLink=iframe.contentDocument.createElement("link");cssLink.href="/mobiledoc/jsp/webemr/css/contextMenu.css";cssLink.rel="stylesheet";cssLink.type="text/css";if(iframe.contentDocument.head!=null){iframe.contentDocument.head.appendChild(cssLink)}}catch(err){}}addContextMenuHtml(iframe){$.ajax({url:"/mobiledoc/jsp/webemr/menu/contextMenuIframe.jsp",type:"GET","async":false,success:function(response){iframe.contentDocument.body.insertAdjacentHTML('beforeend',response.trim())}})}addContextMenuJS(iframe){try{var menuJsLink=iframe.contentDocument.createElement("script");menuJsLink.src="/mobiledoc/jsp/webemr/js/contextMenu.js";menuJsLink.type="text/javascript";if(iframe.contentDocument.head!=null){iframe.contentDocument.head.appendChild(menuJsLink)}}catch(err){}}addContextMenu(iframe){if(iframe.contentDocument==null||iframe.contentDocument.body==null){return}var contextMenuAdded=iframe.contentDocument.body.innerHTML.contains("customContextMenu");if(contextMenuAdded){return}this.addContextMenuCSS(iframe);if(false===injectContextMenuInIframe&&this.isIframeIncluded(iframe)){this.addContextMenuHtml(iframe)}this.addContextMenuJS(iframe)}initializeIframeCM(e,clazz){const iframe=e.target;if(false===injectContextMenuInIframe&&!this.isIframeIncluded(iframe)){return}$(iframe).on("load",function(ei){if(!isElementIgnored(iframe)){clazz.addContextMenu(iframe)}})}isIframeIncluded(iframe){return iframe.id!==undefined&&iframe.id!==""&&contextMenuFrames.includes(iframe.id)}}if(typeof exports!=="undefined"){module.exports=ContextMenuHandler}else{window.contextMenuDefaultHandler=new ContextMenuHandler}
(function(){let customRxApp=angular.module('ecw.customRx',[]);customRxApp.component('customRxComponent',{bindings:{customRxs:'=',requestParam:'=',context:'=',selectCallBack:'&'},controller:['$http','$ocLazyLoad','$modal',customRxController],controllerAs:'vm',templateUrl:"/mobiledoc/jsp/webemr/progressnotes/ecwrx/patientCentricDosing/customRx/html/customRx-tpl.html",transclude:true});function customRxController($http,$ocLazyLoad,$modal){var vm=this;vm.selectDose=function(index){let doseObj=vm.customRxs[index];vm.selectCallBack({arg0:convertToResponseObj(doseObj)})};vm.openRxEdit=function(index){let doseObj=vm.customRxs[index];doseObj.DispensableItemId=0;vm.openRxEditModal(convertToResponseObj(doseObj))};vm.openRxEditModal=function(doseObj){doseObj.context=vm.context;$ocLazyLoad.load({name:'RxEditModule',files:['/mobiledoc/jsp/webemr/templates/savePrompt-tpl.js','/mobiledoc/jsp/webemr/progressnotes/ecwrx/RxHelper/RxEdit/js/RxEditController.js','/mobiledoc/jsp/resources/jslib/angular-perfect-scrollbar/src/angular-perfect-scrollbar.min.js']}).then(function(){var modalInstance=$modal.open({templateUrl:makeURL('/mobiledoc/jsp/webemr/progressnotes/ecwrx/RxHelper/RxEdit/rx-editmodal.html'),controller:'RxEditCtrl',windowClass:'rxeditscreen bluetheme rx-topmargin',backdrop:"static",keyboard:false,resolve:{patientID:function(){return vm.requestParam.patientId},encounterID:function(){return vm.requestParam.encounterId},RxEditObject:function(){return doseObj},loginuserid:function(){return global.TrUserId},parentName:function(){return"RxQuickSearch"}}});modalInstance.result.then(function(modalInstanceResponse){},function(modalInstanceResponse){if(!angular.isUndefined(modalInstanceResponse)&&typeof modalInstanceResponse==='object'){vm.selectCallBack({arg0:modalInstanceResponse})}})})};function convertToResponseObj(doseObj){var newObj={};newObj.AdministerFlag="0";newObj.DispenseFlag="0";newObj.DrugNameId=doseObj.drugNameId;newObj.IVHydration="0";newObj.IsRxSupplies=doseObj.rxSupplies||"NO";newObj.ItemId=doseObj.itemId;newObj.RxItemId=doseObj.itemId;newObj.drugName=doseObj.description;newObj.sItemName=doseObj.description;newObj.MMDCode=doseObj.mmdcode||"";newObj.ObsoleteDate=doseObj.obsoleteDate||"";newObj.awup="";newObj.controlled=doseObj.controlled||"";newObj.controlledCode=doseObj.controlledSubstanceCode||"";newObj.description=doseObj.description;newObj.dispense=doseObj.dispense||"";newObj.doseunit="";newObj.drugNameType=doseObj.drugNameType||"";newObj.drugOTC=doseObj.drugOTC||"";newObj.duration=doseObj.duration;newObj.favorite="0";newObj.formulation=doseObj.formulation;newObj.freq=doseObj.frequency;newObj.isCompound="0";if(doseObj.ndc==null){newObj.ndc='';newObj.NDC=''}else{newObj.ndc=doseObj.ndc;newObj.NDC=doseObj.ndc}newObj.refills=doseObj.refills||"";newObj.route=doseObj.route;newObj.rxFormulary="";newObj.rxFormularyId="";newObj.strength=doseObj.strength;newObj.take=doseObj.take;newObj.AddInstructions="";if(vm.requestParam.dxId){newObj.assessId=vm.requestParam.dxId}else{newObj.assessId="0"}return newObj}}})();
let fileTransferUtility={generateFileName:function(extension,...postfix){var d=(new Date).getTime();var guid='xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g,function(c){var r=(d+Math.random()*16)%16|0;d=Math.floor(d/16);return(c=='x'?r:r&7|8).toString(16)});if(postfix){for(var index in postfix){if(postfix[index]){guid+='_'+postfix[index]}}}if(extension){guid+='.'+extension}return guid},getFileExtension:function(filename){return filename.slice((filename.lastIndexOf(".")-1>>>0)+2)},generateFilePath:function(patientId){var ftpPath="";var uplaodFTPSubFoldersItem={};getItemKeyValuePair("UploadDocstoFtpSubFolders",uplaodFTPSubFoldersItem);var uploadDocstoFtpSubFolders=uplaodFTPSubFoldersItem.itemId;var date=new Date;var dd=date.getDate();var mm=date.getMonth()+1;var yyyy=date.getFullYear();var yyyymm=""+yyyy+(mm<10?'0'+mm:mm);var mmddyyyy=""+(mm<10?'0'+mm:mm)+(dd<10?'0'+dd:dd)+yyyy;switch(parseInt(uploadDocstoFtpSubFolders)){case 1:ftpPath="/mobiledoc/"+yyyymm;break;case 2:ftpPath="/mobiledoc/"+yyyymm;if(patientId&&patientId!='0'){ftpPath+='/'+patientId}break;case 3:ftpPath="/mobiledoc/"+yyyy;if(patientId&&patientId!='0'){ftpPath+='/'+patientId}break;case 4:ftpPath="/mobiledoc";if(patientId&&patientId!='0'){ftpPath+='/'+patientId}break;case 5:ftpPath="/mobiledoc/"+yyyy+"/"+mmddyyyy;break;default:ftpPath="/mobiledoc/"+yyyy+"/"+mmddyyyy;break}return ftpPath},getBaseFileName:function(filename){return filename.slice(0,(filename.lastIndexOf(".")-1>>>0)+1)},convertBytesToHex:function(buffer){return Array.prototype.map.call(new Uint8Array(buffer),x=>('00'+x.toString(16)).slice(-2)).join('').toUpperCase()},isFileEmpty:function(fileIdName){var fi=document.getElementById(fileIdName);if(fi.files.length>0){var fsize=fi.files.item(0).size;var chkFileSize=Math.round(fsize/1024);if(chkFileSize===0){showMessage(fi.files[0].name+" file is empty.","eClinicalworks");return true}}return false},isExtension:function(filename,extensionList){if(!filename||!extensionList){return false}var extension=fileTransferUtility.getFileExtension(filename);var matchExtension=false;if(extension){var foundExt=extensionList.filter(ext=>ext&&ext.toLowerCase()===extension.toLowerCase());matchExtension=foundExt&&foundExt.length>0}return matchExtension}};
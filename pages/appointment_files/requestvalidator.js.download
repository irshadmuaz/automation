var requestValidatorModule=function(){var dataTruncUtilityService=null;var ajaxSession=null;let globalRegexpattern=/[^a-zA-Z0-9,`!'._^:~*\\\\|\/"%&+@!$=?#();<>{}\[\]\s\n-]*/;let globalPatternDescription='Characters found on a standard U.S. keyboard.';let substitutionList=[];function getValidationConfig(){var serverUrl="/mobiledoc/emr/instantdt/idt-config-http?modality=web";var serverResponse=getCachedServerData(serverUrl);if(typeof serverResponse!=='object'){serverResponse=JSON.parse(serverResponse);substitutionList=serverResponse.data.substitutions}else{substitutionList=serverResponse.data.substitutions}}function getRequestDataForvalidatin(method,data,url){let requestData="";var method=method.toUpperCase();if(method==="POST"||method==="GET"){if(data!==undefined&&data!==null&&!jQuery.isEmptyObject(data)){if(typeof data==='object'||typeof data==='json'){requestData=JSON.stringify(data)}else{requestData=data}}}try{requestData=decodeURIComponent(requestData)}catch(e){}try{url=decodeURI(url)}catch(e){}requestData+=" URL - "+url;return requestData}function extractRequestURL(url){let validationURL=url;if(url.startsWith("http://")||url.startsWith("https://")){var indexofmobiledoc=url.indexOf("/mobiledoc");validationURL=url.substring(indexofmobiledoc)}if(url.startsWith(" /mobiledoc")){var replacedUrl=url.replace(' /mobiledoc','/mobiledoc');validationURL=replacedUrl}return validationURL}function validateRequestContentForHttpCalls(method,url,data){try{if(url.includes('/mobiledoc/emr/urlinterceptor/exception-url-list')||url.includes('emr/instantdt/idt-config-http')||url.includes('/mobiledoc/jsp/catalog/xml/edi/checkBusinessDataTypeValidation.jsp')||url.includes('jsp/catalog/urlReqEncode/requestParamEncodeController.jsp')||url.includes('jsp/catalog/urlReqEncode/getReqParamEncodeExceptionList.jsp'))return true;if(enableReplaceSCDialog==='yes'){if(substitutionList.length===0){getValidationConfig()}}let requestData=data;requestData=getRequestDataForvalidatin(method,data,url);let bExceptionUrlMatch=isRequestURLExcluded(url,requestData);if(requestValidationMode==='0'||bExceptionUrlMatch){return true}if($.trim(requestData).length>0&&url&&(!url.includes('emr/instantdt/url-screen-mapping')&&!url.includes('emr/instantdt/logInvalidSCDTRequests'))&&!url.includes('/mobiledoc/jsp/catalog/xml/edi/retrieveFormFieldWidthDetails.jsp')){let requestValidatorData=getRequestValidationDetails();let validationURL=extractRequestURL(url);var indexofJsp=validationURL.indexOf("?");if(indexofJsp!==-1){validationURL=validationURL.substring(0,indexofJsp)}if(enableLogAllSCDTRequest==='yes'){logInvalidRequest(validationURL)}let jspValidationDetails=requestValidatorData[validationURL];let splcharArray=[];let row=[];if(jspValidationDetails&&!jQuery.isEmptyObject(jspValidationDetails)){let isActionBasedInterception=false;for(let index=0;index<jspValidationDetails.length;index++){row=jspValidationDetails[index];if(row&&!jQuery.isEmptyObject(row)){if(row['param']!==''&&row['value']!==''){const isActionInRequestData=requestData.includes("<"+row['param'])&&requestData.includes(">"+row['value']+"<")||requestData.includes("'"+row['param']+"':"+"'"+row['value']+"'")||requestData.includes("\""+row['param']+"\":"+"\""+row['value']+"\"")||requestData.includes(row['param']+":"+row['value'])||requestData.includes(row['param']+"="+row['value']);const isActionInURL=url.includes(row['param']+"="+row['value']);if(isActionInURL||isActionInRequestData){if($(row["parent_id"]).length>0&&$(row["parent_id"]).is(":visible")){isActionBasedInterception=true;break}}}else{if($(row["parent_id"]).length>0){isActionBasedInterception=true;break}}}}if(isActionBasedInterception){if(dataTruncUtilityService===null){dataTruncUtilityService=$(getProjMainElm()).injector().get("dataTruncUtilityService")}let parentId=row["parent_id"];if(parentId.indexOf('#')!==-1)parentId=parentId.split('#')[1];if(dataTruncUtilityService.getTextFieldWidthsFromTable(row["screen_identifier"],parentId,"bluetheme",true)){if(row['isGlobalCheckRequired']===1){var unsupported_characters=validateRequestDatawithPattern(requestData);if(unsupported_characters!==''){splcharArray.push(new dtValidation.splcharObj("Field",globalPatternDescription,unsupported_characters));logInvalidRequest(validationURL,requestData)}}}else{let timeoutajax=setTimeout(function(){enableAjaxClickedButtons();clearTimeout(timeoutajax)},500);return false}}else{var unsupported_characters=validateRequestDatawithPattern(requestData);if(unsupported_characters!==''){splcharArray.push(new dtValidation.splcharObj("Field",globalPatternDescription,unsupported_characters));logInvalidRequest(validationURL,requestData)}}}else{var unsupported_characters=validateRequestDatawithPattern(requestData);if(unsupported_characters!==''){splcharArray.push(new dtValidation.splcharObj("Field",globalPatternDescription,unsupported_characters));logInvalidRequest(validationURL,requestData)}}if(splcharArray!=null&&splcharArray.length>0){if(requestValidationMode==='2'||requestValidationMode==='3'){let strPrompt="";if(enableReplaceSCDialog==='yes'){strPrompt=generateValidationMsgHTMLSnippetForRequestwithReplace(splcharArray,requestData)}else{strPrompt=generateValidationMsgHTMLSnippetForRequestwithoutReplace(splcharArray)}showRequestValidationAlert(strPrompt)}if(requestValidationMode==='1'){return true}let timeoutButtonClickEnable=setTimeout(function(){enableAjaxClickedButtons();clearTimeout(timeoutButtonClickEnable)},500);return false}}}catch(e){}return true}function enableAjaxClickedButtons(){$('button[ajax-click-event],input[ajax-click-event]').each(function(){$(this).removeAttr("disabled");$(this).removeAttr("ajax-click-event")})}function validateRequestDatawithPattern(requestData){if(enableGlobalSCCheck!=='yes')return"";const CHAR_CODE_160=160;const CHAR_CODE_8239=8239;const CHAR_CODE_8203=8203;let requestDataFiltered=replaceWithCharCode(requestData,CHAR_CODE_160," ");requestDataFiltered=replaceWithCharCode(requestDataFiltered,CHAR_CODE_8239," ");requestDataFiltered=replaceWithCharCode(requestDataFiltered,CHAR_CODE_8203," ");let unsupported_chars=validatePattern(globalRegexpattern,requestDataFiltered);return unsupported_chars}function replaceWithCharCode(value,charCodetoBeReplaced,charToBePlaced){if(value&&value.length>0){if(value.indexOf(String.fromCharCode(charCodetoBeReplaced))>-1){value=value.replace(new RegExp(String.fromCharCode(charCodetoBeReplaced),"g"),charToBePlaced)}}return value}function showRequestValidationAlert(strMessage){jQuery('#requestValidationBody').html(strMessage);setTimeout(function(){$('#specialCharRemovedMessageRequest').modal({backdrop:'static',keyboard:false})},250);$(".modal-header").css('cursor','move');$(".modal-dialog").draggable({handle:".modal-header"})}var validationItems=[];var totalReplacementItemsCount=0;var textCharacters=[];var replacementChars=[];var currentReplacementItemNum=0;var replace={currentReplacementValue:"",substitutionValue:"",maxChars:0};var requestDatatoReplace="";var specialCharArrayReplace=[];var replaceCharsListToApply=[];function replaceCharsClassic(){if(currentReplacementItemNum===totalReplacementItemsCount){$("#showUnsupportedCharsReplacement").hide();$('#showUnsupportedCharsReplacementMsg').show()}var currentReplacementElement=$('#currentReplacementValue');var substitutionElement=$('#substitutionValue');requestDatatoReplace=requestDatatoReplace.replace(currentReplacementElement.val(),substitutionElement.val());replaceCharsListToApply.push({"replacevalue":currentReplacementElement.val(),"substitutionValue":substitutionElement.val()});identifyAndFormatValue(requestDatatoReplace,specialCharArrayReplace);var htmlData="";htmlData+="<div id='idt-replace-box-special-chars' class='idt-replace-box-special-chars' style='background:white;border: 1px solid #aaa; border-radius: 3px;height: 300px;margin-right: 5px; padding: 5px;overflow: auto;'>";for(var m=0;m<textCharacters.length;m++){htmlData+="<span class='idt-replace-characters' style='font-size: 0;'>";if(textCharacters[m].type==='plain'){htmlData+="<span  style='font-size: 12px;padding:1px'>"+textCharacters[m].value+"</span>"}if(textCharacters[m].type==='unsupported'){htmlData+="<span  style='padding:1px;font-size: 12px;background-color: #ffbbbb;cursor: pointer;'>"+textCharacters[m].value+"</span>"}htmlData+="</span>";if(m!==0&&m%50===0)htmlData+="<br/>"}htmlData+="</div>";$('.idt-replace-box').empty().append(htmlData);currentReplacementItemNum++;$('#currentReplacementItemNum').text(currentReplacementItemNum);if(replacementChars[currentReplacementItemNum-1]!=null){replace.currentReplacementValue=replacementChars[currentReplacementItemNum-1].value;currentReplacementElement.val(replace.currentReplacementValue)}replace.substitutionValue=getSubstitutionValue(replace.currentReplacementValue);substitutionElement.val(replace.substitutionValue)}function generateValidationMsgHTMLSnippetForRequestwithReplace(splcharArray,requestData){var strHTML="";var index="";strHTML="";validationItems=[];totalReplacementItemsCount=0;textCharacters=[];replacementChars=[];replaceCharsListToApply=[];requestDatatoReplace=requestData;if(splcharArray!=null&&splcharArray.length>0){var uniqueSpecialChars=splcharArray[0].enteredCharacters;var enteredChars=uniqueSpecialChars;var validChars=splcharArray[0].validCharacters;validationItems.push({index:1,validation:"Unsupported Character",entered:enteredChars,allowed:validChars});specialCharArrayReplace=uniqueSpecialChars;totalReplacementItemsCount=identifyAndFormatValue(requestData,uniqueSpecialChars);replacementChars=getReplacementItems();currentReplacementItemNum=1;replace.currentReplacementValue=replacementChars[currentReplacementItemNum-1].value;replace.substitutionValue=getSubstitutionValue(replace.currentReplacementValue)}if(splcharArray!=null&&splcharArray.length>0){strHTML+='<div class="col-sm-12"><div style="padding-top: 12px !important">';strHTML+='The data entered <b> cannot be saved </b> because [';strHTML+=splcharArray.length+']  of the fields includes';strHTML+='<b> characters that are not allowed.  </b>';strHTML+='</div>';strHTML+='<div style="padding-bottom:12px"></div>';strHTML+='<table class="table blue-fade-table nomargin" id="splcharstable">';strHTML+='<thead><tr><th width="10%">#</th><th width="30%">Validation Error</th>';strHTML+='<th width="30%">Characters Entered</th><th width="50%">Characters Allowed</th>';strHTML+='</tr></thead><tbody>';for(var i=0;i<splcharArray.length;i++){index=i+1;strHTML+="<tr>";strHTML+="<td width='10%'>"+index+"</td>";strHTML+="<td width='30%' title='Unsupported Character'>Unsupported Character</td>";strHTML+="<td width='30%' title='"+String(escapeHtml(splcharArray[i].enteredCharacters))+"'>"+escapeHtml(splcharArray[i].enteredCharacters)+"</td>";strHTML+="<td width='50%' title='"+String(escapeHtml(splcharArray[i].validCharacters))+"'>"+escapeHtml(splcharArray[i].validCharacters)+"</td>";strHTML+="</tr>"}strHTML+="</tbody></table>";strHTML+="</div>";strHTML+="<div class='idt-replace-container col-sm-12' style='padding: 15px;padding-bottom:25px;height:365px;'>";strHTML+="    <span class='idt-replace-header' style='font-weight: 600;padding: 5px 0;'>Find and Replace</span>";strHTML+="    <div class='idt-replace-body'>";strHTML+="        <div class='idt-replace-box' style='width: 47%; height: 300px;display: inline-block;float:left;'>";strHTML+="            <div id='idt-replace-box-special-chars' class='idt-replace-box-special-chars' style='background:white;border: 1px solid #aaa; border-radius: 3px;height: 300px;margin-right: 5px; padding: 5px;overflow: auto;'>";for(var m=0;m<textCharacters.length;m++){strHTML+="                <span class='idt-replace-characters' style='font-size: 0;'>";if(textCharacters[m].type==='plain'){strHTML+="<span  style='padding:1px;font-size: 12px;'>"+textCharacters[m].value+"</span>"}if(textCharacters[m].type==='unsupported'){strHTML+="<span  style='padding:1px;font-size: 12px;background-color: #ffbbbb;cursor: pointer;'>"+textCharacters[m].value+"</span>"}strHTML+="</span>"}strHTML+="            </div></div>";strHTML+="        <div class='idt-replace-suggestions' style='border-radius: 3px;margin-left: 5px;padding: 5px;width:47%;float:right; background-color: #ecf9ff;border: 1px solid #d4f1ff;display: inline-block'>";strHTML+="            <div id='showUnsupportedCharsReplacement'>";strHTML+="                <div class='idt-replace-count-container'  style='text-align: right;'>";strHTML+="                    <span id='currentReplacementItemNum'>"+currentReplacementItemNum+"</span> of <span id='totalReplacementItemsCount'>"+totalReplacementItemsCount+"</span></span>";strHTML+="                </div>";strHTML+="                <div class='idt-replace-input form-group' style='margin-top: 20px;'>";strHTML+="                    <div class='idt-replace-item' style='margin-bottom: 10px;'>";strHTML+="                        <span class='idt-replace-label' style=' padding-right: 10px;text-align: right;width: 100px;'>Replace</span>";strHTML+="                        <input type='text' class='form-control' id='currentReplacementValue' disabled style='width: 100%;' value='"+replace.currentReplacementValue+"'/>";strHTML+="                    </div>";strHTML+="                    <div class='idt-replace-item' style='margin-bottom: 10px;'>";strHTML+="                        <span class='idt-replace-label' style=' padding-right: 10px;text-align: right;width: 100px;'>With</span>";strHTML+="                        <input type='text' class='form-control clearable' id='substitutionValue' style='width: 100%;' value='"+replace.substitutionValue+"'/>";strHTML+="                    </div>";strHTML+="                </div>";strHTML+="                <div class='idt-replace-action' style='text-align: right;'>";strHTML+="                    <button id='replacecharsbtn' class='btn btn-blue btn-xs btn-sm'>Replace</button>";strHTML+="                </div>";strHTML+="            </div>";strHTML+="            <div id='showUnsupportedCharsReplacementMsg' class='idt-special-char-message' style='display:none;margin-top:10px;color: #2b91d9;font-size: 16px;'>";strHTML+="                There are no more unsupported characters.<br>Click on the <i>Apply</i> button to continue.";strHTML+="            </div>";strHTML+="        </div>";strHTML+="    </div>";strHTML+="</div>";jQuery(document).off('click',"#replacecharsbtn").on("click","#replacecharsbtn",function(){replaceCharsClassic()})}return strHTML}function generateValidationMsgHTMLSnippetForRequestwithoutReplace(splcharArray){let strHTML="";if(splcharArray!=null&&splcharArray.length>0){strHTML+='<div class="col-sm-12"><div style="padding-top: 12px !important">';strHTML+='The data entered <b> cannot be saved </b> because [';strHTML+=splcharArray.length+']  of the fields includes';strHTML+='<b> characters that are not allowed.  </b>';strHTML+='</div>';strHTML+='<div style="padding-bottom:12px"></div>';strHTML+='<table class="table blue-fade-table nomargin" id="splcharstable">';strHTML+='<thead><tr><th width="10%">#</th><th width="30%">Validation Error</th>';strHTML+='<th width="30%">Characters Entered</th><th width="50%">Characters Allowed</th>';strHTML+='</tr></thead><tbody>';for(var i=0;i<splcharArray.length;i++){index=i+1;strHTML+="<tr>";strHTML+="<td width='10%'>"+index+"</td>";strHTML+="<td width='30%' title='Unsupported Character'>Unsupported Character</td>";strHTML+="<td width='30%' title='"+String(escapeHtml(splcharArray[i].enteredCharacters))+"'>"+escapeHtml(splcharArray[i].enteredCharacters)+"</td>";strHTML+="<td width='50%' title='"+String(escapeHtml(splcharArray[i].validCharacters))+"'>"+escapeHtml(splcharArray[i].validCharacters)+"</td>";strHTML+="</tr>"}strHTML+="</tbody></table>";strHTML+="</div>"}return strHTML}function getSubstitutionValue(currentReplacementValue){for(var j=0;j<substitutionList.length;j++){var unicodetoASCII=String.fromCharCode('0x'+substitutionList[j].unicodeValue);if(unicodetoASCII===currentReplacementValue){return substitutionList[j].replaceValue}}return""}function validateSpecialCharInDisabledField(specialCharValue){var isSpecialCharinDisabledField=false;$('input, select , textarea').each(function(index){var input=$(this);var elementValue=input.val();if(elementValue&&elementValue.indexOf(specialCharValue)>-1){if(input.is('[readonly]')||input.is('[disabled]')){isSpecialCharinDisabledField=true}else{isSpecialCharinDisabledField=false;return false}}});$('td').each(function(index){var input=$(this);var elementValue=input.text();if(elementValue&&elementValue.indexOf(specialCharValue)>-1){isSpecialCharinDisabledField=true}});const iframeElements=document.getElementsByTagName("iframe");for(let i=0;i<iframeElements.length;i++){$(iframeElements[i]).contents().find('input, select , textarea').each(function(index){var input=$(this);var elementValue=input.val();if(elementValue&&elementValue.indexOf(specialCharValue)>-1){if(input.is('[readonly]')||input.is('[disabled]')){isSpecialCharinDisabledField=true}else{isSpecialCharinDisabledField=false;return false}}});$(iframeElements[i]).contents().find('td').each(function(index){var input=$(this);var elementValue=input.text();if(elementValue&&elementValue.indexOf(specialCharValue)>-1){isSpecialCharinDisabledField=true}})}return isSpecialCharinDisabledField}function applyReplacedValues(){for(var r=0;r<replaceCharsListToApply.length;r++){$('input, select , textarea').each(function(index){var input=$(this);var elementValue=input.val();if(elementValue&&elementValue.indexOf(replaceCharsListToApply[r].replacevalue)>-1){elementValue=elementValue.replace(replaceCharsListToApply[r].replacevalue,replaceCharsListToApply[r].substitutionValue);input.val(elementValue)}});const iframeElements=document.getElementsByTagName("iframe");for(let i=0;i<iframeElements.length;i++){$(iframeElements[i]).contents().find('input, select , textarea').each(function(index){var input=$(this);var elementValue=input.val();if(elementValue&&elementValue.indexOf(replaceCharsListToApply[r].replacevalue)>-1){elementValue=elementValue.replace(replaceCharsListToApply[r].replacevalue,replaceCharsListToApply[r].substitutionValue);input.val(elementValue)}})}}$('#specialCharRemovedMessageRequest').modal('hide')}function getReplacementItems(){var replacementItems=[];for(var j=0;j<textCharacters.length;j++){if(textCharacters[j].type==="unsupported"){replacementItems.push(textCharacters[j])}}return replacementItems}function identifyAndFormatValue(value,uniqueSpecialChars){var unsupportedCharIndex=1;var allCharacters=[];for(var i=0;i<value.length;i++){var subjectChar=value.charAt(i);if(uniqueSpecialChars.indexOf(subjectChar)>-1){unsupportedCharIndex++;allCharacters.push({type:"unsupported",index:unsupportedCharIndex,value:subjectChar})}else{allCharacters.push({type:"plain",value:subjectChar})}}textCharacters=allCharacters;return unsupportedCharIndex-1}function getRequestValidationDetails(){let requestValidatorData={};const storageKey="ECW_REQUEST_VALIDATION";let serverUrl="/mobiledoc/emr/instantdt/url-screen-mapping/web";serverUrl=makeCachedUrl(serverUrl);if(isSupportsLocalStorage()){if(!containsKey(storageKey)){requestValidatorData=JSON.stringify(getCachedServerData(serverUrl));put(storageKey,requestValidatorData)}else{requestValidatorData=get(storageKey)}}else{var serverResponse=getCachedServerData(serverUrl);requestValidatorData=JSON.stringify(serverResponse)}return JSON.parse(requestValidatorData)}function logInvalidRequest(url){if(requestValidationMode==='1'||requestValidationMode==='2'){var paramData={requestUrl:url,modality:'web'};jQuery.ajax({method:'POST',url:'/mobiledoc/emr/instantdt/logInvalidSCDTRequests',data:paramData,success:function(){}})}}var isRequestURLExcluded=function(requestURL,requestData){var exceptionUrlList=[];var includeUrlList=[];let bExceptionUrlMatch=false;exceptionUrlList=getRequestURLExceptionList();for(let i=0;i<exceptionUrlList.length;i++){let exceptionurl=exceptionUrlList[i].exceptionurl;let beginswithurl=exceptionUrlList[i].beginswithurl;let includeflag=exceptionUrlList[i].includeflag;let params=exceptionUrlList[i].params;if(requestURL.indexOf(exceptionurl)===0&&includeflag!=="1"){bExceptionUrlMatch=true}if(beginswithurl!==""&&requestURL.startsWith(beginswithurl)){bExceptionUrlMatch=true}if(exceptionurl!==''&&requestURL.indexOf(exceptionurl)===0&&includeflag==="1"){includeUrlList.push(exceptionurl)}if(bExceptionUrlMatch){for(let j=0;j<params.length;j++){const param=params[j];bExceptionUrlMatch=false;if(param['name']!==''&&param['value']!==''){const isParamInRequestData=requestData.includes("<"+param['name'])&&requestData.includes(">"+param['value']+"<")||requestData.includes("'"+param['name']+"':"+"'"+param['value']+"'")||requestData.includes("\""+param['name']+"\":"+"\""+param['value']+"\"")||requestData.includes(param['name']+":"+param['value'])||requestData.includes(param['name']+"="+param['value']);const isParamInURL=requestURL.includes(param['name']+"="+param['value']);if(isParamInURL||isParamInRequestData){bExceptionUrlMatch=true;break}}}break}}for(let i=0;i<includeUrlList.length;i++){if(requestURL.indexOf(includeUrlList[i])===0){bExceptionUrlMatch=false}}return bExceptionUrlMatch};function getRequestURLExceptionList(){var exceptionList="";let storageKey="ECW_UNICODE_Request_EXCEPTIONLIST";var serverUrl="/mobiledoc/emr/urlinterceptor/exception-url-list";if(typeof global!="undefined"){serverUrl=makeCachedUrl(serverUrl)}if(isSupportsLocalStorage()){if(!containsKey(storageKey)){exceptionList=getCachedServerData(serverUrl);put(storageKey,JSON.stringify(exceptionList.exceptions))}else{exceptionList=get(storageKey)}}else{var serverResponse=getCachedServerData(serverUrl);exceptionList=serverResponse}return JSON.parse(exceptionList)}let bindAjaxInterceptorToIframe=function(target){if(requestValidationMode==='0')return;if(target){$(target).load(function(){scdtHelperIsAbsent(this.contentWindow).then(function(winCtx){var target=winCtx.XMLHttpRequest;ajaxSession=new AjaxListener(target)})["catch"](function(){})})}};function AjaxListener(target){var s_ajaxListener=new Object;this.setTarget=function(target){s_ajaxListener.target=target;s_ajaxListener.tempOpen=target.prototype.open;s_ajaxListener.tempSend=target.prototype.send;s_ajaxListener.tempAbort=target.prototype.abort;s_ajaxListener.target.prototype.open=s_ajaxListener.customXHROpen;s_ajaxListener.target.prototype.send=s_ajaxListener.customXHRSend};s_ajaxListener.customXHRSend=function(params){if(!validateRequestContentForHttpCalls(s_ajaxListener.method,s_ajaxListener.url,params)){throw new Error('Data Validation Error.')}s_ajaxListener.tempSend.call(this,params)};s_ajaxListener.customXHROpen=function(method,url,async){s_ajaxListener.method=method;s_ajaxListener.url=url;s_ajaxListener.tempOpen.call(this,method,url,async)};this.setTarget(target)}function validatePattern(filter,inputValue){var matches1;var regmatch="";var matchesSet=new Set;var matchesList=[];var matchesArray=[];var regex1=RegExp(filter,'g');inputValue=inputValue.trim();while((matches1=regex1.exec(inputValue))!==null){if(matches1.index===regex1.lastIndex){regex1.lastIndex++}if(regmatch.length===0&&matches1[0]!==""){if(matches1[0].length===1&&matches1[0]===" "){regmatch="<Space>";matchesList.push("<Space>")}else{regmatch=matches1[0];matchesList.push(matches1[0])}}else if(regmatch.length>0&&matches1[0]!==""){if(matches1[0].length===1&&matches1[0]===" "){regmatch=regmatch+","+"<Space>";matchesList.push("<Space>")}else{regmatch=regmatch+","+matches1[0];matchesList.push(matches1[0])}}}for(let i=0;i<matchesList.length;i++){var matchValue=matchesList[i];for(let j=0;j<matchValue.length;j++){matchesSet.add(matchValue.charAt(j))}}matchesSet.forEach(function(value1){var isSpecialCharInDisabledField=validateSpecialCharInDisabledField(value1);if(!isSpecialCharInDisabledField){matchesArray.push(value1)}});return matchesArray.join(' ')}const mutationConfig={attributes:true,childList:true,subtree:true,characterData:false,attributeFilter:["contenteditable","idt-force-trigger"]};function setupAjaxInterceptor(){new MutationObserver(mutation=>observeMutationsforIframe(mutation)).observe(document,mutationConfig)}function observeMutationsforIframe(mutations){setTimeout(function(mutationItems){mutationItems.forEach(function(mutation){monitorElementforAjaxInterception(mutation)})},0,mutations)}function monitorElementforAjaxInterception(node){if(requestvalidationModeMutationObserver!=='0'){generateIframeHandlersforAjaxInterception(node)}generateButtonandFormHandler(node)}const iframeSelector="iframe:not([title=webviewer])";const buttonSelector="input[type=button],button";const formSelector="form";function validateSubmit(e,element){if(validateRequestContentForHttpCalls(element.method,$(element).attr("action"),$(element).serialize())){return true}e.preventDefault()}function checkClickAttr(e,element){$('[ajax-click-event=1]').removeAttr('ajax-click-event');element.setAttribute("ajax-click-event",1)}function generateIframeHandlersforAjaxInterception(node){const iframePipeline=[];let btnPipeline=[];let formPipeline=[];if(node.target.matches(iframeSelector)){iframePipeline.push(node.target)}node.addedNodes.forEach(iframe=>{if(iframe.querySelectorAll){iframePipeline.push(...iframe.querySelectorAll(iframeSelector));btnPipeline.push(...iframe.querySelectorAll(buttonSelector));formPipeline.push(...iframe.querySelectorAll(formSelector))}});node.removedNodes.forEach(element=>{element.removeEventListener("click",checkClickAttr);element.removeEventListener("submit",validateSubmit)});btnPipeline.forEach(function(element){element.addEventListener("click",checkClickAttr.bind(null,event,element))});formPipeline.forEach(function(element){element.addEventListener("submit",validateSubmit.bind(null,event,element))});btnPipeline=null;formPipeline=null;iframePipeline.forEach(setupIFrameforAjaxInterception)}function generateButtonandFormHandler(node){let btnPipeline=[];let formPipeline=[];node.addedNodes.forEach(element=>{if(element.querySelectorAll){btnPipeline.push(...element.querySelectorAll(buttonSelector));formPipeline.push(...element.querySelectorAll(formSelector))}});node.removedNodes.forEach(element=>{element.removeEventListener("click",checkClickAttr);element.removeEventListener("submit",validateSubmit)});btnPipeline.forEach(function(element){element.addEventListener("click",checkClickAttr.bind(null,event,element))});formPipeline.forEach(function(element){element.addEventListener("submit",validateSubmit.bind(null,event,element))});formPipeline=null;btnPipeline=null}function initFrameforAjaxInterception(frame){if(frame.contentWindow!=null&&frame.contentWindow.document!=null){let iframeBody=frame.contentWindow.document;scdtHelperIsAbsent(frame.contentWindow).then(function(winCtx){bindAjaxInterceptorToIframe(frame);iframeBody.querySelectorAll(formSelector).forEach(item=>{item.addEventListener("submit",e=>validateSubmit(e,item))})})["catch"](function(){})}}function scdtHelperIsAbsent(windowContext){return new Promise(function(resolve,reject){(function(winCtx){if(winCtx!=null&&winCtx.requestValidationMode===undefined){return resolve(winCtx)}else{return reject(winCtx)}})(windowContext)})}function setupIFrameforAjaxInterception(iframe){if(iframe.hasAttribute("ajax-interception-check")){return}iframe.setAttribute("ajax-interception-check",1);iframe.addEventListener("load",function(){this.loaded=true;initFrameforAjaxInterception(this)});let timeoutIframeAjax=setTimeout(frame=>{if(frame.loaded===true){return}initFrameforAjaxInterception(frame);clearTimeout(timeoutIframeAjax)},100,iframe)}setupAjaxInterceptor();return{validateRequestContentForHttpCalls:validateRequestContentForHttpCalls,bindAjaxInterceptorToIframe:bindAjaxInterceptorToIframe,applyReplacedValues:applyReplacedValues}}();